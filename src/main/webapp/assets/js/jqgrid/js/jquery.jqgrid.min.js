(function(b){b.jgrid=b.jgrid||{};b.extend(b.jgrid,{version:"4.5.2",htmlDecode:function(b){return b&&("&nbsp;"===b||"&#160;"===b||1===b.length&&160===b.charCodeAt(0))?"":!b?b:(""+b).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},htmlEncode:function(b){return !b?b:(""+b).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},format:function(d){var f=b.makeArray(arguments).slice(1);null==d&&(d="");return d.replace(/\{(\d+)\}/g,function(b,e){return f[e]})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var b=-1;null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(b=parseFloat(RegExp.$1));return b},getCellIndex:function(d){d=b(d);if(d.is("tr")){return -1}d=(!d.is("td")&&!d.is("th")?d.closest("td,th"):d)[0];return b.jgrid.msie?b.inArray(d,d.parentNode.cells):d.cellIndex},stripHtml:function(b){var b=""+b,f=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return b?(b=b.replace(f,""))&&"&nbsp;"!==b&&"&#160;"!==b?b.replace(/\"/g,"'"):"":b},stripPref:function(d,f){var c=b.type(d);if("string"===c||"number"===c){d=""+d,f=""!==d?(""+f).replace(""+d,""):f}return f},parse:function(d){"while(1);"===d.substr(0,9)&&(d=d.substr(9));"/*"===d.substr(0,2)&&(d=d.substr(2,d.length-4));d||(d="{}");return !0===b.jgrid.useJSON&&"object"===typeof JSON&&"function"===typeof JSON.parse?JSON.parse(d):eval("("+d+")")},parseDate:function(d,f,c,e){var a=/^\/Date\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\)\/$/,j="string"===typeof f?f.match(a):null,a=function(a,b){a=""+a;for(b=parseInt(b,10)||2;a.length<b;){a="0"+a}return a},g={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},h=0,i,k,h=function(a,b){0===a?12===b&&(b=0):12!==b&&(b+=12);return b};void 0===e&&(e=b.jgrid.formatter.date);void 0===e.parseRe&&(e.parseRe=/[Tt\\\/:_;.,\t\s-]/);e.masks.hasOwnProperty(d)&&(d=e.masks[d]);if(f&&null!=f){if(!isNaN(f-0)&&"u"===(""+d).toLowerCase()){h=new Date(1000*parseFloat(f))}else{if(f.constructor===Date){h=f}else{if(null!==j){h=new Date(parseInt(j[1],10)),j[3]&&(d=60*Number(j[5])+Number(j[6]),d*="-"===j[4]?1:-1,d-=h.getTimezoneOffset(),h.setTime(Number(Number(h)+60000*d)))}else{f=(""+f).replace(/\\T/g,"T").replace(/\\t/,"t").split(e.parseRe);d=d.replace(/\\T/g,"T").replace(/\\t/,"t").split(e.parseRe);i=0;for(k=d.length;i<k;i++){"M"===d[i]&&(j=b.inArray(f[i],e.monthNames),-1!==j&&12>j&&(f[i]=j+1,g.m=f[i])),"F"===d[i]&&(j=b.inArray(f[i],e.monthNames,12),-1!==j&&11<j&&(f[i]=j+1-12,g.m=f[i])),"a"===d[i]&&(j=b.inArray(f[i],e.AmPm),-1!==j&&2>j&&f[i]===e.AmPm[j]&&(f[i]=j,g.h=h(f[i],g.h))),"A"===d[i]&&(j=b.inArray(f[i],e.AmPm),-1!==j&&1<j&&f[i]===e.AmPm[j]&&(f[i]=j-2,g.h=h(f[i],g.h))),"g"===d[i]&&(g.h=parseInt(f[i],10)),void 0!==f[i]&&(g[d[i].toLowerCase()]=parseInt(f[i],10))}g.f&&(g.m=g.f);if(0===g.m&&0===g.y&&0===g.d){return"&#160;"}g.m=parseInt(g.m,10)-1;h=g.y;70<=h&&99>=h?g.y=1900+g.y:0<=h&&69>=h&&(g.y=2000+g.y);h=new Date(g.y,g.m,g.d,g.h,g.i,g.s,g.u)}}}}else{h=new Date(g.y,g.m,g.d,g.h,g.i,g.s,g.u)}if(void 0===c){return h}e.masks.hasOwnProperty(c)?c=e.masks[c]:c||(c="Y-m-d");d=h.getHours();f=h.getMinutes();g=h.getDate();j=h.getMonth()+1;i=h.getTimezoneOffset();k=h.getSeconds();var l=h.getMilliseconds(),o=h.getDay(),n=h.getFullYear(),m=(o+6)%7+1,t=(new Date(n,j-1,g)-new Date(n,0,1))/86400000,A={d:a(g),D:e.dayNames[o],j:g,l:e.dayNames[o+7],N:m,S:e.S(g),w:o,z:t,W:5>m?Math.floor((t+m-1)/7)+1:Math.floor((t+m-1)/7)||(4>((new Date(n-1,0,1)).getDay()+6)%7?53:52),F:e.monthNames[j-1+12],m:a(j),M:e.monthNames[j-1],n:j,t:"?",L:"?",o:"?",Y:n,y:(""+n).substring(2),a:12>d?e.AmPm[0]:e.AmPm[1],A:12>d?e.AmPm[2]:e.AmPm[3],B:"?",g:d%12||12,G:d,h:a(d%12||12),H:a(d),i:a(f),s:a(k),u:l,e:"?",I:"?",O:(0<i?"-":"+")+a(100*Math.floor(Math.abs(i)/60)+Math.abs(i)%60,4),P:"?",T:((""+h).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(h/1000)};return c.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(a){return A.hasOwnProperty(a)?A[a]:a.substring(1)})},jqID:function(b){return(""+b).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(d){return(d||b.jgrid.uidPref)+b.jgrid.guid++},getAccessor:function(b,f){var c,e,a=[],j;if("function"===typeof f){return f(b)}c=b[f];if(void 0===c){try{if("string"===typeof f&&(a=f.split(".")),j=a.length){for(c=b;c&&j--;){e=a.shift(),c=c[e]}}}catch(g){}}return c},getXmlData:function(d,f,c){var e="string"===typeof f?f.match(/^(.*)\[(\w+)\]$/):null;if("function"===typeof f){return f(d)}if(e&&e[2]){return e[1]?b(e[1],d).attr(e[2]):b(d).attr(e[2])}d=b(f,d);return c?d:0<d.length?b(d).text():void 0},cellWidth:function(){var d=b("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;'></td></tr></table></div>"),f=d.appendTo("body").find("td").width();d.remove();return 5!==f},cell_width:!0,ajaxOptions:{},from:function(d){return new function(d,c){"string"===typeof d&&(d=b.data(d));var e=this,a=d,j=!0,g=!1,h=c,i=/[\$,%]/g,k=null,l=null,o=0,n=!1,m="",t=[],A=!0;if("object"===typeof d&&d.push){0<d.length&&(A="object"!==typeof d[0]?!1:!0)}else{throw"data provides is not an array"}this._hasData=function(){return null===a?!1:0===a.length?!1:!0};this._getStr=function(a){var b=[];g&&b.push("jQuery.trim(");b.push("String("+a+")");g&&b.push(")");j||b.push(".toLowerCase()");return b.join("")};this._strComp=function(a){return"string"===typeof a?".toString()":""};this._group=function(a,b){return{field:a.toString(),unique:b,items:[]}};this._toStr=function(a){g&&(a=b.trim(a));a=a.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"');return j?a:a.toLowerCase()};this._funcLoop=function(e){var d=[];b.each(a,function(a,b){d.push(e(b))});return d};this._append=function(a){var b;h=null===h?"":h+(""===m?" && ":m);for(b=0;b<o;b++){h+="("}n&&(h+="!");h+="("+a+")";n=!1;m="";o=0};this._setCommand=function(a,b){k=a;l=b};this._resetNegate=function(){n=!1};this._repeatCommand=function(a,b){return null===k?e:null!==a&&null!==b?k(a,b):null===l||!A?k(a):k(l,a)};this._equals=function(a,b){return 0===e._compare(a,b,1)};this._compare=function(a,b,e){var d=Object.prototype.toString;void 0===e&&(e=1);void 0===a&&(a=null);void 0===b&&(b=null);if(null===a&&null===b){return 0}if(null===a&&null!==b){return 1}if(null!==a&&null===b){return -1}if("[object Date]"===d.call(a)&&"[object Date]"===d.call(b)){return a<b?-e:a>b?e:0}!j&&"number"!==typeof a&&"number"!==typeof b&&(a=""+a,b=""+b);return a<b?-e:a>b?e:0};this._performSort=function(){0!==t.length&&(a=e._doSort(a,0))};this._doSort=function(a,b){var d=t[b].by,g=t[b].dir,j=t[b].type,c=t[b].datefmt;if(b===t.length-1){return e._getOrder(a,d,g,j,c)}b++;for(var d=e._getGroup(a,d,g,j,c),g=[],f,j=0;j<d.length;j++){f=e._doSort(d[j].items,b);for(c=0;c<f.length;c++){g.push(f[c])}}return g};this._getOrder=function(a,d,g,c,f){var h=[],k=[],l="a"===g?1:-1,o,n;void 0===c&&(c="text");n="float"===c||"number"===c||"currency"===c||"numeric"===c?function(a){a=parseFloat((""+a).replace(i,""));return isNaN(a)?0:a}:"int"===c||"integer"===c?function(a){return a?parseFloat((""+a).replace(i,"")):0}:"date"===c||"datetime"===c?function(a){return b.jgrid.parseDate(f,a).getTime()}:b.isFunction(c)?c:function(a){a=a?b.trim(""+a):"";return j?a:a.toLowerCase()};b.each(a,function(a,e){o=""!==d?b.jgrid.getAccessor(e,d):e;void 0===o&&(o="");o=n(o,e);k.push({vSort:o,index:a})});k.sort(function(a,b){a=a.vSort;b=b.vSort;return e._compare(a,b,l)});for(var c=0,m=a.length;c<m;){g=k[c].register,h.push(a[g]),c++}return h};this._getGroup=function(a, d, g, j, c){var f=[],h=null,i=null,k;b.each(e._getOrder(a,d,g,j,c),function(a, g){k=b.jgrid.getAccessor(g,d);null==k&&(k="");e._equals(i,k)||(i=k,null!==h&&f.push(h),h=e._group(d,k));h.items.push(g)});null!==h&&f.push(h);return f};this.ignoreCase=function(){j=!1;return e};this.useCase=function(){j=!0;return e};this.trim=function(){g=!0;return e};this.noTrim=function(){g=!1;return e};this.execute=function(){var d=h,g=[];if(null===d){return e}b.each(a,function(){eval(d)&&g.push(this)});a=g;return e};this.data=function(){return a};this.select=function(d){e._performSort();if(!e._hasData()){return[]}e.execute();if(b.isFunction(d)){var g=[];b.each(a,function(a,b){g.push(d(b))});return g}return a};this.hasMatch=function(){if(!e._hasData()){return !1}e.execute();return 0<a.length};this.andNot=function(a,b,d){n=!n;return e.and(a,b,d)};this.orNot=function(a,b,d){n=!n;return e.or(a,b,d)};this.not=function(a,b,d){return e.andNot(a,b,d)};this.and=function(a,b,d){m=" && ";return void 0===a?e:e._repeatCommand(a,b,d)};this.or=function(a,b,d){m=" || ";return void 0===a?e:e._repeatCommand(a,b,d)};this.orBegin=function(){o++;return e};this.orEnd=function(){null!==h&&(h+=")");return e};this.isNot=function(a){n=!n;return e.is(a)};this.is=function(a){e._append("this."+a);e._resetNegate();return e};this._compareValues=function(a,d,g,j,c){var f;f=A?"jQuery.jgrid.getAccessor(this,'"+d+"')":"this";void 0===g&&(g=null);var h=g,k=void 0===c.stype?"text":c.stype;if(null!==g){switch(k){case"int":case"integer":h=isNaN(Number(h))||""===h?"0":h;f="parseInt("+f+",10)";h="parseInt("+h+",10)";break;case"float":case"number":case"numeric":h=(""+h).replace(i,"");h=isNaN(Number(h))||""===h?"0":h;f="parseFloat("+f+")";h="parseFloat("+h+")";break;case"date":case"datetime":h=""+b.jgrid.parseDate(c.newfmt||"Y-m-d",h).getTime();f='jQuery.jgrid.parseDate("'+c.srcfmt+'",'+f+").getTime()";break;default:f=e._getStr(f),h=e._getStr('"'+e._toStr(h)+'"')}}e._append(f+" "+j+" "+h);e._setCommand(a,d);e._resetNegate();return e};this.equals=function(a,b,d){return e._compareValues(e.equals,a,b,"==",d)};this.notEquals=function(a,b,d){return e._compareValues(e.equals,a,b,"!==",d)};this.isNull=function(a,b,d){return e._compareValues(e.equals,a,null,"===",d)};this.greater=function(a,b,d){return e._compareValues(e.greater,a,b,">",d)};this.less=function(a,b,d){return e._compareValues(e.less,a,b,"<",d)};this.greaterOrEquals=function(a,b,d){return e._compareValues(e.greaterOrEquals,a,b,">=",d)};this.lessOrEquals=function(a,b,d){return e._compareValues(e.lessOrEquals,a,b,"<=",d)};this.startsWith=function(a,d){var c=null==d?a:d,c=g?b.trim(c.toString()).length:c.toString().length;A?e._append(e._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr(0,"+c+") == "+e._getStr('"'+e._toStr(d)+'"')):(c=g?b.trim(d.toString()).length:d.toString().length,e._append(e._getStr("this")+".substr(0,"+c+") == "+e._getStr('"'+e._toStr(a)+'"')));e._setCommand(e.startsWith,a);e._resetNegate();return e};this.endsWith=function(a,d){var c=null==d?a:d,c=g?b.trim(c.toString()).length:c.toString().length;A?e._append(e._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".substr("+e._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+".length-"+c+","+c+') == "'+e._toStr(d)+'"'):e._append(e._getStr("this")+".substr("+e._getStr("this")+'.length-"'+e._toStr(a)+'".length,"'+e._toStr(a)+'".length) == "'+e._toStr(a)+'"');e._setCommand(e.endsWith,a);e._resetNegate();return e};this.contains=function(a,b){A?e._append(e._getStr("jQuery.jgrid.getAccessor(this,'"+a+"')")+'.indexOf("'+e._toStr(b)+'",0) > -1'):e._append(e._getStr("this")+'.indexOf("'+e._toStr(a)+'",0) > -1');e._setCommand(e.contains,a);e._resetNegate();return e};this.groupBy=function(b,d,g,c){return !e._hasData()?null:e._getGroup(a,b,d,g,c)};this.orderBy=function(a,d,g,c){d=null==d?"a":b.trim(d.toString().toLowerCase());null==g&&(g="text");null==c&&(c="Y-m-d");if("desc"===d||"descending"===d){d="d"}if("asc"===d||"ascending"===d){d="a"}t.push({by:a,dir:d,type:g,datefmt:c});return e};return e}(d,null)},getMethod:function(d){return this.getAccessor(b.fn.jqGrid,d)},extend:function(d){b.extend(b.fn.jqGrid,d);this.no_legacy_api||b.fn.extend(d)}});b.fn.jqGrid=function(d){if("string"===typeof d){var f=b.jgrid.getMethod(d);if(!f){throw"jqGrid - No such method: "+d}var c=b.makeArray(arguments).slice(1);return f.apply(this,c)}return this.each(function(){if(!this.grid){var e=b.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:30,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus",displayField:[]},ignoreCase:!1,cmTemplate:{},idPrefix:"",multiSort:!1},b.jgrid.defaults,d||{}),a=this,c={headers:[],cols:[],footers:[],dragStart:function(c,d,g){this.resizing={idx:c,startX:d.clientX,sOL:g[0]};this.hDiv.style.cursor="col-resize";this.curGbox=b("#rs_m"+b.jgrid.jqID(e.id),"#gbox_"+b.jgrid.jqID(e.id));this.curGbox.css({display:"block",left:g[0],top:g[1],height:g[2]});b(a).triggerHandler("jqGridResizeStart",[d,c]);b.isFunction(e.resizeStart)&&e.resizeStart.call(a,d,c);document.onselectstart=function(){return !1}},dragMove:function(a){if(this.resizing){var b=a.clientX-this.resizing.startX,a=this.headers[this.resizing.idx],c="ltr"===e.direction?a.width+b:a.width-b,d;33<c&&(this.curGbox.css({left:this.resizing.sOL+b}),!0===e.forceFit?(d=this.headers[this.resizing.idx+e.nv],b="ltr"===e.direction?d.width-b:d.width+b,33<b&&(a.newWidth=c,d.newWidth=b)):(this.newWidth="ltr"===e.direction?e.tblwidth+b:e.tblwidth-b,a.newWidth=c))}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var c=this.resizing.idx,d=this.headers[c].newWidth||this.headers[c].width,d=parseInt(d,10);this.resizing=!1;b("#rs_m"+b.jgrid.jqID(e.id)).css("display","none");e.colModel[c].width=d;this.headers[c].width=d;this.headers[c].el.style.width=d+"px";this.cols[c].style.width=d+"px";0<this.footers.length&&(this.footers[c].style.width=d+"px");!0===e.forceFit?(d=this.headers[c+e.nv].newWidth||this.headers[c+e.nv].width,this.headers[c+e.nv].width=d,this.headers[c+e.nv].el.style.width=d+"px",this.cols[c+e.nv].style.width=d+"px",0<this.footers.length&&(this.footers[c+e.nv].style.width=d+"px"),e.colModel[c+e.nv].width=d):(e.tblwidth=this.newWidth||e.tblwidth,b("table:first",this.bDiv).css("width",e.tblwidth+"px"),b("table:first",this.hDiv).css("width",e.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,e.footerrow&&(b("table:first",this.sDiv).css("width",e.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));b(a).triggerHandler("jqGridResizeStop",[d,c]);b.isFunction(e.resizeStop)&&e.resizeStop.call(a,d,c)}this.curGbox=null;document.onselectstart=function(){return !0}},populateVisible:function(){c.timer&&clearTimeout(c.timer);c.timer=null;var a=b(c.bDiv).height();if(a){var d=b("table:first",c.bDiv),g,f;if(d[0].rows.length){try{f=(g=d[0].rows[1])?b(g).outerHeight()||c.prevRowHeight:c.prevRowHeight}catch(ua){f=c.prevRowHeight}}if(f){c.prevRowHeight=f;var h=e.rowNum;g=c.scrollTop=c.bDiv.scrollTop;var i=Math.round(d.position().top)-g,k=i+d.height();f*=h;var z,F,y;if(k<a&&0>=i&&(void 0===e.lastpage||parseInt((k+g+f-1)/f,10)<=e.lastpage)){F=parseInt((a-k+f-1)/f,10),0<=k||2>F||!0===e.scroll?(z=Math.round((k+g)/f)+1,i=-1):i=1}0<i&&(z=parseInt(g/f,10)+1,F=parseInt((g+a)/f,10)+2-z,y=!0);if(F&&(!e.lastpage||!(z>e.lastpage||1===e.lastpage||z===e.page&&z===e.lastpage))){c.hDiv.loading?c.timer=setTimeout(c.populateVisible,e.scrollTimeout):(e.page=z,y&&(c.selectionPreserver(d[0]),c.emptyRows.call(d[0],!1,!1)),c.populate(F))}}}},scrollGrid:function(a){if(e.scroll){var b=c.bDiv.scrollTop;void 0===c.scrollTop&&(c.scrollTop=0);b!==c.scrollTop&&(c.scrollTop=b,c.timer&&clearTimeout(c.timer),c.timer=setTimeout(c.populateVisible,e.scrollTimeout))}c.hDiv.scrollLeft=c.bDiv.scrollLeft;e.footerrow&&(c.sDiv.scrollLeft=c.bDiv.scrollLeft);a&&a.stopPropagation()},selectionPreserver:function(a){var c=a.p,d=c.selrow,e=c.selarrrow?b.makeArray(c.selarrrow):null,g=a.grid.bDiv.scrollLeft,f=function(){var h;c.selrow=null;c.selarrrow=[];if(c.multiselect&&e&&0<e.length){for(h=0;h<e.length;h++){e[h]!==d&&b(a).jqGrid("setSelection",e[h],!1,null)}}d&&b(a).jqGrid("setSelection",d,!1,null);a.grid.bDiv.scrollLeft=g;b(a).unbind(".selectionPreserver",f)};b(a).bind("jqGridGridComplete.selectionPreserver",f)}};if("TABLE"!==this.tagName.toUpperCase()){alert("Element is not a table")}else{if(void 0!==document.documentMode&&5>=document.documentMode){alert("Grid can not be used in this ('quirks') mode!")}else{b(this).empty().attr("tabindex","0");this.p=e;this.p.useProp=!!b.fn.prop;var g,f;if(0===this.p.colNames.length){for(g=0;g<this.p.colModel.length;g++){this.p.colNames[g]=this.p.colModel[g].label||this.p.colModel[g].name}}if(this.p.colNames.length!==this.p.colModel.length){alert(b.jgrid.errors.model)}else{var i=b("<div class='ui-jqgrid-view'></div>"),k=b.jgrid.msie;a.p.direction=b.trim(a.p.direction.toLowerCase());-1===b.inArray(a.p.direction,["ltr","rtl"])&&(a.p.direction="ltr");f=a.p.direction;b(i).insertBefore(this);b(this).removeClass("scroll").appendTo(i);var l=b("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");b(l).attr({id:"gbox_"+this.id,dir:f}).insertBefore(i);b(i).attr("id","gview_"+this.id).appendTo(l);b("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").insertBefore(i);b("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(i);b(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var o=function(a,b){a=parseInt(a,10);return isNaN(a)?b||0:a},n=function(d,e,g,f,h,i){var R=a.p.colModel[d],k=R.align,z='style="',F=R.classes,y=R.name,G=[];k&&(z=z+("text-align:"+k+";"));R.hidden===true&&(z=z+"display:none;");if(e===0){z=z+("width: "+c.headers[d].width+"px;")}else{if(R.cellattr&&b.isFunction(R.cellattr)){if((d=R.cellattr.call(a,h,g,f,R,i))&&typeof d==="string"){d=d.replace(/style/i,"style").replace(/title/i,"title");if(d.indexOf("title")>-1){R.title=false}d.indexOf("class")>-1&&(F=void 0);G=d.split(/[^-]style/);if(G.length===2){G[1]=b.trim(G[1].replace("=",""));if(G[1].indexOf("'")===0||G[1].indexOf('"')===0){G[1]=G[1].substring(1)}z=z+G[1].replace(/'/gi,'"')}else{z=z+'"'}}}}if(!G.length){G[0]="";z=z+'"'}z=z+((F!==void 0?' class="'+F+'"':"")+(R.title&&g?' title="'+b.jgrid.stripHtml(g)+'"':""));z=z+(' aria-describedby="'+a.p.id+"_"+y+'"');return z+G[0]},m=function(c){return c==null||c===""?"&#160;":a.p.autoencode?b.jgrid.htmlEncode(c):""+c},t=function(c,d,e,g,f){var h=a.p.colModel[e];if(h.formatter!==void 0){c=""+a.p.idPrefix!==""?b.jgrid.stripPref(a.p.idPrefix,c):c;c={rowId:c,colModel:h,gid:a.p.id,pos:e};d=b.isFunction(h.formatter)?h.formatter.call(a,d,c,g,f):b.fmatter?b.fn.fmatter.call(a,h.formatter,d,c,g,f):m(d)}else{d=m(d)}return d},A=function(a,b,c,d,e,g){b=t(a,b,c,e,"add");return'<td role="gridcell" '+n(c,d,b,e,a,g)+">"+b+"</td>"},T=function(b,c,d,e){e='<input role="checkbox" type="checkbox" id="jqg_'+a.p.id+"_"+b+'" class="cbox" name="jqg_'+a.p.id+"_"+b+'"'+(e?'checked="checked"':"")+"/>";return'<td role="gridcell" '+n(c,d,"",null,b,true)+">"+e+"</td>"},M=function(a,b,c,d){c=(parseInt(c,10)-1)*parseInt(d,10)+1+b;return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+n(a,b,c,null,b,true)+">"+c+"</td>"},$=function(b){var c,d=[],e=0,g;for(g=0;g<a.p.colModel.length;g++){c=a.p.colModel[g];if(c.name!=="cb"&&c.name!=="subgrid"&&c.name!=="rn"){d[e]=b==="local"?c.name:b==="xml"||b==="xmlstring"?c.xmlmap||c.name:c.jsonmap||c.name;e++}}return d},U=function(c){var d=a.p.remapColumns;if(!d||!d.length){d=b.map(a.p.colModel,function(a,b){return b})}c&&(d=b.map(d,function(a){return a<c?null:a-c}));return d},V=function(a,c){var d;if(this.p.deepempty){b(this.rows).slice(1).remove()}else{d=this.rows.length>0?this.rows[0]:null;b(this.firstChild).empty().append(d)}if(a&&this.p.scroll){b(this.grid.bDiv.firstChild).css({height:"auto"});b(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"});if(this.grid.bDiv.scrollTop!==0){this.grid.bDiv.scrollTop=0}}if(c===true&&this.p.treeGrid){this.p.data=[];this.p._index={}}},N=function(){var c=a.p.data.length,d,e,g;d=a.p.rownumbers===true?1:0;e=a.p.multiselect===true?1:0;g=a.p.subGrid===true?1:0;d=a.p.keyIndex===false||a.p.loadonce===true?a.p.localReader.id:a.p.colModel[a.p.keyIndex+e+g+d].name;for(e=0;e<c;e++){g=b.jgrid.getAccessor(a.p.data[e],d);g===void 0&&(g=""+(e+1));a.p._index[g]=e}},X=function(c,d,e,g,f,h){var j="-1",i="",k,d=d?"display:none;":"",e="ui-widget-content jqgrow ui-row-"+a.p.direction+(e?" "+e:"")+(h?" ui-state-highlight":""),h=b(a).triggerHandler("jqGridRowAttr",[g,f,c]);typeof h!=="object"&&(h=b.isFunction(a.p.rowattr)?a.p.rowattr.call(a,g,f,c):{});if(!b.isEmptyObject(h)){if(h.hasOwnProperty("id")){c=h.id;delete h.id}if(h.hasOwnProperty("tabindex")){j=h.tabindex;delete h.tabindex}if(h.hasOwnProperty("style")){d=d+h.style;delete h.style}if(h.hasOwnProperty("class")){e=e+(" "+h["class"]);delete h["class"]}try{delete h.role}catch(F){}for(k in h){h.hasOwnProperty(k)&&(i=i+(" "+k+"="+h[k]))}}return'<tr role="row" id="'+c+'" tabindex="'+j+'" class="'+e+'"'+(d===""?"":' style="'+d+'"')+i+">"},J=function(c,d,e,g,f){var h=new Date,j=a.p.datatype!=="local"&&a.p.loadonce||a.p.datatype==="xmlstring",i=a.p.xmlReader,k=a.p.datatype==="local"?"local":"xml";if(j){a.p.data=[];a.p._index={};a.p.localReader.id="_id_"}a.p.reccount=0;if(b.isXMLDoc(c)){if(a.p.treeANode===-1&&!a.p.scroll){V.call(a,false,true);e=1}else{e=e>1?e:1}var F=b(a),y,G,l=0,o,s=a.p.multiselect===true?1:0,u=0,n,m=a.p.rownumbers===true?1:0,t,p=[],E,q={},x,D,r=[],K=a.p.altRows===true?a.p.altclass:"",v;if(a.p.subGrid===true){u=1;n=b.jgrid.getMethod("addSubGridCell")}i.repeatitems||(p=$(k));t=a.p.keyIndex===false?b.isFunction(i.id)?i.id.call(a,c):i.id:a.p.keyIndex;if(p.length>0&&!isNaN(t)){a.p.remapColumns&&a.p.remapColumns.length&&(t=b.inArray(t,a.p.remapColumns));t=p[t]}k=(""+t).indexOf("[")===-1?p.length?function(a,c){return b(t,a).text()||c}:function(a,c){return b(i.cell,a).eq(t).text()||c}:function(a,b){return a.getAttribute(t.replace(/[\[\]]/g,""))||b};a.p.userData={};a.p.page=b.jgrid.getXmlData(c,i.page)||a.p.page||0;a.p.lastpage=b.jgrid.getXmlData(c,i.total);if(a.p.lastpage===void 0){a.p.lastpage=1}a.p.records=b.jgrid.getXmlData(c,i.records)||0;b.isFunction(i.userdata)?a.p.userData=i.userdata.call(a,c)||{}:b.jgrid.getXmlData(c,i.userdata,true).each(function(){a.p.userData[this.getAttribute("name")]=b(this).text()});c=b.jgrid.getXmlData(c,i.root,true);(c=b.jgrid.getXmlData(c,i.row,true))||(c=[]);var w=c.length,L=0,B=[],C=parseInt(a.p.rowNum,10),H=a.p.scroll?b.jgrid.randId():1;if(w>0&&a.p.page<=0){a.p.page=1}if(c&&w){f&&(C=C*(f+1));var f=b.isFunction(a.p.afterInsertRow),J=false,I;if(a.p.grouping){J=a.p.groupingView.groupCollapse===true;I=b.jgrid.getMethod("groupingPrepare")}for(;L<w;){x=c[L];D=k(x,H+L);D=a.p.idPrefix+D;y=e===0?0:e+1;v=(y+L)%2===1?K:"";var O=r.length;r.push("");m&&r.push(M(0,L,a.p.page,a.p.rowNum));s&&r.push(T(D,m,L,false));u&&r.push(n.call(F,s+m,L+e));if(i.repeatitems){E||(E=U(s+u+m));var N=b.jgrid.getXmlData(x,i.cell,true);b.each(E,function(b){var c=N[this];if(!c){return false}o=c.textContent||c.text;q[a.p.colModel[b+s+u+m].name]=o;r.push(A(D,o,b+s+u+m,L+e,x,q))})}else{for(y=0;y<p.length;y++){o=b.jgrid.getXmlData(x,p[y]);q[a.p.colModel[y+s+u+m].name]=o;r.push(A(D,o,y+s+u+m,L+e,x,q))}}r[O]=X(D,J,v,q,x,false);r.push("</tr>");if(a.p.grouping){B=I.call(F,r,B,q,L);r=[]}if(j||a.p.treeGrid===true){q._id_=b.jgrid.stripPref(a.p.idPrefix,D);a.p.data.push(q);a.p._index[q._id_]=a.p.data.length-1}if(a.p.gridview===false){b("tbody:first",d).append(r.join(""));F.triggerHandler("jqGridAfterInsertRow",[D,q,x]);f&&a.p.afterInsertRow.call(a,D,q,x);r=[]}q={};l++;L++;if(l===C){break}}}if(a.p.gridview===true){G=a.p.treeANode>-1?a.p.treeANode:0;if(a.p.grouping){F.jqGrid("groupingRender",B,a.p.colModel.length);B=null}else{a.p.treeGrid===true&&G>0?b(a.rows[G]).after(r.join("")):b("tbody:first",d).append(r.join(""))}}if(a.p.subGrid===true){try{F.jqGrid("addSubGrid",s+m)}catch(Q){}}a.p.totaltime=new Date-h;if(l>0&&a.p.records===0){a.p.records=w}r=null;if(a.p.treeGrid===true){try{F.jqGrid("setTreeNode",G+1,l+G+1)}catch(S){}}if(!a.p.treeGrid&&!a.p.scroll){a.grid.bDiv.scrollTop=0}a.p.reccount=l;a.p.treeANode=-1;a.p.userDataOnFooter&&F.jqGrid("footerData","set",a.p.userData,true);if(j){a.p.records=w;a.p.lastpage=Math.ceil(w/C)}g||a.updatepager(false,true);if(j){for(;l<w;){x=c[l];D=k(x,l+H);D=a.p.idPrefix+D;if(i.repeatitems){E||(E=U(s+u+m));var P=b.jgrid.getXmlData(x,i.cell,true);b.each(E,function(b){var c=P[this];if(!c){return false}o=c.textContent||c.text;q[a.p.colModel[b+s+u+m].name]=o})}else{for(y=0;y<p.length;y++){o=b.jgrid.getXmlData(x,p[y]);q[a.p.colModel[y+s+u+m].name]=o}}q._id_=b.jgrid.stripPref(a.p.idPrefix,D);a.p.data.push(q);a.p._index[q._id_]=a.p.data.length-1;q={};l++}}}},S=function(c,d,e,g,f){var h=new Date;if(c){if(a.p.treeANode===-1&&!a.p.scroll){V.call(a,false,true);e=1}else{e=e>1?e:1}var i,j=a.p.datatype!=="local"&&a.p.loadonce||a.p.datatype==="jsonstring";if(j){a.p.data=[];a.p._index={};a.p.localReader.id="_id_"}a.p.reccount=0;if(a.p.datatype==="local"){d=a.p.localReader;i="local"}else{d=a.p.jsonReader;i="json"}var k=b(a),l=0,y,o,n,m=[],s=a.p.multiselect?1:0,u=a.p.subGrid===true?1:0,t,p=a.p.rownumbers===true?1:0,w=U(s+u+p);i=$(i);var v,E,q,x={},D,r,K=[],B=a.p.altRows===true?a.p.altclass:"",C;a.p.page=b.jgrid.getAccessor(c,d.page)||a.p.page||0;E=b.jgrid.getAccessor(c,d.total);u&&(t=b.jgrid.getMethod("addSubGridCell"));a.p.lastpage=E===void 0?1:E;a.p.records=b.jgrid.getAccessor(c,d.records)||0;a.p.userData=b.jgrid.getAccessor(c,d.userdata)||{};q=a.p.keyIndex===false?b.isFunction(d.id)?d.id.call(a,c):d.id:a.p.keyIndex;if(!d.repeatitems){m=i;if(m.length>0&&!isNaN(q)){a.p.remapColumns&&a.p.remapColumns.length&&(q=b.inArray(q,a.p.remapColumns));q=m[q]}}E=b.jgrid.getAccessor(c,d.root);E==null&&b.isArray(c)&&(E=c);E||(E=[]);c=E.length;o=0;if(c>0&&a.p.page<=0){a.p.page=1}var L=parseInt(a.p.rowNum,10),H=a.p.scroll?b.jgrid.randId():1,J=false,I;f&&(L=L*(f+1));a.p.datatype==="local"&&!a.p.deselectAfterSort&&(J=true);var O=b.isFunction(a.p.afterInsertRow),N=[],P=false,Q;if(a.p.grouping){P=a.p.groupingView.groupCollapse===true;Q=b.jgrid.getMethod("groupingPrepare")}for(;o<c;){f=E[o];r=b.jgrid.getAccessor(f,q);if(r===void 0){typeof q==="number"&&a.p.colModel[q+s+u+p]!=null&&(r=b.jgrid.getAccessor(f,a.p.colModel[q+s+u+p].name));if(r===void 0){r=H+o;if(m.length===0&&d.cell){y=b.jgrid.getAccessor(f,d.cell)||f;r=y!=null&&y[q]!==void 0?y[q]:r}}}r=a.p.idPrefix+r;y=e===1?0:e;C=(y+o)%2===1?B:"";J&&(I=a.p.multiselect?b.inArray(r,a.p.selarrrow)!==-1:r===a.p.selrow);var S=K.length;K.push("");p&&K.push(M(0,o,a.p.page,a.p.rowNum));s&&K.push(T(r,p,o,I));u&&K.push(t.call(k,s+p,o+e));v=i;if(d.repeatitems){d.cell&&(f=b.jgrid.getAccessor(f,d.cell)||f);b.isArray(f)&&(v=w)}for(n=0;n<v.length;n++){y=b.jgrid.getAccessor(f,v[n]);x[a.p.colModel[n+s+u+p].name]=y;K.push(A(r,y,n+s+u+p,o+e,f,x))}K[S]=X(r,P,C,x,f,I);K.push("</tr>");if(a.p.grouping){N=Q.call(k,K,N,x,o);K=[]}if(j||a.p.treeGrid===true){x._id_=b.jgrid.stripPref(a.p.idPrefix,r);a.p.data.push(x);a.p._index[x._id_]=a.p.data.length-1}if(a.p.gridview===false){b("#"+b.jgrid.jqID(a.p.id)+" tbody:first").append(K.join(""));k.triggerHandler("jqGridAfterInsertRow",[r,x,f]);O&&a.p.afterInsertRow.call(a,r,x,f);K=[]}x={};l++;o++;if(l===L){break}}if(a.p.gridview===true){D=a.p.treeANode>-1?a.p.treeANode:0;a.p.grouping?k.jqGrid("groupingRender",N,a.p.colModel.length):a.p.treeGrid===true&&D>0?b(a.rows[D]).after(K.join("")):b("#"+b.jgrid.jqID(a.p.id)+" tbody:first").append(K.join(""))}if(a.p.subGrid===true){try{k.jqGrid("addSubGrid",s+p)}catch(aa){}}a.p.totaltime=new Date-h;if(l>0&&a.p.records===0){a.p.records=c}if(a.p.treeGrid===true){try{k.jqGrid("setTreeNode",D+1,l+D+1)}catch(W){}}if(!a.p.treeGrid&&!a.p.scroll){a.grid.bDiv.scrollTop=0}a.p.reccount=l;a.p.treeANode=-1;a.p.userDataOnFooter&&k.jqGrid("footerData","set",a.p.userData,true);if(j){a.p.records=c;a.p.lastpage=Math.ceil(c/L)}g||a.updatepager(false,true);if(j){for(;l<c&&E[l];){f=E[l];r=b.jgrid.getAccessor(f,q);if(r===void 0){typeof q==="number"&&a.p.colModel[q+s+u+p]!=null&&(r=b.jgrid.getAccessor(f,a.p.colModel[q+s+u+p].name));if(r===void 0){r=H+l;if(m.length===0&&d.cell){e=b.jgrid.getAccessor(f,d.cell)||f;r=e!=null&&e[q]!==void 0?e[q]:r}}}if(f){r=a.p.idPrefix+r;v=i;if(d.repeatitems){d.cell&&(f=b.jgrid.getAccessor(f,d.cell)||f);b.isArray(f)&&(v=w)}for(n=0;n<v.length;n++){x[a.p.colModel[n+s+u+p].name]=b.jgrid.getAccessor(f,v[n])}x._id_=b.jgrid.stripPref(a.p.idPrefix,r);a.p.data.push(x);a.p._index[x._id_]=a.p.data.length-1;x={}}l++}}}},ja=function(){function c(a){var b=0,d,e,g,h,i;if(a.groups!=null){(e=a.groups.length&&a.groupOp.toString().toUpperCase()==="OR")&&s.orBegin();for(d=0;d<a.groups.length;d++){b>0&&e&&s.or();try{c(a.groups[d])}catch(j){alert(j)}b++}e&&s.orEnd()}if(a.rules!=null){try{(g=a.rules.length&&a.groupOp.toString().toUpperCase()==="OR")&&s.orBegin();for(d=0;d<a.rules.length;d++){i=a.rules[d];h=a.groupOp.toString().toUpperCase();if(p[i.op]&&i.field){b>0&&h&&h==="OR"&&(s=s.or());s=p[i.op](s,h)(i.field,i.data,f[i.field])}b++}g&&s.orEnd()}catch(qa){alert(qa)}}}var d=a.p.multiSort?[]:"",e=[],g=false,f={},h=[],i=[],j,k,l;if(b.isArray(a.p.data)){var o=a.p.grouping?a.p.groupingView:false,n,m;b.each(a.p.colModel,function(){k=this.sorttype||"text";if(k==="date"||k==="datetime"){if(this.formatter&&typeof this.formatter==="string"&&this.formatter==="date"){j=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:b.jgrid.formatter.date.srcformat;l=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:b.jgrid.formatter.date.newformat}else{j=l=this.datefmt||"Y-m-d"}f[this.name]={stype:k,srcfmt:j,newfmt:l}}else{f[this.name]={stype:k,srcfmt:"",newfmt:""}}if(a.p.grouping){m=0;for(n=o.groupField.length; m<n; m++){if(this.name===o.groupField[m]){var c=this.name;if(this.register){c=this.register}h[m]=f[c];i[m]=c}}}if(a.p.multiSort){if(this.lso){d.push(this.name);c=this.lso.split("-");e.push(c[c.length-1])}}else{if(!g&&(this.register===a.p.sortname||this.name===a.p.sortname)){d=this.name;g=true}}});if(a.p.treeGrid){b(a).jqGrid("SortTree",d,a.p.sortorder,f[d].stype,f[d].srcfmt)}else{var p={eq:function(a){return a.equals},ne:function(a){return a.notEquals},lt:function(a){return a.less},le:function(a){return a.lessOrEquals},gt:function(a){return a.greater},ge:function(a){return a.greaterOrEquals},cn:function(a){return a.contains},nc:function(a, b){return b==="OR"?a.orNot().contains:a.andNot().contains},bw:function(a){return a.startsWith},bn:function(a,b){return b==="OR"?a.orNot().startsWith:a.andNot().startsWith},en:function(a,b){return b==="OR"?a.orNot().endsWith:a.andNot().endsWith},ew:function(a){return a.endsWith},ni:function(a,b){return b==="OR"?a.orNot().equals:a.andNot().equals},"in":function(a){return a.equals},nu:function(a){return a.isNull},nn:function(a,b){return b==="OR"?a.orNot().isNull:a.andNot().isNull}},s=b.jgrid.from(a.p.data);a.p.ignoreCase&&(s=s.ignoreCase());if(a.p.search===true){var u=a.p.postData.filters;if(u){typeof u==="string"&&(u=b.jgrid.parse(u));c(u)}else{try{s=p[a.p.postData.searchOper](s)(a.p.postData.searchField,a.p.postData.searchString,f[a.p.postData.searchField])}catch(t){}}}if(a.p.grouping){for(m=0;m<n;m++){s.orderBy(i[m],o.groupOrder[m],h[m].stype,h[m].srcfmt)}}a.p.multiSort?b.each(d,function(a){s.orderBy(this,e[a],f[this].stype,f[this].srcfmt)}):d&&a.p.sortorder&&g&&(a.p.sortorder.toUpperCase()==="DESC"?s.orderBy(a.p.sortname,"d",f[d].stype,f[d].srcfmt):s.orderBy(a.p.sortname,"a",f[d].stype,f[d].srcfmt));var u=s.select(),v=parseInt(a.p.rowNum,10),w=u.length,A=parseInt(a.p.page,10),B=Math.ceil(w/v),q={},u=u.slice((A-1)*v,A*v),f=s=null;q[a.p.localReader.total]=B;q[a.p.localReader.page]=A;q[a.p.localReader.records]=w;q[a.p.localReader.root]=u;q[a.p.localReader.userdata]=a.p.userData;u=null;return q}}},aa=function(){a.grid.hDiv.loading=true;if(!a.p.hiddengrid){switch(a.p.loadui){case"enable":b("#load_"+b.jgrid.jqID(a.p.id)).show();break;case"block":b("#lui_"+b.jgrid.jqID(a.p.id)).show();b("#load_"+b.jgrid.jqID(a.p.id)).show()}}},P=function(){a.grid.hDiv.loading=false;switch(a.p.loadui){case"enable":b("#load_"+b.jgrid.jqID(a.p.id)).hide();break;case"block":b("#lui_"+b.jgrid.jqID(a.p.id)).hide();b("#load_"+b.jgrid.jqID(a.p.id)).hide()}},O=function(c){if(!a.grid.hDiv.loading){var d=a.p.scroll&&c===false,e={},g,f=a.p.prmNames;if(a.p.page<=0){a.p.page=1}if(f.search!==null){e[f.search]=a.p.search}f.nd!==null&&(e[f.nd]=(new Date).getTime());if(f.rows!==null){e[f.rows]=a.p.rowNum}if(f.page!==null){e[f.page]=a.p.page}if(f.sort!==null){e[f.sort]=a.p.sortname}if(f.order!==null){e[f.order]=a.p.sortorder}if(a.p.rowTotal!==null&&f.totalrows!==null){e[f.totalrows]=a.p.rowTotal}var h=b.isFunction(a.p.loadComplete),i=h?a.p.loadComplete:null,j=0,c=c||1;if(c>1){if(f.npage!==null){e[f.npage]=c;j=c-1;c=1}else{i=function(b){a.p.page++;a.grid.hDiv.loading=false;h&&a.p.loadComplete.call(a,b);O(c-1)}}}else{f.npage!==null&&delete a.p.postData[f.npage]}if(a.p.grouping){b(a).jqGrid("groupingSetup");var k=a.p.groupingView,l,o="";for(l=0; l<k.groupField.length; l++){var m=k.groupField[l];b.each(a.p.colModel,function(a, b){if(b.name===m&&b.register){m=b.register}});o=o+(m+" "+k.groupOrder[l]+", ")}e[f.sort]=o+e[f.sort]}b.extend(a.p.postData,e);var n=!a.p.scroll?1:a.rows.length-1,e=b(a).triggerHandler("jqGridBeforeRequest");if(!(e===false||e==="stop")){if(b.isFunction(a.p.datatype)){a.p.datatype.call(a,a.p.postData,"load_"+a.p.id)}else{if(b.isFunction(a.p.beforeRequest)){e=a.p.beforeRequest.call(a);e===void 0&&(e=true);if(e===false){return}}g=a.p.datatype.toLowerCase();switch(g){case"json":case"jsonp":case"xml":case"script":b.ajax(b.extend({url:a.p.url,type:a.p.mtype,dataType:g,data:b.isFunction(a.p.serializeGridData)?a.p.serializeGridData.call(a,a.p.postData):a.p.postData,success:function(e,f,h){if(b.isFunction(a.p.beforeProcessing)&&a.p.beforeProcessing.call(a,e,f,h)===false){P()}else{g==="xml"?J(e,a.grid.bDiv,n,c>1,j):S(e,a.grid.bDiv,n,c>1,j);b(a).triggerHandler("jqGridLoadComplete",[e]);i&&i.call(a,e);b(a).triggerHandler("jqGridAfterLoadComplete",[e]);d&&a.grid.populateVisible();if(a.p.loadonce||a.p.treeGrid){a.p.datatype="local"}c===1&&P()}},error:function(d,e,f){b.isFunction(a.p.loadError)&&a.p.loadError.call(a,d,e,f);c===1&&P()},beforeSend:function(c,d){var e=true;b.isFunction(a.p.loadBeforeSend)&&(e=a.p.loadBeforeSend.call(a,c,d));e===void 0&&(e=true);if(e===false){return false}aa()}},b.jgrid.ajaxOptions,a.p.ajaxGridOptions));break;case"xmlstring":aa();e=typeof a.p.datastr!=="string"?a.p.datastr:b.parseXML(a.p.datastr);J(e,a.grid.bDiv);b(a).triggerHandler("jqGridLoadComplete",[e]);h&&a.p.loadComplete.call(a,e);b(a).triggerHandler("jqGridAfterLoadComplete",[e]);a.p.datatype="local";a.p.datastr=null;P();break;case"jsonstring":aa();e=typeof a.p.datastr==="string"?b.jgrid.parse(a.p.datastr):a.p.datastr;S(e,a.grid.bDiv);b(a).triggerHandler("jqGridLoadComplete",[e]);h&&a.p.loadComplete.call(a,e);b(a).triggerHandler("jqGridAfterLoadComplete",[e]);a.p.datatype="local";a.p.datastr=null;P();break;case"local":case"clientside":aa();a.p.datatype="local";e=ja();S(e,a.grid.bDiv,n,c>1,j);b(a).triggerHandler("jqGridLoadComplete",[e]);i&&i.call(a,e);b(a).triggerHandler("jqGridAfterLoadComplete",[e]);d&&a.grid.populateVisible();P()}}}}},ca=function(c){b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv)[a.p.useProp?"prop":"attr"]("checked",c);if(a.p.frozenColumns&&a.p.id+"_frozen"){b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.fhDiv)[a.p.useProp?"prop":"attr"]("checked",c)}},ka=function(c,d){var e="",g="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",i="",j,k,l,m,n=function(c){var d;b.isFunction(a.p.onPaging)&&(d=a.p.onPaging.call(a,c));a.p.selrow=null;if(a.p.multiselect){a.p.selarrrow=[];ca(false)}a.p.savedRow=[];return d==="stop"?false:true},c=c.substr(1),d=d+("_"+c);j="pg_"+c;k=c+"_left";l=c+"_center";m=c+"_right";b("#"+b.jgrid.jqID(c)).append("<div id='"+j+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+k+"' align='left'></td><td id='"+l+"' align='center' style='white-space:pre;'></td><td id='"+m+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(a.p.rowList.length>0){i="<td dir='"+f+"'>";i=i+"<select class='ui-pg-selbox' role='listbox'>";for(k=0;k<a.p.rowList.length;k++){i=i+('<option role="option" value="'+a.p.rowList[k]+'"'+(a.p.rowNum===a.p.rowList[k]?' selected="selected"':"")+">"+a.p.rowList[k]+"</option>")}i=i+"</select></td>"}f==="rtl"&&(g=g+i);a.p.pginput===true&&(e="<td dir='"+f+"'>"+b.jgrid.format(a.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+b.jgrid.jqID(c)+"'></span>")+"</td>");if(a.p.pgbuttons===true){k=["first"+d,"prev"+d,"next"+d,"last"+d];f==="rtl"&&k.reverse();g=g+("<td id='"+k[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon fa fa-angle-double-left'></span></td>");g=g+("<td id='"+k[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon fa fa-angle-left'></span></td>");g=g+(e!==""?"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"+e+"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>":"")+("<td id='"+k[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon fa fa-angle-right'></span></td>");g=g+("<td id='"+k[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon fa fa-angle-double-right'></span></td>")}else{e!==""&&(g=g+e)}f==="ltr"&&(g=g+i);g=g+"</tr></tbody></table>";a.p.viewrecords===true&&b("td#"+c+"_"+a.p.recordpos,"#"+j).append("<div dir='"+f+"' style='text-align:"+a.p.recordpos+"' class='ui-paging-info'></div>");b("td#"+c+"_"+a.p.pagerpos,"#"+j).append(g);i=b(".ui-jqgrid").css("font-size")||"11px";b(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+i+";visibility:hidden;' ></div>");g=b(g).clone().appendTo("#testpg").width();b("#testpg").remove();if(g>0){e!==""&&(g=g+50);b("td#"+c+"_"+a.p.pagerpos,"#"+j).width(g)}a.p._nvtd=[];a.p._nvtd[0]=g?Math.floor((a.p.width-g)/2):Math.floor(a.p.width/3);a.p._nvtd[1]=0;g=null;b(".ui-pg-selbox","#"+j).bind("change",function(){if(!n("records")){return false}a.p.page=Math.round(a.p.rowNum*(a.p.page-1)/this.value-0.5)+1;a.p.rowNum=this.value;a.p.pager&&b(".ui-pg-selbox",a.p.pager).val(this.value);a.p.toppager&&b(".ui-pg-selbox",a.p.toppager).val(this.value);O();return false});if(a.p.pgbuttons===true){b(".ui-pg-button","#"+j).hover(function(){if(b(this).hasClass("ui-state-disabled")){this.style.cursor="default"}else{b(this).addClass("ui-state-hover");this.style.cursor="pointer"}},function(){if(!b(this).hasClass("ui-state-disabled")){b(this).removeClass("ui-state-hover");this.style.cursor="default"}});b("#first"+b.jgrid.jqID(d)+", #prev"+b.jgrid.jqID(d)+", #next"+b.jgrid.jqID(d)+", #last"+b.jgrid.jqID(d)).click(function(){var b=o(a.p.page,1),c=o(a.p.lastpage,1),e=false,g=true,f=true,h=true,i=true;if(c===0||c===1){i=h=f=g=false}else{if(c>1&&b>=1){if(b===1){f=g=false}else{if(b===c){i=h=false}}}else{if(c>1&&b===0){i=h=false;b=c-1}}}if(!n(this.id)){return false}if(this.id==="first"+d&&g){a.p.page=1;e=true}if(this.id==="prev"+d&&f){a.p.page=b-1;e=true}if(this.id==="next"+d&&h){a.p.page=b+1;e=true}if(this.id==="last"+d&&i){a.p.page=c;e=true}e&&O();return false})}a.p.pginput===true&&b("input.ui-pg-input","#"+j).keypress(function(c){if((c.charCode||c.keyCode||0)===13){if(!n("user")){return false}b(this).val(o(b(this).val(),a.p.page));a.p.page=b(this).val()>a.p.lastpage?a.p.lastpage:b(this).val()>0?b(this).val():1;O();return false}return this})},ra=function(c,d){var e,g="",f=a.p.colModel,h=false,i;i=a.p.frozenColumns?d:a.grid.headers[c].el;var j="";b("span.ui-grid-ico-sort",i).addClass("ui-state-disabled");b(i).attr("aria-selected","false");if(f[c].lso){if(f[c].lso==="asc"){f[c].lso=f[c].lso+"-desc";j="desc"}else{if(f[c].lso==="desc"){f[c].lso=f[c].lso+"-asc";j="asc"}else{if(f[c].lso==="asc-desc"||f[c].lso==="desc-asc"){f[c].lso=""}}}}else{f[c].lso=j=f.firstsortorder||"asc"}if(j){b("span.s-ico",i).show();b("span.ui-icon-"+j,i).removeClass("ui-state-disabled");b(i).attr("aria-selected","true")}else{a.p.viewsortcols[0]||b("span.s-ico",i).hide()}a.p.sortorder="";b.each(f,function(b){if(this.lso){b>0&&h&&(g=g+", ");e=this.lso.split("-");g=g+(f[b].register||f[b].name);g=g+(" "+e[e.length-1]);h=true;a.p.sortorder=e[e.length-1]}});i=g.lastIndexOf(a.p.sortorder);g=g.substring(0,i);a.p.sortname=g},la=function(c, d, e, g, f){if(a.p.colModel[d].sortable){var h;if(!(a.p.savedRow.length>0)){if(!e){if(a.p.lastsort===d){if(a.p.sortorder==="asc"){a.p.sortorder="desc"}else{if(a.p.sortorder==="desc"){a.p.sortorder="asc"}}}else{a.p.sortorder=a.p.colModel[d].firstsortorder||"asc"}a.p.page=1}if(a.p.multiSort){ra(d,f)}else{if(g){if(a.p.lastsort===d&&a.p.sortorder===g&&!e){return}a.p.sortorder=g}e=a.grid.headers[a.p.lastsort].el;f=a.p.frozenColumns?f:a.grid.headers[d].el;b("span.ui-grid-ico-sort",e).addClass("ui-state-disabled");b(e).attr("aria-selected","false");if(a.p.frozenColumns){a.grid.fhDiv.find("span.ui-grid-ico-sort").addClass("ui-state-disabled");a.grid.fhDiv.find("th").attr("aria-selected","false")}b("span.ui-icon-"+a.p.sortorder,f).removeClass("ui-state-disabled");b(f).attr("aria-selected","true");if(!a.p.viewsortcols[0]&&a.p.lastsort!==d){a.p.frozenColumns&&a.grid.fhDiv.find("span.s-ico").hide();b("span.s-ico",e).hide();b("span.s-ico",f).show()}c=c.substring(5+a.p.id.length+1);a.p.sortname=a.p.colModel[d].register||c;h=a.p.sortorder}if(b(a).triggerHandler("jqGridSortCol",[c,d,h])==="stop"){a.p.lastsort=d}else{if(b.isFunction(a.p.onSortCol)&&a.p.onSortCol.call(a,c,d,h)==="stop"){a.p.lastsort=d}else{if(a.p.datatype==="local"){a.p.deselectAfterSort&&b(a).jqGrid("resetSelection")}else{a.p.selrow=null;a.p.multiselect&&ca(false);a.p.selarrrow=[];a.p.savedRow=[]}if(a.p.scroll){f=a.grid.bDiv.scrollLeft;V.call(a,true,false);a.grid.hDiv.scrollLeft=f}a.p.subGrid&&a.p.datatype==="local"&&b("td.sgexpanded","#"+b.jgrid.jqID(a.p.id)).each(function(){b(this).trigger("click")});O();a.p.lastsort=d;if(a.p.sortname!==c&&d){a.p.lastsort=d}}}}}},sa=function(c){c=b(a.grid.headers[c].el);c=[c.position().left+c.outerWidth()];a.p.direction==="rtl"&&(c[0]=a.p.width-c[0]);c[0]=c[0]-a.grid.bDiv.scrollLeft;c.push(b(a.grid.hDiv).position().top);c.push(b(a.grid.bDiv).offset().top-b(a.grid.hDiv).offset().top+b(a.grid.bDiv).height());return c},ma=function(c){var d,e=a.grid.headers,g=b.jgrid.getCellIndex(c);for(d=0;d<e.length;d++){if(c===e[d].el){g=d;break}}return g};this.p.id=this.id;-1===b.inArray(a.p.multikey,["shiftKey","altKey","ctrlKey"])&&(a.p.multikey=!1);a.p.keyIndex=!1;for(g=0;g<a.p.colModel.length;g++){a.p.colModel[g]=b.extend(!0,{},a.p.cmTemplate,a.p.colModel[g].template||{},a.p.colModel[g]),!1===a.p.keyIndex&&!0===a.p.colModel[g].key&&(a.p.keyIndex=g)}a.p.sortorder=a.p.sortorder.toLowerCase();b.jgrid.cell_width=b.jgrid.cellWidth();!0===a.p.grouping&&(a.p.scroll=!1,a.p.rownumbers=!1,a.p.treeGrid=!1,a.p.gridview=!0);if(!0===this.p.treeGrid){try{b(this).jqGrid("setTreeGrid")}catch(va){}"local"!==a.p.datatype&&(a.p.localReader={id:"_id_"})}if(this.p.subGrid){try{b(a).jqGrid("setSubGrid")}catch(wa){}}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:b.jgrid.cell_width?a.p.multiselectWidth+a.p.cellLayout:a.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:a.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0}));a.p.xmlReader=b.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},a.p.xmlReader);a.p.jsonReader=b.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},a.p.jsonReader);a.p.localReader=b.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},a.p.localReader);a.p.scroll&&(a.p.pgbuttons=!1,a.p.pginput=!1,a.p.rowList=[]);a.p.data.length&&N();var B="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",na,C,da,ea,fa,v,p,W,oa=W="",ba=[],pa=[];C=[];if(!0===a.p.shrinkToFit&&!0===a.p.forceFit){for(g=a.p.colModel.length-1;0<=g;g--){if(!a.p.colModel[g].hidden){a.p.colModel[g].resizable=!1;break}}}"horizontal"===a.p.viewsortcols[1]&&(W=" ui-i-asc",oa=" ui-i-desc");na=k?"class='ui-th-div-ie'":"";W="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+W+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+f+"'></span>"+("<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+oa+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+f+"'></span></span>");if(a.p.multiSort){ba=a.p.sortname.split(",");for(g=0; g<ba.length; g++){C=b.trim(ba[g]).split(" "),ba[g]=b.trim(C[0]),pa[g]=C[1]?b.trim(C[1]):a.p.sortorder||"asc"}}for(g=0; g<this.p.colNames.length; g++){C=a.p.headertitles?' title="'+b.jgrid.stripHtml(a.p.colNames[g])+'"':"",B+="<th id='"+a.p.id+"_"+a.p.colModel[g].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+f+"'"+C+">",C=a.p.colModel[g].register||a.p.colModel[g].name,B+="<div id='jqgh_"+a.p.id+"_"+a.p.colModel[g].name+"' "+na+">"+a.p.colNames[g],a.p.colModel[g].width=a.p.colModel[g].width?parseInt(a.p.colModel[g].width,10):150,"boolean"!==typeof a.p.colModel[g].title&&(a.p.colModel[g].title=!0),a.p.colModel[g].lso="",C===a.p.sortname&&(a.p.lastsort=g),a.p.multiSort&&(C=b.inArray(C,ba),-1!==C&&(a.p.colModel[g].lso=pa[C])),B+=W+"</div></th>"}W=null;b(this).append(B+"</tr></thead>");b("thead tr:first th",this).hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")});if(this.p.multiselect){var ga=[],Y;b("#cb_"+b.jgrid.jqID(a.p.id),this).bind("click",function(){a.p.selarrrow=[];var c=a.p.frozenColumns===true?a.p.id+"_frozen":"";if(this.checked){b(a.rows).each(function(d){if(d>0&&!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("jqgroup")&&!b(this).hasClass("ui-state-disabled")){b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id))[a.p.useProp?"prop":"attr"]("checked",true);b(this).addClass("ui-state-highlight").attr("aria-selected","true");a.p.selarrrow.push(this.id);a.p.selrow=this.id;if(c){b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id),a.grid.fbDiv)[a.p.useProp?"prop":"attr"]("checked",true);b("#"+b.jgrid.jqID(this.id),a.grid.fbDiv).addClass("ui-state-highlight")}}});Y=true;ga=[]}else{b(a.rows).each(function(d){if(d>0&&!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("ui-state-disabled")){b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id))[a.p.useProp?"prop":"attr"]("checked",false);b(this).removeClass("ui-state-highlight").attr("aria-selected","false");ga.push(this.id);if(c){b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id),a.grid.fbDiv)[a.p.useProp?"prop":"attr"]("checked",false);b("#"+b.jgrid.jqID(this.id),a.grid.fbDiv).removeClass("ui-state-highlight")}}});a.p.selrow=null;Y=false}b(a).triggerHandler("jqGridSelectAll",[Y?a.p.selarrrow:ga,Y]);b.isFunction(a.p.onSelectAll)&&a.p.onSelectAll.call(a,Y?a.p.selarrrow:ga,Y)})}!0===a.p.autowidth&&(B=b(l).innerWidth(),a.p.width=0<B?B:"nw");(function(){var d=0,e=b.jgrid.cell_width?0:o(a.p.cellLayout,0),g=0,f,h=o(a.p.scrollOffset,0),i,k=false,l,m=0,n;b.each(a.p.colModel,function(){if(this.hidden===void 0){this.hidden=false}if(a.p.grouping&&a.p.autowidth){var c=b.inArray(this.name,a.p.groupingView.groupField);if(c>=0&&a.p.groupingView.groupColumnShow.length>c){this.hidden=!a.p.groupingView.groupColumnShow[c]}}this.widthOrg=i=o(this.width,0);if(this.hidden===false){d=d+(i+e);this.fixed?m=m+(i+e):g++}});if(isNaN(a.p.width)){a.p.width=d+(a.p.shrinkToFit===false&&!isNaN(a.p.height)?h:0)}c.width=a.p.width;a.p.tblwidth=d;if(a.p.shrinkToFit===false&&a.p.forceFit===true){a.p.forceFit=false}if(a.p.shrinkToFit===true&&g>0){l=c.width-e*g-m;if(!isNaN(a.p.height)){l=l-h;k=true}d=0;b.each(a.p.colModel,function(b){if(this.hidden===false&&!this.fixed){this.width=i=Math.round(l*this.width/(a.p.tblwidth-e*g-m));d=d+i;f=b}});n=0;k?c.width-m-(d+e*g)!==h&&(n=c.width-m-(d+e*g)-h):!k&&Math.abs(c.width-m-(d+e*g))!==1&&(n=c.width-m-(d+e*g));a.p.colModel[f].width=a.p.colModel[f].width+n;a.p.tblwidth=d+n+e*g+m;if(a.p.tblwidth>a.p.width){a.p.colModel[f].width=a.p.colModel[f].width-(a.p.tblwidth-parseInt(a.p.width,10));a.p.tblwidth=a.p.width}}})();b(l).css("width",c.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+a.p.id+"'>&#160;</div>");b(i).css("width",c.width+"px");var B=b("thead:first",a).get(0),Q="";a.p.footerrow&&(Q+="<table role='grid' style='width:"+a.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+f+"'>");var i=b("tr:first",B),Z="<tr class='jqgfirstrow' role='row' style='height:auto'>";a.p.disableClick=!1;b("th",i).each(function(d){da=a.p.colModel[d].width;if(a.p.colModel[d].resizable===void 0){a.p.colModel[d].resizable=true}if(a.p.colModel[d].resizable){ea=document.createElement("span");b(ea).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+f).css("cursor","col-resize");b(this).addClass(a.p.resizeclass)}else{ea=""}b(this).css("width",da+"px").prepend(ea);var e="";if(a.p.colModel[d].hidden){b(this).css("display","none");e="display:none;"}Z=Z+("<td role='gridcell' style='height:0px;width:"+da+"px;"+e+"'></td>");c.headers[d]={width:da,el:this};fa=a.p.colModel[d].sortable;if(typeof fa!=="boolean"){fa=a.p.colModel[d].sortable=true}e=a.p.colModel[d].name;e==="cb"||e==="subgrid"||e==="rn"||a.p.viewsortcols[2]&&b(">div",this).addClass("ui-jqgrid-sortable");if(fa){if(a.p.multiSort){if(a.p.viewsortcols[0]){b("div span.s-ico",this).show();a.p.colModel[d].lso&&b("div span.ui-icon-"+a.p.colModel[d].lso,this).removeClass("ui-state-disabled")}else{if(a.p.colModel[d].lso){b("div span.s-ico",this).show();b("div span.ui-icon-"+a.p.colModel[d].lso,this).removeClass("ui-state-disabled")}}}else{if(a.p.viewsortcols[0]){b("div span.s-ico",this).show();d===a.p.lastsort&&b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled")}else{if(d===a.p.lastsort){b("div span.s-ico",this).show();b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled")}}}}a.p.footerrow&&(Q=Q+("<td role='gridcell' "+n(d,0,"",null,"",false)+">&#160;</td>"))}).mousedown(function(d){if(b(d.target).closest("th>span.ui-jqgrid-resize").length===1){var e=ma(this);if(a.p.forceFit===true){var g=a.p,f=e,h;for(h=e+1;h<a.p.colModel.length;h++){if(a.p.colModel[h].hidden!==true){f=h;break}}g.nv=f-e}c.dragStart(e,d,sa(e));return false}}).click(function(c){if(a.p.disableClick){return a.p.disableClick=false}var d="th>div.ui-jqgrid-sortable",e,g;a.p.viewsortcols[2]||(d="th>div>span>span.ui-grid-ico-sort");c=b(c.target).closest(d);if(c.length===1){var f;if(a.p.frozenColumns){var h=b(this)[0].id.substring(5);b(a.p.colModel).each(function(a){if(this.name===h){f=a;return false}})}else{f=ma(this)}if(!a.p.viewsortcols[2]){e=true;g=c.attr("sort")}f!=null&&la(b("div",this)[0].id,f,e,g,this);return false}});if(a.p.sortable&&b.fn.sortable){try{b(a).jqGrid("sortableColumns",i)}catch(xa){}}a.p.footerrow&&(Q+="</tr></tbody></table>");Z+="</tr>";this.appendChild(document.createElement("tbody"));b(this).addClass("ui-jqgrid-btable").append(Z);var Z=null,i=b("<table class='ui-jqgrid-htable' style='width:"+a.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(B),H=a.p.caption&&!0===a.p.hiddengrid?!0:!1;g=b("<div class='ui-jqgrid-hbox"+("rtl"===f?"-rtl":"")+"'></div>");B=null;c.hDiv=document.createElement("div");b(c.hDiv).css({width:c.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(g);b(g).append(i);i=null;H&&b(c.hDiv).hide();a.p.pager&&("string"===typeof a.p.pager?"#"!==a.p.pager.substr(0,1)&&(a.p.pager="#"+a.p.pager):a.p.pager="#"+b(a.p.pager).attr("id"),b(a.p.pager).css({width:c.width+"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(l),H&&b(a.p.pager).hide(),ka(a.p.pager,""));!1===a.p.cellEdit&&!0===a.p.hoverrows&&b(a).bind("mouseover",function(a){p=b(a.target).closest("tr.jqgrow");b(p).attr("class")!=="ui-subgrid"&&b(p).addClass("ui-state-hover")}).bind("mouseout",function(a){p=b(a.target).closest("tr.jqgrow");b(p).removeClass("ui-state-hover")});var w,I,ha;b(a).before(c.hDiv).click(function(c){v=c.target;p=b(v,a.rows).closest("tr.jqgrow");if(b(p).length===0||p[0].className.indexOf("ui-state-disabled")>-1||(b(v,a).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==a.id){return this}var d=b(v).hasClass("cbox"),e=b(a).triggerHandler("jqGridBeforeSelectRow",[p[0].id,c]);(e=e===false||e==="stop"?false:true)&&b.isFunction(a.p.beforeSelectRow)&&(e=a.p.beforeSelectRow.call(a,p[0].id,c));if(!(v.tagName==="A"||(v.tagName==="INPUT"||v.tagName==="TEXTAREA"||v.tagName==="OPTION"||v.tagName==="SELECT")&&!d)&&e===true){w=p[0].id;I=b.jgrid.getCellIndex(v);ha=b(v).closest("td,th").html();b(a).triggerHandler("jqGridCellSelect",[w,I,ha,c]);b.isFunction(a.p.onCellSelect)&&a.p.onCellSelect.call(a,w,I,ha,c);if(a.p.cellEdit===true){if(a.p.multiselect&&d){b(a).jqGrid("setSelection",w,true,c)}else{w=p[0].rowIndex;try{b(a).jqGrid("editCell",w,I,true)}catch(g){}}}else{if(a.p.multikey){if(c[a.p.multikey]){b(a).jqGrid("setSelection",w,true,c)}else{if(a.p.multiselect&&d){d=b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+w).is(":checked");b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+w)[a.p.useProp?"prop":"attr"]("checked",d)}}}else{if(a.p.multiselect&&a.p.multiboxonly&&!d){var f=a.p.frozenColumns?a.p.id+"_frozen":"";b(a.p.selarrrow).each(function(c,d){var e=a.rows.namedItem(d);b(e).removeClass("ui-state-highlight");b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(d))[a.p.useProp?"prop":"attr"]("checked",false);if(f){b("#"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(f)).removeClass("ui-state-highlight");b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(f))[a.p.useProp?"prop":"attr"]("checked",false)}});a.p.selarrrow=[]}b(a).jqGrid("setSelection",w,true,c)}}}}).bind("reloadGrid",function(c,d){if(a.p.treeGrid===true){a.p.datatype=a.p.treedatatype}d&&d.current&&a.grid.selectionPreserver(a);if(a.p.datatype==="local"){b(a).jqGrid("resetSelection");a.p.data.length&&N()}else{if(!a.p.treeGrid){a.p.selrow=null;if(a.p.multiselect){a.p.selarrrow=[];ca(false)}a.p.savedRow=[]}}a.p.scroll&&V.call(a,true,false);if(d&&d.page){var e=d.page;if(e>a.p.lastpage){e=a.p.lastpage}e<1&&(e=1);a.p.page=e;a.grid.bDiv.scrollTop=a.grid.prevRowHeight?(e-1)*a.grid.prevRowHeight*a.p.rowNum:0}if(a.grid.prevRowHeight&&a.p.scroll){delete a.p.lastpage;a.grid.populateVisible()}else{a.grid.populate()}a.p._inlinenav===true&&b(a).jqGrid("showAddEditButtons");return false}).dblclick(function(c){v=c.target;p=b(v,a.rows).closest("tr.jqgrow");if(b(p).length!==0){w=p[0].rowIndex;I=b.jgrid.getCellIndex(v);b(a).triggerHandler("jqGridDblClickRow",[b(p).attr("id"),w,I,c]);b.isFunction(a.p.ondblClickRow)&&a.p.ondblClickRow.call(a,b(p).attr("id"),w,I,c)}}).bind("contextmenu",function(c){v=c.target;p=b(v,a.rows).closest("tr.jqgrow");if(b(p).length!==0){a.p.multiselect||b(a).jqGrid("setSelection",p[0].id,true,c);w=p[0].rowIndex;I=b.jgrid.getCellIndex(v);b(a).triggerHandler("jqGridRightClickRow",[b(p).attr("id"),w,I,c]);b.isFunction(a.p.onRightClickRow)&&a.p.onRightClickRow.call(a,b(p).attr("id"),w,I,c)}});c.bDiv=document.createElement("div");k&&"auto"===(""+a.p.height).toLowerCase()&&(a.p.height="100%");b(c.bDiv).append(b('<div style="position:relative;'+(k&&8>b.jgrid.msiever()?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:a.p.height+(isNaN(a.p.height)?"":"px"),width:c.width+"px"}).scroll(c.scrollGrid);b("table:first",c.bDiv).css({width:a.p.tblwidth+"px"});b.support.tbody||2===b("tbody",this).length&&b("tbody:gt(0)",this).remove();a.p.multikey&&(b.jgrid.msie?b(c.bDiv).bind("selectstart",function(){return false}):b(c.bDiv).bind("mousedown",function(){return false}));H&&b(c.bDiv).hide();c.cDiv=document.createElement("div");var ia=!0===a.p.hidegrid?b("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){ia.addClass("ui-state-hover")},function(){ia.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"===f?"left":"right","0px"):"";b(c.cDiv).append(ia).append("<span class='ui-jqgrid-title"+("rtl"===f?"-rtl":"")+"'>"+a.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix");b(c.cDiv).insertBefore(c.hDiv);a.p.toolbar[0]&&(c.uDiv=document.createElement("div"),"top"===a.p.toolbar[1]?b(c.uDiv).insertBefore(c.hDiv):"bottom"===a.p.toolbar[1]&&b(c.uDiv).insertAfter(c.hDiv),"both"===a.p.toolbar[1]?(c.ubDiv=document.createElement("div"),b(c.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(c.hDiv),b(c.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id).insertAfter(c.hDiv),H&&b(c.ubDiv).hide()):b(c.uDiv).width(c.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),H&&b(c.uDiv).hide());a.p.toppager&&(a.p.toppager=b.jgrid.jqID(a.p.id)+"_toppager",c.topDiv=b("<div id='"+a.p.toppager+"'></div>")[0],a.p.toppager="#"+a.p.toppager,b(c.topDiv).addClass("ui-state-default ui-jqgrid-toppager").width(c.width).insertBefore(c.hDiv),ka(a.p.toppager,"_t"));a.p.footerrow&&(c.sDiv=b("<div class='ui-jqgrid-sdiv'></div>")[0],g=b("<div class='ui-jqgrid-hbox"+("rtl"===f?"-rtl":"")+"'></div>"),b(c.sDiv).append(g).width(c.width).insertAfter(c.hDiv),b(g).append(Q),c.footers=b(".ui-jqgrid-ftable",c.sDiv)[0].rows[0].cells,a.p.rownumbers&&(c.footers[0].className="ui-state-default jqgrid-rownum"),H&&b(c.sDiv).hide());g=null;if(a.p.caption){var ta=a.p.datatype;!0===a.p.hidegrid&&(b(".ui-jqgrid-titlebar-close",c.cDiv).click(function(d){var e=b.isFunction(a.p.onHeaderClick),g=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",f,h=this;if(a.p.toolbar[0]===true){a.p.toolbar[1]==="both"&&(g=g+(", #"+b(c.ubDiv).attr("id")));g=g+(", #"+b(c.uDiv).attr("id"))}f=b(g,"#gview_"+b.jgrid.jqID(a.p.id)).length;a.p.gridstate==="visible"?b(g,"#gbox_"+b.jgrid.jqID(a.p.id)).slideUp("fast",function(){f--;if(f===0){b("span",h).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");a.p.gridstate="hidden";b("#gbox_"+b.jgrid.jqID(a.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(a.p.id)).hide();b(a).triggerHandler("jqGridHeaderClick",[a.p.gridstate,d]);e&&(H||a.p.onHeaderClick.call(a,a.p.gridstate,d))}}):a.p.gridstate==="hidden"&&b(g,"#gbox_"+b.jgrid.jqID(a.p.id)).slideDown("fast",function(){f--;if(f===0){b("span",h).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");if(H){a.p.datatype=ta;O();H=false}a.p.gridstate="visible";b("#gbox_"+b.jgrid.jqID(a.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(a.p.id)).show();b(a).triggerHandler("jqGridHeaderClick",[a.p.gridstate,d]);e&&(H||a.p.onHeaderClick.call(a,a.p.gridstate,d))}});return false}),H&&(a.p.datatype="local",b(".ui-jqgrid-titlebar-close",c.cDiv).trigger("click")))}else{b(c.cDiv).hide()}b(c.hDiv).after(c.bDiv).mousemove(function(a){if(c.resizing){c.dragMove(a);return false}});b(".ui-jqgrid-labels",c.hDiv).bind("selectstart",function(){return false});b(document).mouseup(function(){if(c.resizing){c.dragEnd();return false}return true});a.formatCol=n;a.sortData=la;a.updatepager=function(c,d){var e,g,f,h,i,j,k,l="",m=a.p.pager?"_"+b.jgrid.jqID(a.p.pager.substr(1)):"",n=a.p.toppager?"_"+a.p.toppager.substr(1):"";f=parseInt(a.p.page,10)-1;f<0&&(f=0);f=f*parseInt(a.p.rowNum,10);i=f+a.p.reccount;if(a.p.scroll){e=b("tbody:first > tr:gt(0)",a.grid.bDiv);f=i-e.length;a.p.reccount=e.length;if(e=e.outerHeight()||a.grid.prevRowHeight){g=f*e;k=parseInt(a.p.records,10)*e;b(">div:first",a.grid.bDiv).css({height:k}).children("div:first").css({height:g,display:g?"":"none"});if(a.grid.bDiv.scrollTop==0&&a.p.page>1){a.grid.bDiv.scrollTop=a.p.rowNum*(a.p.page-1)*e}}a.grid.bDiv.scrollLeft=a.grid.hDiv.scrollLeft}l=a.p.pager||"";if(l=l+(a.p.toppager?l?","+a.p.toppager:a.p.toppager:"")){k=b.jgrid.formatter.integer||{};e=o(a.p.page);g=o(a.p.lastpage);b(".selbox",l)[this.p.useProp?"prop":"attr"]("disabled",false);if(a.p.pginput===true){b(".ui-pg-input",l).val(a.p.page);h=a.p.toppager?"#sp_1"+m+",#sp_1"+n:"#sp_1"+m;b(h).html(b.fmatter?b.fmatter.util.NumberFormat(a.p.lastpage,k):a.p.lastpage)}if(a.p.viewrecords){if(a.p.reccount===0){b(".ui-paging-info",l).html(a.p.emptyrecords)}else{h=f+1;j=a.p.records;if(b.fmatter){h=b.fmatter.util.NumberFormat(h,k);i=b.fmatter.util.NumberFormat(i,k);j=b.fmatter.util.NumberFormat(j,k)}b(".ui-paging-info",l).html(b.jgrid.format(a.p.recordtext,h,i,j))}}if(a.p.pgbuttons===true){e<=0&&(e=g=0);if(e===1||e===0){b("#first"+m+", #prev"+m).addClass("ui-state-disabled").removeClass("ui-state-hover");a.p.toppager&&b("#first_t"+n+", #prev_t"+n).addClass("ui-state-disabled").removeClass("ui-state-hover")}else{b("#first"+m+", #prev"+m).removeClass("ui-state-disabled");a.p.toppager&&b("#first_t"+n+", #prev_t"+n).removeClass("ui-state-disabled")}if(e===g||e===0){b("#next"+m+", #last"+m).addClass("ui-state-disabled").removeClass("ui-state-hover");a.p.toppager&&b("#next_t"+n+", #last_t"+n).addClass("ui-state-disabled").removeClass("ui-state-hover")}else{b("#next"+m+", #last"+m).removeClass("ui-state-disabled");a.p.toppager&&b("#next_t"+n+", #last_t"+n).removeClass("ui-state-disabled")}}}c===true&&a.p.rownumbers===true&&b(">td.jqgrid-rownum",a.rows).each(function(a){b(this).html(f+1+a)});d&&a.p.jqgdnd&&b(a).jqGrid("gridDnD","updateDnD");b(a).triggerHandler("jqGridGridComplete");b.isFunction(a.p.gridComplete)&&a.p.gridComplete.call(a);b(a).triggerHandler("jqGridAfterGridComplete")};a.refreshIndex=N;a.setHeadCheckBox=ca;a.constructTr=X;a.formatter=function(a,b,c,d,e){return t(a,b,c,d,e)};b.extend(c,{populate:O,emptyRows:V});this.grid=c;a.addXmlData=function(b){J(b,a.grid.bDiv)};a.addJSONData=function(b){S(b,a.grid.bDiv)};this.grid.cols=this.rows[0].cells;b(a).triggerHandler("jqGridInitGrid");b.isFunction(a.p.onInitGrid)&&a.p.onInitGrid.call(a);O();a.p.hiddengrid=!1}}}}})};b.jgrid.extend({getGridParam:function(b){var f=this[0];return !f||!f.grid?void 0:!b?f.p:void 0!==f.p[b]?f.p[b]:null},setGridParam:function(d){return this.each(function(){this.grid&&"object"===typeof d&&b.extend(!0,this.p,d)})},getDataIDs:function(){var d=[],f=0,c,e=0;this.each(function(){if((c=this.rows.length)&&0<c){for(;f<c;){b(this.rows[f]).hasClass("jqgrow")&&(d[e]=this.rows[f].id,e++),f++}}});return d},setSelection:function(d,f,c){return this.each(function(){var e,a,j,g,h,i;if(void 0!==d&&(f=!1===f?!1:!0,(a=this.rows.namedItem(""+d))&&a.className&&!(-1<a.className.indexOf("ui-state-disabled")))){if(!0===this.p.scrollrows&&(j=this.rows.namedItem(d).rowIndex,0<=j&&(e=b(this.grid.bDiv)[0].clientHeight,g=b(this.grid.bDiv)[0].scrollTop,h=b(this.rows[j]).position().top,j=this.rows[j].clientHeight,h+j>=e+g?b(this.grid.bDiv)[0].scrollTop=h-(e+g)+j+g:h<e+g&&h<g&&(b(this.grid.bDiv)[0].scrollTop=h))),!0===this.p.frozenColumns&&(i=this.p.id+"_frozen"),this.p.multiselect){if(this.setHeadCheckBox(!1),this.p.selrow=a.id,g=b.inArray(this.p.selrow,this.p.selarrrow),-1===g?("ui-subgrid"!==a.className&&b(a).addClass("ui-state-highlight").attr("aria-selected","true"),e=!0,this.p.selarrrow.push(this.p.selrow)):("ui-subgrid"!==a.className&&b(a).removeClass("ui-state-highlight").attr("aria-selected","false"),e=!1,this.p.selarrrow.splice(g,1),h=this.p.selarrrow[0],this.p.selrow=void 0===h?null:h),b("#jqg_"+b.jgrid.jqID(this.p.id)+"_"+b.jgrid.jqID(a.id))[this.p.useProp?"prop":"attr"]("checked",e),i&&(-1===g?b("#"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(i)).addClass("ui-state-highlight"):b("#"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(i)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(this.p.id)+"_"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(i))[this.p.useProp?"prop":"attr"]("checked",e)),f){b(this).triggerHandler("jqGridSelectRow",[a.id,e,c]),this.p.onSelectRow&&this.p.onSelectRow.call(this,a.id,e,c)}}else{if("ui-subgrid"!==a.className&&(this.p.selrow!==a.id?(b(this.rows.namedItem(this.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),b(a).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),i&&(b("#"+b.jgrid.jqID(this.p.selrow),"#"+b.jgrid.jqID(i)).removeClass("ui-state-highlight"),b("#"+b.jgrid.jqID(d),"#"+b.jgrid.jqID(i)).addClass("ui-state-highlight")),e=!0):e=!1,this.p.selrow=a.id,f)){b(this).triggerHandler("jqGridSelectRow",[a.id,e,c]),this.p.onSelectRow&&this.p.onSelectRow.call(this,a.id,e,c)}}}})},resetSelection:function(d){return this.each(function(){var f=this,c,e,a;!0===f.p.frozenColumns&&(a=f.p.id+"_frozen");if(void 0!==d){e=d===f.p.selrow?f.p.selrow:d;b("#"+b.jgrid.jqID(f.p.id)+" tbody:first tr#"+b.jgrid.jqID(e)).removeClass("ui-state-highlight").attr("aria-selected","false");a&&b("#"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(a)).removeClass("ui-state-highlight");if(f.p.multiselect){b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(f.p.id))[f.p.useProp?"prop":"attr"]("checked",!1);if(a){b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(a))[f.p.useProp?"prop":"attr"]("checked",!1)}f.setHeadCheckBox(!1)}e=null}else{f.p.multiselect?(b(f.p.selarrrow).each(function(d,e){c=f.rows.namedItem(e);b(c).removeClass("ui-state-highlight").attr("aria-selected","false");b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(e))[f.p.useProp?"prop":"attr"]("checked",!1);a&&(b("#"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(a)).removeClass("ui-state-highlight"),b("#jqg_"+b.jgrid.jqID(f.p.id)+"_"+b.jgrid.jqID(e),"#"+b.jgrid.jqID(a))[f.p.useProp?"prop":"attr"]("checked",!1))}),f.setHeadCheckBox(!1),f.p.selarrrow=[]):f.p.selrow&&(b("#"+b.jgrid.jqID(f.p.id)+" tbody:first tr#"+b.jgrid.jqID(f.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),a&&b("#"+b.jgrid.jqID(f.p.selrow),"#"+b.jgrid.jqID(a)).removeClass("ui-state-highlight"),f.p.selrow=null)}!0===f.p.cellEdit&&0<=parseInt(f.p.iCol,10)&&0<=parseInt(f.p.iRow,10)&&(b("td:eq("+f.p.iCol+")",f.rows[f.p.iRow]).removeClass("edit-cell ui-state-highlight"),b(f.rows[f.p.iRow]).removeClass("selected-row ui-state-hover"));f.p.savedRow=[]})},getRowData:function(d){var f={},c,e=!1,a,j=0;this.each(function(){var g=this,h,i;if(void 0===d){e=!0,c=[],a=g.rows.length}else{i=g.rows.namedItem(d);if(!i){return f}a=2}for(;j<a;){e&&(i=g.rows[j]),b(i).hasClass("jqgrow")&&(b('td[role="gridcell"]',i).each(function(a){h=g.p.colModel[a].name;if("cb"!==h&&"subgrid"!==h&&"rn"!==h){if(!0===g.p.treeGrid&&h===g.p.ExpandColumn){f[h]=b.jgrid.htmlDecode(b("span:first",this).html())}else{try{f[h]=b.unformat.call(g,this,{rowId:i.id,colModel:g.p.colModel[a]},a)}catch(c){f[h]=b.jgrid.htmlDecode(b(this).html())}}}}),e&&(c.push(f),f={})),j++}});return c||f},delRowData:function(d){var f=!1,c,e;this.each(function(){c=this.rows.namedItem(d);if(!c){return !1}b(c).remove();this.p.records--;this.p.reccount--;this.updatepager(!0,!1);f=!0;this.p.multiselect&&(e=b.inArray(d,this.p.selarrrow),-1!==e&&this.p.selarrrow.splice(e,1));this.p.selrow=this.p.multiselect&&0<this.p.selarrrow.length?this.p.selarrrow[this.p.selarrrow.length-1]:null;if("local"===this.p.datatype){var a=this.p._index[b.jgrid.stripPref(this.p.idPrefix,d)];void 0!==a&&(this.p.data.splice(a,1),this.refreshIndex())}if(!0===this.p.altRows&&f){var j=this.p.altclass;b(this.rows).each(function(a){a%2===1?b(this).addClass(j):b(this).removeClass(j)})}});return f},setRowData:function(d,f,c){var e,a=!0,j;this.each(function(){if(!this.grid){return !1}var g=this,h,i,k=typeof c,l={};i=g.rows.namedItem(d);if(!i){return !1}if(f){try{if(b(this.p.colModel).each(function(a){e=this.name;var c=b.jgrid.getAccessor(f,e);void 0!==c&&(l[e]=this.formatter&&"string"===typeof this.formatter&&"date"===this.formatter?b.unformat.date.call(g,c,this):c,h=g.formatter(d,c,a,f,"edit"),j=this.title?{title:b.jgrid.stripHtml(h)}:{},!0===g.p.treeGrid&&e===g.p.ExpandColumn?b("td[role='gridcell']:eq("+a+") > span:first",i).html(h).attr(j):b("td[role='gridcell']:eq("+a+")",i).html(h).attr(j))}),"local"===g.p.datatype){var o=b.jgrid.stripPref(g.p.idPrefix,d),n=g.p._index[o],m;if(g.p.treeGrid){for(m in g.p.treeReader){g.p.treeReader.hasOwnProperty(m)&&delete l[g.p.treeReader[m]]}}void 0!==n&&(g.p.data[n]=b.extend(!0,g.p.data[n],l));l=null}}catch(t){a=!1}}a&&("string"===k?b(i).addClass(c):"object"===k&&b(i).css(c),b(g).triggerHandler("jqGridAfterGridComplete"))});return a},addRowData:function(d,f,c,e){c||(c="last");var a=!1,j,g,h,i,k,l,o,n,m="",t,A,T,M,$,U;f&&(b.isArray(f)?(t=!0,c="last",A=d):(f=[f],t=!1),this.each(function(){var V=f.length;k=this.p.rownumbers===true?1:0;h=this.p.multiselect===true?1:0;i=this.p.subGrid===true?1:0;if(!t){if(d!==void 0){d=""+d}else{d=b.jgrid.randId();if(this.p.keyIndex!==false){A=this.p.colModel[this.p.keyIndex+h+i+k].name;f[0][A]!==void 0&&(d=f[0][A])}}}T=this.p.altclass;for(var N=0,X="",J={},S=b.isFunction(this.p.afterInsertRow)?true:false;N<V;){M=f[N];g=[];if(t){try{d=M[A];d===void 0&&(d=b.jgrid.randId())}catch(ja){d=b.jgrid.randId()}X=this.p.altRows===true?(this.rows.length-1)%2===0?T:"":""}U=d;d=this.p.idPrefix+d;if(k){m=this.formatCol(0,1,"",null,d,true);g[g.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+m+">0</td>"}if(h){n='<input role="checkbox" type="checkbox" id="jqg_'+this.p.id+"_"+d+'" class="cbox"/>';m=this.formatCol(k,1,"",null,d,true);g[g.length]='<td role="gridcell" '+m+">"+n+"</td>"}i&&(g[g.length]=b(this).jqGrid("addSubGridCell",h+k,1));for(o=h+i+k;o<this.p.colModel.length;o++){$=this.p.colModel[o];j=$.name;J[j]=M[j];n=this.formatter(d,b.jgrid.getAccessor(M,j),o,M);m=this.formatCol(o,1,n,M,d,J);g[g.length]='<td role="gridcell" '+m+">"+n+"</td>"}g.unshift(this.constructTr(d,false,X,J,M,false));g[g.length]="</tr>";if(this.rows.length===0){b("table:first",this.grid.bDiv).append(g.join(""))}else{switch(c){case"last":b(this.rows[this.rows.length-1]).after(g.join(""));l=this.rows.length-1;break;case"first":b(this.rows[0]).after(g.join(""));l=1;break;case"after":(l=this.rows.namedItem(e))&&(b(this.rows[l.rowIndex+1]).hasClass("ui-subgrid")?b(this.rows[l.rowIndex+1]).after(g):b(l).after(g.join("")));l++;break;case"before":if(l=this.rows.namedItem(e)){b(l).before(g.join(""));l=l.rowIndex}l--}}this.p.subGrid===true&&b(this).jqGrid("addSubGrid",h+k,l);this.p.records++;this.p.reccount++;b(this).triggerHandler("jqGridAfterInsertRow",[d,M,M]);S&&this.p.afterInsertRow.call(this,d,M,M);N++;if(this.p.datatype==="local"){J[this.p.localReader.id]=U;this.p._index[U]=this.p.data.length;this.p.data.push(J);J={}}}this.p.altRows===true&&!t&&(c==="last"?(this.rows.length-1)%2===1&&b(this.rows[this.rows.length-1]).addClass(T):b(this.rows).each(function(a){a%2===1?b(this).addClass(T):b(this).removeClass(T)}));this.updatepager(true,true);a=true}));return a},footerData:function(d,f,c){function e(a){for(var b in a){if(a.hasOwnProperty(b)){return !1}}return !0}var a,j=!1,g={},h;void 0===d&&(d="get");"boolean"!==typeof c&&(c=!0);d=d.toLowerCase();this.each(function(){var i=this,k;if(!i.grid||!i.p.footerrow||"set"===d&&e(f)){return !1}j=!0;b(this.p.colModel).each(function(e){a=this.name;"set"===d?void 0!==f[a]&&(k=c?i.formatter("",f[a],e,f,"edit"):f[a],h=this.title?{title:b.jgrid.stripHtml(k)}:{},b("tr.footrow td:eq("+e+")",i.grid.sDiv).html(k).attr(h),j=!0):"get"===d&&(g[a]=b("tr.footrow td:eq("+e+")",i.grid.sDiv).html())})});return"get"===d?g:j},showHideCol:function(d,f){return this.each(function(){var c=this,e=!1,a=b.jgrid.cell_width?0:c.p.cellLayout,j;if(c.grid){"string"===typeof d&&(d=[d]);f="none"!==f?"":"none";var g=""===f?!0:!1,h=c.p.groupHeader&&("object"===typeof c.p.groupHeader||b.isFunction(c.p.groupHeader));h&&b(c).jqGrid("destroyGroupHeader",!1);b(this.p.colModel).each(function(h){if(-1!==b.inArray(this.name,d)&&this.hidden===g){if(!0===c.p.frozenColumns&&!0===this.frozen){return !0}b("tr",c.grid.hDiv).each(function(){b(this.cells[h]).css("display",f)});b(c.rows).each(function(){b(this).hasClass("jqgroup")||b(this.cells[h]).css("display",f)});c.p.footerrow&&b("tr.footrow td:eq("+h+")",c.grid.sDiv).css("display",f);j=parseInt(this.width,10);c.p.tblwidth="none"===f?c.p.tblwidth-(j+a):c.p.tblwidth+(j+a);this.hidden=!g;e=!0;b(c).triggerHandler("jqGridShowHideCol",[g,this.name,h])}});!0===e&&(!0===c.p.shrinkToFit&&!isNaN(c.p.height)&&(c.p.tblwidth+=parseInt(c.p.scrollOffset,10)),b(c).jqGrid("setGridWidth",!0===c.p.shrinkToFit?c.p.tblwidth:c.p.width));h&&b(c).jqGrid("setGroupHeaders",c.p.groupHeader)}})},hideCol:function(d){return this.each(function(){b(this).jqGrid("showHideCol",d,"none")})},showCol:function(d){return this.each(function(){b(this).jqGrid("showHideCol",d,"")})},remapColumns:function(d,f,c){function e(a){var c;c=a.length?b.makeArray(a):b.extend({},a);b.each(d,function(b){a[b]=c[this]})}function a(a,c){b(">tr"+(c||""),a).each(function(){var a=this,c=b.makeArray(a.cells);b.each(d,function(){var b=c[this];b&&a.appendChild(b)})})}var j=this.get(0);e(j.p.colModel);e(j.p.colNames);e(j.grid.headers);a(b("thead:first",j.grid.hDiv),c&&":not(.ui-jqgrid-labels)");f&&a(b("#"+b.jgrid.jqID(j.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");j.p.footerrow&&a(b("tbody:first",j.grid.sDiv));j.p.remapColumns&&(j.p.remapColumns.length?e(j.p.remapColumns):j.p.remapColumns=b.makeArray(d));j.p.lastsort=b.inArray(j.p.lastsort,d);j.p.treeGrid&&(j.p.expColInd=b.inArray(j.p.expColInd,d));b(j).triggerHandler("jqGridRemapColumns",[d,f,c])},setGridWidth:function(d,f){return this.each(function(){if(this.grid){var c=this,e,a=0,j=b.jgrid.cell_width?0:c.p.cellLayout,g,h=0,i=!1,k=c.p.scrollOffset,l,o=0,n;"boolean"!==typeof f&&(f=c.p.shrinkToFit);if(!isNaN(d)){d=parseInt(d,10);c.grid.width=c.p.width=d;b("#gbox_"+b.jgrid.jqID(c.p.id)).css("width",d+"px");b("#gview_"+b.jgrid.jqID(c.p.id)).css("width",d+"px");b(c.grid.bDiv).css("width",d+"px");b(c.grid.hDiv).css("width",d+"px");c.p.pager&&b(c.p.pager).css("width",d+"px");c.p.toppager&&b(c.p.toppager).css("width",d+"px");!0===c.p.toolbar[0]&&(b(c.grid.uDiv).css("width",d+"px"),"both"===c.p.toolbar[1]&&b(c.grid.ubDiv).css("width",d+"px"));c.p.footerrow&&b(c.grid.sDiv).css("width",d+"px");!1===f&&!0===c.p.forceFit&&(c.p.forceFit=!1);if(!0===f){b.each(c.p.colModel,function(){if(this.hidden===false){e=this.widthOrg;a=a+(e+j);this.fixed?o=o+(e+j):h++}});if(0===h){return}c.p.tblwidth=a;l=d-j*h-o;if(!isNaN(c.p.height)&&(b(c.grid.bDiv)[0].clientHeight<b(c.grid.bDiv)[0].scrollHeight||1===c.rows.length)){i=!0,l-=k}var a=0,m=0<c.grid.cols.length;b.each(c.p.colModel,function(b){if(this.hidden===false&&!this.fixed){e=this.widthOrg;e=Math.round(l*e/(c.p.tblwidth-j*h-o));if(!(e<0)){this.width=e;a=a+e;c.grid.headers[b].width=e;c.grid.headers[b].el.style.width=e+"px";if(c.p.footerrow){c.grid.footers[b].style.width=e+"px"}if(m){c.grid.cols[b].style.width=e+"px"}g=b}}});if(!g){return}n=0;i?d-o-(a+j*h)!==k&&(n=d-o-(a+j*h)-k):1!==Math.abs(d-o-(a+j*h))&&(n=d-o-(a+j*h));c.p.colModel[g].width+=n;c.p.tblwidth=a+n+j*h+o;c.p.tblwidth>d?(i=c.p.tblwidth-parseInt(d,10),c.p.tblwidth=d,e=c.p.colModel[g].width-=i):e=c.p.colModel[g].width;c.grid.headers[g].width=e;c.grid.headers[g].el.style.width=e+"px";m&&(c.grid.cols[g].style.width=e+"px");c.p.footerrow&&(c.grid.footers[g].style.width=e+"px")}c.p.tblwidth&&(b("table:first",c.grid.bDiv).css("width",c.p.tblwidth+"px"),b("table:first",c.grid.hDiv).css("width",c.p.tblwidth+"px"),c.grid.hDiv.scrollLeft=c.grid.bDiv.scrollLeft,c.p.footerrow&&b("table:first",c.grid.sDiv).css("width",c.p.tblwidth+"px"))}}})},setGridHeight:function(d){return this.each(function(){if(this.grid){var f=b(this.grid.bDiv);f.css({height:d+(isNaN(d)?"":"px")});!0===this.p.frozenColumns&&b("#"+b.jgrid.jqID(this.p.id)+"_frozen").parent().height(f.height()-16);this.p.height=d;this.p.scroll&&this.grid.populateVisible()}})},setCaption:function(d){return this.each(function(){this.p.caption=d;b("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(d);b(this.grid.cDiv).show()})},setLabel:function(d,f,c,e){return this.each(function(){var a=-1;if(this.grid&&void 0!==d&&(b(this.p.colModel).each(function(b){if(this.name===d){return a=b,!1}}),0<=a)){var j=b("tr.ui-jqgrid-labels th:eq("+a+")",this.grid.hDiv);if(f){var g=b(".s-ico",j);b("[id^=jqgh_]",j).empty().html(f).append(g);this.p.colNames[a]=f}c&&("string"===typeof c?b(j).addClass(c):b(j).css(c));"object"===typeof e&&b(j).attr(e)}})},setCell:function(d,f,c,e,a,j){return this.each(function(){var g=-1,h,i;if(this.grid&&(isNaN(f)?b(this.p.colModel).each(function(a){if(this.name===f){return g=a,!1}}):g=parseInt(f,10),0<=g&&(h=this.rows.namedItem(d)))){var k=b("td:eq("+g+")",h);if(""!==c||!0===j){h=this.formatter(d,c,g,h,"edit"),i=this.p.colModel[g].title?{title:b.jgrid.stripHtml(h)}:{},this.p.treeGrid&&0<b(".tree-wrap",b(k)).length?b("span",b(k)).html(h).attr(i):b(k).html(h).attr(i),"local"===this.p.datatype&&(h=this.p.colModel[g],c=h.formatter&&"string"===typeof h.formatter&&"date"===h.formatter?b.unformat.date.call(this,c,h):c,i=this.p._index[b.jgrid.stripPref(this.p.idPrefix,d)],void 0!==i&&(this.p.data[i][h.name]=c))}"string"===typeof e?b(k).addClass(e):e&&b(k).css(e);"object"===typeof a&&b(k).attr(a)}})},getCell:function(d,f){var c=!1;this.each(function(){var e=-1;if(this.grid&&(isNaN(f)?b(this.p.colModel).each(function(a){if(this.name===f){return e=a,!1}}):e=parseInt(f,10),0<=e)){var a=this.rows.namedItem(d);if(a){try{c=b.unformat.call(this,b("td:eq("+e+")",a),{rowId:a.id,colModel:this.p.colModel[e]},e)}catch(j){c=b.jgrid.htmlDecode(b("td:eq("+e+")",a).html())}}}});return c},getCol:function(d,f,c){var e=[],a,j=0,g,h,i,f="boolean"!==typeof f?!1:f;void 0===c&&(c=!1);this.each(function(){var k=-1;if(this.grid&&(isNaN(d)?b(this.p.colModel).each(function(a){if(this.name===d){return k=a,!1}}):k=parseInt(d,10),0<=k)){var l=this.rows.length,o=0;if(l&&0<l){for(;o<l;){if(b(this.rows[o]).hasClass("jqgrow")){try{a=b.unformat.call(this,b(this.rows[o].cells[k]),{rowId:this.rows[o].id,colModel:this.p.colModel[k]},k)}catch(n){a=b.jgrid.htmlDecode(this.rows[o].cells[k].innerHTML)}c?(i=parseFloat(a),j+=i,void 0===h&&(h=g=i),g=Math.min(g,i),h=Math.max(h,i)):f?e.push({id:this.rows[o].id,value:a}):e.push(a)}o++}if(c){switch(c.toLowerCase()){case"sum":e=j;break;case"avg":e=j/l;break;case"count":e=l;break;case"min":e=g;break;case"max":e=h}}}}});return e},clearGridData:function(d){return this.each(function(){if(this.grid){"boolean"!==typeof d&&(d=!1);if(this.p.deepempty){b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:gt(0)").remove()}else{var f=b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:first")[0];b("#"+b.jgrid.jqID(this.p.id)+" tbody:first").empty().append(f)}this.p.footerrow&&d&&b(".ui-jqgrid-ftable td",this.grid.sDiv).html("&#160;");this.p.selrow=null;this.p.selarrrow=[];this.p.savedRow=[];this.p.records=0;this.p.page=1;this.p.lastpage=0;this.p.reccount=0;this.p.data=[];this.p._index={};this.updatepager(!0,!1)}})},getInd:function(b,f){var c=!1,e;this.each(function(){(e=this.rows.namedItem(b))&&(c=!0===f?e:e.rowIndex)});return c},bindKeys:function(d){var f=b.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},d||{});return this.each(function(){var c=this;b("body").is("[role]")||b("body").attr("role","application");c.p.scrollrows=f.scrollingRows;b(c).keydown(function(d){var a=b(c).find("tr[tabindex=0]")[0],j,g,h,i=c.p.treeReader.expanded_field;if(a){if(h=c.p._index[b.jgrid.stripPref(c.p.idPrefix,a.id)],37===d.keyCode||38===d.keyCode||39===d.keyCode||40===d.keyCode){if(38===d.keyCode){g=a.previousSibling;j="";if(g){if(b(g).is(":hidden")){for(;g;){if(g=g.previousSibling,!b(g).is(":hidden")&&b(g).hasClass("jqgrow")){j=g.id;break}}}else{j=g.id}}b(c).jqGrid("setSelection",j,!0,d);d.preventDefault()}if(40===d.keyCode){g=a.nextSibling;j="";if(g){if(b(g).is(":hidden")){for(;g;){if(g=g.nextSibling,!b(g).is(":hidden")&&b(g).hasClass("jqgrow")){j=g.id;break}}}else{j=g.id}}b(c).jqGrid("setSelection",j,!0,d);d.preventDefault()}37===d.keyCode&&(c.p.treeGrid&&c.p.data[h][i]&&b(a).find("div.treeclick").trigger("click"),b(c).triggerHandler("jqGridKeyLeft",[c.p.selrow]),b.isFunction(f.onLeftKey)&&f.onLeftKey.call(c,c.p.selrow));39===d.keyCode&&(c.p.treeGrid&&!c.p.data[h][i]&&b(a).find("div.treeclick").trigger("click"),b(c).triggerHandler("jqGridKeyRight",[c.p.selrow]),b.isFunction(f.onRightKey)&&f.onRightKey.call(c,c.p.selrow))}else{13===d.keyCode?(b(c).triggerHandler("jqGridKeyEnter",[c.p.selrow]),b.isFunction(f.onEnter)&&f.onEnter.call(c,c.p.selrow)):32===d.keyCode&&(b(c).triggerHandler("jqGridKeySpace",[c.p.selrow]),b.isFunction(f.onSpace)&&f.onSpace.call(c,c.p.selrow))}}})})},unbindKeys:function(){return this.each(function(){b(this).unbind("keydown")})},getLocalRow:function(d){var f=!1,c;this.each(function(){void 0!==d&&(c=this.p._index[b.jgrid.stripPref(this.p.idPrefix,d)],0<=c&&(f=this.p.data[c]))});return f}})})(jQuery);(function(A){A.fmatter={};A.extend(A.fmatter,{isBoolean:function(B){return"boolean"===typeof B},isObject:function(B){return B&&("object"===typeof B||A.isFunction(B))||!1},isString:function(B){return"string"===typeof B},isNumber:function(B){return"number"===typeof B&&isFinite(B)},isValue:function(B){return this.isObject(B)||this.isString(B)||this.isNumber(B)||this.isBoolean(B)},isEmpty:function(B){if(!this.isString(B)&&this.isValue(B)){return !1}if(!this.isValue(B)){return !0}B=A.trim(B).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return""===B}});A.fn.fmatter=function(G,F,C,D,H){var B=F,C=A.extend({},A.jgrid.formatter,C);try{B=A.fn.fmatter[G].call(this,F,C,D,H)}catch(E){}return B};A.fmatter.util={NumberFormat:function(G,F){A.fmatter.isNumber(G)||(G*=1);if(A.fmatter.isNumber(G)){var J=0>G,B=""+G,H=F.decimalSeparator||".",I;if(A.fmatter.isNumber(F.decimalPlaces)){var D=F.decimalPlaces,B=Math.pow(10,D),B=""+Math.round(G*B)/B;I=B.lastIndexOf(".");if(0<D){0>I?(B+=H,I=B.length-1):"."!==H&&(B=B.replace(".",H));for(;B.length-1-I<D;){B+="0"}}}if(F.thousandsSeparator){D=F.thousandsSeparator;I=B.lastIndexOf(H);I=-1<I?I:B.length;var H=B.substring(I),C=-1,E;for(E=I;0<E;E--){C++;if(0===C%3&&E!==I&&(!J||1<E)){H=D+H}H=B.charAt(E-1)+H}B=H}B=F.prefix?F.prefix+B:B;return B=F.suffix?B+F.suffix:B}return G}};A.fn.fmatter.defaultFormat=function(C,B){return A.fmatter.isValue(C)&&""!==C?C:B.defaultValue||"&#160;"};A.fn.fmatter.email=function(C,B){return !A.fmatter.isEmpty(C)?'<a href="mailto:'+C+'">'+C+"</a>":A.fn.fmatter.defaultFormat(C,B)};A.fn.fmatter.checkbox=function(E,D){var B=A.extend({},D.checkbox),C;void 0!==D.colModel&&void 0!==D.colModel.formatoptions&&(B=A.extend({},B,D.colModel.formatoptions));C=!0===B.disabled?'disabled="disabled"':"";if(A.fmatter.isEmpty(E)||void 0===E){E=A.fn.fmatter.defaultFormat(E,B)}E=(""+E).toLowerCase();return'<input type="checkbox" '+(0>E.search(/(false|f|0|no|n|off|undefined)/i)?" checked='checked' ":"")+' value="'+E+'" offval="no" '+C+"/>"};A.fn.fmatter.link=function(E,D){var B={target:D.target},C="";void 0!==D.colModel&&void 0!==D.colModel.formatoptions&&(B=A.extend({},B,D.colModel.formatoptions));B.target&&(C="target="+B.target);return !A.fmatter.isEmpty(E)?"<a "+C+' href="'+E+'">'+E+"</a>":A.fn.fmatter.defaultFormat(E,D)};A.fn.fmatter.showlink=function(E,D){var B={baseLinkUrl:D.baseLinkUrl,showAction:D.showAction,addParam:D.addParam||"",target:D.target,idName:D.idName},C="";void 0!==D.colModel&&void 0!==D.colModel.formatoptions&&(B=A.extend({},B,D.colModel.formatoptions));B.target&&(C="target="+B.target);B=B.baseLinkUrl+B.showAction+"?"+B.idName+"="+D.rowId+B.addParam;return A.fmatter.isString(E)||A.fmatter.isNumber(E)?"<a "+C+' href="'+B+'">'+E+"</a>":A.fn.fmatter.defaultFormat(E,D)};A.fn.fmatter.integer=function(D,C){var B=A.extend({},C.integer);void 0!==C.colModel&&void 0!==C.colModel.formatoptions&&(B=A.extend({},B,C.colModel.formatoptions));return A.fmatter.isEmpty(D)?B.defaultValue:A.fmatter.util.NumberFormat(D,B)};A.fn.fmatter.number=function(D,C){var B=A.extend({},C.number);void 0!==C.colModel&&void 0!==C.colModel.formatoptions&&(B=A.extend({},B,C.colModel.formatoptions));return A.fmatter.isEmpty(D)?B.defaultValue:A.fmatter.util.NumberFormat(D,B)};A.fn.fmatter.currency=function(D,C){var B=A.extend({},C.currency);void 0!==C.colModel&&void 0!==C.colModel.formatoptions&&(B=A.extend({},B,C.colModel.formatoptions));return A.fmatter.isEmpty(D)?B.defaultValue:A.fmatter.util.NumberFormat(D,B)};A.fn.fmatter.date=function(E,D,B,C){B=A.extend({},D.date);void 0!==D.colModel&&void 0!==D.colModel.formatoptions&&(B=A.extend({},B,D.colModel.formatoptions));return !B.reformatAfterEdit&&"edit"===C?A.fn.fmatter.defaultFormat(E,D):!A.fmatter.isEmpty(E)?A.jgrid.parseDate(B.srcformat,E,B.newformat,B):A.fn.fmatter.defaultFormat(E,D)};A.fn.fmatter.select=function(I,H){var I=""+I,L=!1,B=[],J,K;void 0!==H.colModel.formatoptions?(L=H.colModel.formatoptions.value,J=void 0===H.colModel.formatoptions.separator?":":H.colModel.formatoptions.separator,K=void 0===H.colModel.formatoptions.delimiter?";":H.colModel.formatoptions.delimiter):void 0!==H.colModel.editoptions&&(L=H.colModel.editoptions.value,J=void 0===H.colModel.editoptions.separator?":":H.colModel.editoptions.separator,K=void 0===H.colModel.editoptions.delimiter?";":H.colModel.editoptions.delimiter);if(L){var E=!0===H.colModel.editoptions.multiple?!0:!1,C=[];E&&(C=I.split(","),C=A.map(C,function(M){return A.trim(M)}));if(A.fmatter.isString(L)){var F=L.split(K),D=0,G;for(G=0;G<F.length;G++){if(K=F[G].split(J),2<K.length&&(K[1]=A.map(K,function(N,M){if(M>0){return N}}).join(J)),E){-1<A.inArray(K[0],C)&&(B[D]=K[1],D++)}else{if(A.trim(K[0])===A.trim(I)){B[0]=K[1];break}}}}else{A.fmatter.isObject(L)&&(E?B=A.map(C,function(M){return L[M]}):B[0]=L[I]||"")}}I=B.join(", ");return""===I?A.fn.fmatter.defaultFormat(I,H):I};A.fn.fmatter.rowactions=function(H){var G=A(this).closest("tr.jqgrow"),K=G.attr("id"),B=A(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),B=A("#"+B),I=B[0],J=I.p,E=J.colModel[A.jgrid.getCellIndex(this)],C=E.frozen?A("tr#"+K+" td:eq("+A.jgrid.getCellIndex(this)+") > div",B):A(this).parent(),F={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null,restoreAfterError:!0,mtype:"POST",delOptions:{},editOptions:{}},D=function(L){A.isFunction(F.afterRestore)&&F.afterRestore.call(I,L);C.find("div.ui-inline-edit,div.ui-inline-del").show();C.find("div.ui-inline-save,div.ui-inline-cancel").hide()};void 0!==E.formatoptions&&(F=A.extend(F,E.formatoptions));void 0!==J.editOptions&&(F.editOptions=J.editOptions);void 0!==J.delOptions&&(F.delOptions=J.delOptions);G.hasClass("jqgrid-new-row")&&(F.extraparam[J.prmNames.oper]=J.prmNames.addoper);G={keys:F.keys,oneditfunc:F.onEdit,successfunc:F.onSuccess,url:F.url,extraparam:F.extraparam,aftersavefunc:function(L,M){A.isFunction(F.afterSave)&&F.afterSave.call(I,L,M);C.find("div.ui-inline-edit,div.ui-inline-del").show();C.find("div.ui-inline-save,div.ui-inline-cancel").hide()},errorfunc:F.onError,afterrestorefunc:D,restoreAfterError:F.restoreAfterError,mtype:F.mtype};switch(H){case"edit":B.jqGrid("editRow",K,G);C.find("div.ui-inline-edit,div.ui-inline-del").hide();C.find("div.ui-inline-save,div.ui-inline-cancel").show();B.triggerHandler("jqGridAfterGridComplete");break;case"save":B.jqGrid("saveRow",K,G)&&(C.find("div.ui-inline-edit,div.ui-inline-del").show(),C.find("div.ui-inline-save,div.ui-inline-cancel").hide(),B.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":B.jqGrid("restoreRow",K,D);C.find("div.ui-inline-edit,div.ui-inline-del").show();C.find("div.ui-inline-save,div.ui-inline-cancel").hide();B.triggerHandler("jqGridAfterGridComplete");break;case"del":B.jqGrid("delGridRow",K,F.delOptions);break;case"formedit":B.jqGrid("setSelection",K),B.jqGrid("editGridRow",K,F.editOptions)}};A.fn.fmatter.actions=function(E,D){var B={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},C=D.rowId,F="";void 0!==D.colModel.formatoptions&&(B=A.extend(B,D.colModel.formatoptions));if(void 0===C||A.fmatter.isEmpty(C)){return""}B.editformbutton?F+="<div title='"+A.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+("id='jEditButton_"+C+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-pencil'></span></div>":B.editbutton&&(F+="<div title='"+A.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+("id='jEditButton_"+C+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ")+"><span class='ui-icon ui-icon-pencil'></span></div>");B.delbutton&&(F+="<div title='"+A.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+("id='jDeleteButton_"+C+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon fa fa-trash-o red'></span></div>");F+="<div title='"+A.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+("id='jSaveButton_"+C+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-disk'></span></div>";F+="<div title='"+A.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+("id='jCancelButton_"+C+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ")+"><span class='ui-icon ui-icon-cancel'></span></div>";return"<div style='margin-left:8px;'>"+F+"</div>"};A.unformat=function(G,F,J,B){var H,I=F.colModel.formatter,D=F.colModel.formatoptions||{},C=/([\.\*\_\'\(\)\{\}\+\?\\])/g,E=F.colModel.unformat||A.fn.fmatter[I]&&A.fn.fmatter[I].unformat;if(void 0!==E&&A.isFunction(E)){H=E.call(this,A(G).text(),F,G)}else{if(void 0!==I&&A.fmatter.isString(I)){switch(H=A.jgrid.formatter||{},I){case"integer":D=A.extend({},H.integer,D);F=D.thousandsSeparator.replace(C,"\\$1");H=A(G).text().replace(RegExp(F,"g"),"");break;case"number":D=A.extend({},H.number,D);F=D.thousandsSeparator.replace(C,"\\$1");H=A(G).text().replace(RegExp(F,"g"),"").replace(D.decimalSeparator,".");break;case"currency":D=A.extend({},H.currency,D);F=D.thousandsSeparator.replace(C,"\\$1");F=RegExp(F,"g");H=A(G).text();D.prefix&&D.prefix.length&&(H=H.substr(D.prefix.length));D.suffix&&D.suffix.length&&(H=H.substr(0,H.length-D.suffix.length));H=H.replace(F,"").replace(D.decimalSeparator,".");break;case"checkbox":D=F.colModel.editoptions?F.colModel.editoptions.value.split(":"):["Yes","No"];H=A("input",G).is(":checked")?D[0]:D[1];break;case"select":H=A.unformat.select(G,F,J,B);break;case"actions":return"";default:H=A(G).text()}}}return void 0!==H?H:!0===B?A(G).text():A.jgrid.htmlDecode(A(G).html())};A.unformat.select=function(H,G,K,B){K=[];H=A(H).text();if(!0===B){return H}var B=A.extend({},void 0!==G.colModel.formatoptions?G.colModel.formatoptions:G.colModel.editoptions),G=void 0===B.separator?":":B.separator,I=void 0===B.delimiter?";":B.delimiter;if(B.value){var J=B.value,B=!0===B.multiple?!0:!1,E=[];B&&(E=H.split(","),E=A.map(E,function(L){return A.trim(L)}));if(A.fmatter.isString(J)){var C=J.split(I),F=0,D;for(D=0;D<C.length;D++){if(I=C[D].split(G),2<I.length&&(I[1]=A.map(I,function(M,L){if(L>0){return M}}).join(G)),B){-1<A.inArray(I[1],E)&&(K[F]=I[0],F++)}else{if(A.trim(I[1])===A.trim(H)){K[0]=I[0];break}}}}else{if(A.fmatter.isObject(J)||A.isArray(J)){B||(E[0]=H),K=A.map(E,function(L){var M;A.each(J,function(O,N){if(N===L){M=O;return false}});if(M!==void 0){return M}})}}return K.join(", ")}return H||""};A.unformat.date=function(D,C){var B=A.jgrid.formatter.date||{};void 0!==C.formatoptions&&(B=A.extend({},B,C.formatoptions));return !A.fmatter.isEmpty(D)?A.jgrid.parseDate(B.newformat,D,B.srcformat,B):A.fn.fmatter.defaultFormat(D,C)}})(jQuery);(function(A){A.jgrid.extend({getColProp:function(D){var C={},E=this[0];if(!E.grid){return !1}var E=E.p.colModel,B;for(B=0; B<E.length; B++){if(E[B].name===D){C=E[B];break}}return C},setColProp:function(B, C){return this.each(function(){if(this.grid&&C){var E=this.p.colModel,D;for(D=0; D<E.length; D++){if(E[D].name===B){A.extend(!0,this.p.colModel[D],C);break}}}})},sortGrid:function(C, B, D){return this.each(function(){var E=-1,F;if(this.grid){C||(C=this.p.sortname);for(F=0; F<this.p.colModel.length; F++){if(this.p.colModel[F].register===C||this.p.colModel[F].name===C){E=F;break}}-1!==E&&(F=this.p.colModel[E].sortable,"boolean"!==typeof F&&(F=!0),"boolean"!==typeof B&&(B=!1),F&&this.sortData("jqgh_"+this.p.id+"_"+C,E,B,D))}})},clearBeforeUnload:function(){return this.each(function(){var B=this.grid;B.emptyRows.call(this,!0,!0);A(B.hDiv).unbind("mousemove");A(this).unbind();B.dragEnd=null;B.dragMove=null;B.dragStart=null;B.emptyRows=null;B.populate=null;B.populateVisible=null;B.scrollGrid=null;B.selectionPreserver=null;B.bDiv=null;B.cDiv=null;B.hDiv=null;B.cols=null;var C,D=B.headers.length;for(C=0;C<D;C++){B.headers[C].el=null}this.addJSONData=this.addXmlData=this.formatter=this.constructTr=this.setHeadCheckBox=this.refreshIndex=this.updatepager=this.sortData=this.formatCol=null})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&A(this.p.pager).remove();try{A(this).jqGrid("clearBeforeUnload"),A("#gbox_"+A.jgrid.jqID(this.id)).remove()}catch(B){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var B=A(this).attr("id"),C=A(this).attr("class");this.p.pager&&A(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom");var D=document.createElement("table");A(D).attr({id:B});D.className=C;B=A.jgrid.jqID(this.id);A(D).removeClass("ui-jqgrid-btable");1===A(this.p.pager).parents("#gbox_"+B).length?(A(D).insertBefore("#gbox_"+B).show(),A(this.p.pager).insertBefore("#gbox_"+B)):A(D).insertBefore("#gbox_"+B).show();A(this).jqGrid("clearBeforeUnload");A("#gbox_"+B).remove()}})},setGridState:function(B){return this.each(function(){this.grid&&("hidden"===B?(A(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+A.jgrid.jqID(this.p.id)).slideUp("fast"),this.p.pager&&A(this.p.pager).slideUp("fast"),this.p.toppager&&A(this.p.toppager).slideUp("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&A(this.grid.ubDiv).slideUp("fast"),A(this.grid.uDiv).slideUp("fast")),this.p.footerrow&&A(".ui-jqgrid-sdiv","#gbox_"+A.jgrid.jqID(this.p.id)).slideUp("fast"),A(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),this.p.gridstate="hidden"):"visible"===B&&(A(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+A.jgrid.jqID(this.p.id)).slideDown("fast"),this.p.pager&&A(this.p.pager).slideDown("fast"),this.p.toppager&&A(this.p.toppager).slideDown("fast"),!0===this.p.toolbar[0]&&("both"===this.p.toolbar[1]&&A(this.grid.ubDiv).slideDown("fast"),A(this.grid.uDiv).slideDown("fast")),this.p.footerrow&&A(".ui-jqgrid-sdiv","#gbox_"+A.jgrid.jqID(this.p.id)).slideDown("fast"),A(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),this.p.gridstate="visible"))})},filterToolbar:function(B){B=A.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,operandTitle:"Click to select search operation.",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},A.jgrid.search,B||{});return this.each(function(){var E=this;if(!this.ftoolbar){var G=function(){var H={},R=0,P,O,I={},M;A.each(E.p.colModel,function(){var S=A("#gs_"+A.jgrid.jqID(this.name),!0===this.frozen&&!0===E.p.frozenColumns?E.grid.fhDiv:E.grid.hDiv);O=this.register||this.name;M=B.searchOperators?S.parent().prev().children("a").attr("soper")||B.defaultSearch:this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"===this.stype?"eq":B.defaultSearch;if((P="custom"===this.stype&&A.isFunction(this.searchoptions.custom_value)&&0<S.length&&"SPAN"===S[0].nodeName.toUpperCase()?this.searchoptions.custom_value.call(E,S.children(".customelement:first"),"get"):S.val())||"nu"===M||"nn"===M){H[O]=P,I[O]=M,R++}else{try{delete E.p.postData[O]}catch(T){}}});var L=0<R?!0:!1;if(!0===B.stringResult||"local"===E.p.datatype){var J='{"groupOp":"'+B.groupOp+'","rules":[',K=0;A.each(H,function(T,S){0<K&&(J+=",");J+='{"field":"'+T+'",';J+='"op":"'+I[T]+'",';J+='"data":"'+(S+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';K++});J+="]}";A.extend(E.p.postData,{filters:J});A.each(["searchField","searchString","searchOper"],function(T,S){E.p.postData.hasOwnProperty(S)&&delete E.p.postData[S]})}else{A.extend(E.p.postData,H)}var Q;E.p.searchurl&&(Q=E.p.url,A(E).jqGrid("setGridParam",{url:E.p.searchurl}));var N="stop"===A(E).triggerHandler("jqGridToolbarBeforeSearch")?!0:!1;!N&&A.isFunction(B.beforeSearch)&&(N=B.beforeSearch.call(E));N||A(E).jqGrid("setGridParam",{search:L}).trigger("reloadGrid",[{page:1}]);Q&&A(E).jqGrid("setGridParam",{url:Q});A(E).triggerHandler("jqGridToolbarAfterSearch");A.isFunction(B.afterSearch)&&B.afterSearch.call(E)},C=function(H,O,I){A("#sopt_menu").remove();var O=parseInt(O,10),I=parseInt(I,10)+18,O='<ul id="sopt_menu" class="ui-search-menu" role="menu" tabindex="0" style="font-size:'+(A(".ui-jqgrid-view").css("font-size")||"11px")+";left:"+O+"px;top:"+I+'px;">',I=A(H).attr("soper"),N,K=[],M,L=0,J=A(H).attr("colname");for(N=E.p.colModel.length;L<N&&E.p.colModel[L].name!==J;){L++}L=E.p.colModel[L];J=A.extend({},L.searchoptions);J.sopt||(J.sopt=[],J.sopt[0]="select"===L.stype?"eq":B.defaultSearch);A.each(B.odata,function(){K.push(this.oper)});for(L=0;L<J.sopt.length;L++){M=A.inArray(J.sopt[L],K),-1!==M&&(N=I===B.odata[M].oper?"ui-state-highlight":"",O+='<li class="ui-menu-item '+N+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+B.odata[M].oper+'" oper="'+B.operands[B.odata[M].oper]+'"><table cellspacing="0" cellpadding="0" border="0"><tr><td width="25px">'+B.operands[B.odata[M].oper]+"</td><td>"+B.odata[M].text+"</td></tr></table></a></li>")}A("body").append(O+"</ul>");A("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all");A("#sopt_menu > li > a").hover(function(){A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")}).click(function(){var P=A(this).attr("value"),Q=A(this).attr("oper");A(E).triggerHandler("jqGridToolbarSelectOper",[P,Q,H]);A("#sopt_menu").hide();A(H).text(Q).attr("soper",P);if(B.autosearch===true){Q=A(H).parent().next().children()[0];(A(Q).val()||P==="nu"||P==="nn")&&G()}})},F=A("<tr class='ui-search-toolbar' role='rowheader'></tr>"),D;A.each(E.p.colModel,function(){var H=this,U,T;T="";var Q="=",I,O=A("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+E.p.direction+"'></th>"),N=A("<div style='position:relative;height:100%;padding-right:0.3em;padding-left:0.3em;'></div>"),M=A("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td></tr></table>");!0===this.hidden&&A(O).css("display","none");this.search=!1===this.search?!1:!0;void 0===this.stype&&(this.stype="text");U=A.extend({},this.searchoptions||{});if(this.search){if(B.searchOperators){T=U.sopt?U.sopt[0]:"select"===H.stype?"eq":B.defaultSearch;for(I=0;I<B.odata.length;I++){if(B.odata[I].oper===T){Q=B.operands[T]||"";break}}T="<a title='"+(null!=U.searchtitle?U.searchtitle:B.operandTitle)+"' style='padding-right: 0.5em;' soper='"+T+"' class='soptclass' colname='"+this.name+"'>"+Q+"</a>"}A("td:eq(0)",M).append(T);switch(this.stype){case"select":if(T=this.surl||U.dataUrl){A.ajax(A.extend({url:T,dataType:"html",success:function(V){if(U.buildSelect!==void 0){if(V=U.buildSelect(V)){A("td:eq(1)",M).append(V);A(N).append(M)}}else{A("td:eq(1)",M).append(V);A(N).append(M)}U.defaultValue!==void 0&&A("select",N).val(U.defaultValue);A("select",N).attr({name:H.register||H.name,id:"gs_"+H.name});U.attr&&A("select",N).attr(U.attr);A("select",N).css({width:"100%"});A.jgrid.bindEv.call(E,A("select",N)[0],U);B.autosearch===true&&A("select",N).change(function(){G();return false});V=null}},A.jgrid.ajaxOptions,E.p.ajaxSelectOptions||{}))}else{var R,J,P;H.searchoptions?(R=void 0===H.searchoptions.value?"":H.searchoptions.value,J=void 0===H.searchoptions.separator?":":H.searchoptions.separator,P=void 0===H.searchoptions.delimiter?";":H.searchoptions.delimiter):H.editoptions&&(R=void 0===H.editoptions.value?"":H.editoptions.value,J=void 0===H.editoptions.separator?":":H.editoptions.separator,P=void 0===H.editoptions.delimiter?";":H.editoptions.delimiter);if(R){Q=document.createElement("select");Q.style.width="100%";A(Q).attr({name:H.register||H.name,id:"gs_"+H.name});var K;if("string"===typeof R){T=R.split(P);for(K=0; K<T.length; K++){R=T[K].split(J),P=document.createElement("option"),P.value=R[0],P.innerHTML=R[1],Q.appendChild(P)}}else{if("object"===typeof R){for(K in R){R.hasOwnProperty(K)&&(P=document.createElement("option"),P.value=K,P.innerHTML=R[K],Q.appendChild(P))}}}void 0!==U.defaultValue&&A(Q).val(U.defaultValue);U.attr&&A(Q).attr(U.attr);A.jgrid.bindEv.call(E,Q,U);A("td:eq(1)",M).append(Q);A(N).append(M);!0===B.autosearch&&A(Q).change(function(){G();return false})}}break;case"text":J=void 0!==U.defaultValue?U.defaultValue:"";A("td:eq(1)",M).append("<input type='text' style='width:100%;padding:0px;' name='"+(H.register||H.name)+"' id='gs_"+H.name+"' value='"+J+"'/>");A(N).append(M);U.attr&&A("input",N).attr(U.attr);A.jgrid.bindEv.call(E,A("input",N)[0],U);!0===B.autosearch&&(B.searchOnEnter?A("input",N).keypress(function(V){if((V.charCode||V.keyCode||0)===13){G();return false}return this}):A("input",N).keydown(function(V){switch(V.which){case 13:return false;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:D&&clearTimeout(D);D=setTimeout(function(){G()},500)}}));break;case"custom":A("td:eq(1)",M).append("<span style='width:95%;padding:0px;' name='"+(H.register||H.name)+"' id='gs_"+H.name+"'/>");A(N).append(M);try{if(A.isFunction(U.custom_element)){var L=U.custom_element.call(E,void 0!==U.defaultValue?U.defaultValue:"",U);if(L){L=A(L).addClass("customelement"),A(N).find(">span").append(L)}else{throw"e2"}}else{throw"e1"}}catch(S){"e1"===S&&A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_element' "+A.jgrid.edit.msg.nodefined,A.jgrid.edit.bClose),"e2"===S?A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_element' "+A.jgrid.edit.msg.novalue,A.jgrid.edit.bClose):A.jgrid.info_dialog(A.jgrid.errors.errcap,"string"===typeof S?S:S.message,A.jgrid.edit.bClose)}}}A(O).append(N);A(F).append(O);B.searchOperators||A("td:eq(0)",M).hide()});A("table thead",E.grid.hDiv).append(F);B.searchOperators&&(A(".soptclass").click(function(H){var I=A(this).offset();C(this,I.left,I.top);H.stopPropagation()}),A("body").on("click",function(H){"soptclass"!==H.target.className&&A("#sopt_menu").hide()}));this.ftoolbar=!0;this.triggerToolbar=G;this.clearToolbar=function(H){var P={},N=0,O,H=typeof H!=="boolean"?true:H;A.each(E.p.colModel,function(){var T,S=A("#gs_"+A.jgrid.jqID(this.name),this.frozen===true&&E.p.frozenColumns===true?E.grid.fhDiv:E.grid.hDiv);if(this.searchoptions&&this.searchoptions.defaultValue!==void 0){T=this.searchoptions.defaultValue}O=this.register||this.name;switch(this.stype){case"select":S.find("option").each(function(U){if(U===0){this.selected=true}if(A(this).val()===T){this.selected=true;return false}});if(T!==void 0){P[O]=T;N++}else{try{delete E.p.postData[O]}catch(R){}}break;case"text":S.val(T);if(T!==void 0){P[O]=T;N++}else{try{delete E.p.postData[O]}catch(Q){}}break;case"custom":A.isFunction(this.searchoptions.custom_value)&&S.length>0&&S[0].nodeName.toUpperCase()==="SPAN"&&this.searchoptions.custom_value.call(E,S.children(".customelement:first"),"set",T)}});var I=N>0?true:false;if(B.stringResult===true||E.p.datatype==="local"){var K='{"groupOp":"'+B.groupOp+'","rules":[',L=0;A.each(P,function(R,Q){L>0&&(K=K+",");K=K+('{"field":"'+R+'",');K=K+'"op":"eq",';K=K+('"data":"'+(Q+"").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}');L++});K=K+"]}";A.extend(E.p.postData,{filters:K});A.each(["searchField","searchString","searchOper"],function(R,Q){E.p.postData.hasOwnProperty(Q)&&delete E.p.postData[Q]})}else{A.extend(E.p.postData,P)}var J;if(E.p.searchurl){J=E.p.url;A(E).jqGrid("setGridParam",{url:E.p.searchurl})}var M=A(E).triggerHandler("jqGridToolbarBeforeClear")==="stop"?true:false;!M&&A.isFunction(B.beforeClear)&&(M=B.beforeClear.call(E));M||H&&A(E).jqGrid("setGridParam",{search:I}).trigger("reloadGrid",[{page:1}]);J&&A(E).jqGrid("setGridParam",{url:J});A(E).triggerHandler("jqGridToolbarAfterClear");A.isFunction(B.afterClear)&&B.afterClear()};this.toggleToolbar=function(){var I=A("tr.ui-search-toolbar",E.grid.hDiv),H=E.p.frozenColumns===true?A("tr.ui-search-toolbar",E.grid.fhDiv):false;if(I.css("display")==="none"){I.show();H&&H.show()}else{I.hide();H&&H.hide()}}}})},destroyFilterToolbar:function(){return this.each(function(){this.ftoolbar&&(this.toggleToolbar=this.clearToolbar=this.triggerToolbar=null,this.ftoolbar=!1,A(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},destroyGroupHeader:function(B){void 0===B&&(B=!0);return this.each(function(){var H,I,J,E,F,C;I=this.grid;var K=A("table.ui-jqgrid-htable thead",I.hDiv),D=this.p.colModel;if(I){A(this).unbind(".setGroupHeaders");H=A("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels");E=I.headers;I=0;for(J=E.length;I<J;I++){F=D[I].hidden?"none":"";F=A(E[I].el).width(E[I].width).css("display",F);try{F.removeAttr("rowSpan")}catch(G){F.attr("rowSpan",1)}H.append(F);C=F.children("span.ui-jqgrid-resize");0<C.length&&(C[0].style.height="");F.children("div")[0].style.top=""}A(K).children("tr.ui-jqgrid-labels").remove();A(K).prepend(H);!0===B&&A(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(B){B=A.extend({useColSpanStyle:!1,groupHeaders:[]},B||{});return this.each(function(){this.p.groupHeader=B;var O,P,Q=0,G,I,C,R,E,M=this.p.colModel,D=M.length,K=this.grid.headers,J=A("table.ui-jqgrid-htable",this.grid.hDiv),H=J.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header");G=J.children("thead");var N=J.find(".jqg-first-row-header");void 0===N[0]?N=A("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):N.empty();var F,L=function(V,T){var U=T.length,S;for(S=0;S<U;S++){if(T[S].startColumnName===V){return S}}return -1};A(this).prepend(G);G=A("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header");for(O=0;O<D;O++){if(C=K[O].el,R=A(C),P=M[O],I={height:"0px",width:K[O].width+"px",display:P.hidden?"none":""},A("<th>",{role:"gridcell"}).css(I).addClass("ui-first-th-"+this.p.direction).appendTo(N),C.style.width="",I=L(P.name,B.groupHeaders),0<=I){I=B.groupHeaders[I];Q=I.numberOfColumns;E=I.titleText;for(I=P=0;I<Q&&O+I<D;I++){M[O+I].hidden||P++}I=A("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({height:"22px","border-top":"0px none"}).html(E);0<P&&I.attr("colspan",""+P);this.p.headertitles&&I.attr("title",I.text());0===P&&I.hide();R.before(I);G.append(C);Q-=1}else{0===Q?B.useColSpanStyle?R.attr("rowspan","2"):(A("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+this.p.direction).css({display:P.hidden?"none":"","border-top":"0px none"}).insertBefore(R),G.append(C)):(G.append(C),Q--)}}M=A(this).children("thead");M.prepend(N);G.insertAfter(H);J.append(M);B.useColSpanStyle&&(J.find("span.ui-jqgrid-resize").each(function(){var S=A(this).parent();S.is(":visible")&&(this.style.cssText="height: "+S.height()+"px !important; cursor: col-resize;")}),J.find("div.ui-jqgrid-sortable").each(function(){var S=A(this),T=S.parent();T.is(":visible")&&T.is(":has(span.ui-jqgrid-resize)")&&S.css("top",(T.height()-S.outerHeight())/2+"px")}));F=M.find("tr.jqg-first-row-header");A(this).bind("jqGridResizeStop.setGroupHeaders",function(U,S,T){F.find("th").eq(T).width(S)})})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var G=this,H=G.p.colModel,I=0,J=H.length,D=-1,E=!1;if(!(!0===G.p.subGrid||!0===G.p.treeGrid||!0===G.p.cellEdit||G.p.sortable||G.p.scroll||G.p.grouping)){G.p.rownumbers&&I++;for(G.p.multiselect&&I++;I<J;){if(!0===H[I].frozen){E=!0,D=I}else{break}I++}if(0<=D&&E){H=G.p.caption?A(G.grid.cDiv).outerHeight():0;I=A(".ui-jqgrid-htable","#gview_"+A.jgrid.jqID(G.p.id)).height();G.p.toppager&&(H+=A(G.grid.topDiv).outerHeight());!0===G.p.toolbar[0]&&"bottom"!==G.p.toolbar[1]&&(H+=A(G.grid.uDiv).outerHeight());G.grid.fhDiv=A('<div style="position:absolute;left:0px;top:'+H+"px;height:"+I+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>');G.grid.fbDiv=A('<div style="position:absolute;left:0px;top:'+(parseInt(H,10)+parseInt(I,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>');A("#gview_"+A.jgrid.jqID(G.p.id)).append(G.grid.fhDiv);H=A(".ui-jqgrid-htable","#gview_"+A.jgrid.jqID(G.p.id)).clone(!0);if(G.p.groupHeader){A("tr.jqg-first-row-header, tr.jqg-third-row-header",H).each(function(){A("th:gt("+D+")",this).remove()});var B=-1,K=-1,C,F;A("tr.jqg-second-row-header th",H).each(function(){C=parseInt(A(this).attr("colspan"),10);if(F=parseInt(A(this).attr("rowspan"),10)){B++,K++}C&&(B+=C,K++);if(B===D){return !1}});B!==D&&(K=D);A("tr.jqg-second-row-header",H).each(function(){A("th:gt("+K+")",this).remove()})}else{A("tr",H).each(function(){A("th:gt("+D+")",this).remove()})}A(H).width(1);A(G.grid.fhDiv).append(H).mousemove(function(L){if(G.grid.resizing){return G.grid.dragMove(L),!1}});A(G).bind("jqGridResizeStop.setFrozenColumns",function(N,L,M){N=A(".ui-jqgrid-htable",G.grid.fhDiv);A("th:eq("+M+")",N).width(L);N=A(".ui-jqgrid-btable",G.grid.fbDiv);A("tr:first td:eq("+M+")",N).width(L)});A(G).bind("jqGridOnSortCol.setFrozenColumns",function(N,L,M){N=A("tr.ui-jqgrid-labels:last th:eq("+G.p.lastsort+")",G.grid.fhDiv);L=A("tr.ui-jqgrid-labels:last th:eq("+M+")",G.grid.fhDiv);A("span.ui-grid-ico-sort",N).addClass("ui-state-disabled");A(N).attr("aria-selected","false");A("span.ui-icon-"+G.p.sortorder,L).removeClass("ui-state-disabled");A(L).attr("aria-selected","true");!G.p.viewsortcols[0]&&G.p.lastsort!==M&&(A("span.s-ico",N).hide(),A("span.s-ico",L).show())});A("#gview_"+A.jgrid.jqID(G.p.id)).append(G.grid.fbDiv);A(G.grid.bDiv).scroll(function(){A(G.grid.fbDiv).scrollTop(A(this).scrollTop())});!0===G.p.hoverrows&&A("#"+A.jgrid.jqID(G.p.id)).unbind("mouseover").unbind("mouseout");A(G).bind("jqGridAfterGridComplete.setFrozenColumns",function(){A("#"+A.jgrid.jqID(G.p.id)+"_frozen").remove();A(G.grid.fbDiv).height(A(G.grid.bDiv).height()-16);var L=A("#"+A.jgrid.jqID(G.p.id)).clone(!0);A("tr",L).each(function(){A("td:gt("+D+")",this).remove()});A(L).width(1).attr("id",G.p.id+"_frozen");A(G.grid.fbDiv).append(L);!0===G.p.hoverrows&&(A("tr.jqgrow",L).hover(function(){A(this).addClass("ui-state-hover");A("#"+A.jgrid.jqID(this.id),"#"+A.jgrid.jqID(G.p.id)).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover");A("#"+A.jgrid.jqID(this.id),"#"+A.jgrid.jqID(G.p.id)).removeClass("ui-state-hover")}),A("tr.jqgrow","#"+A.jgrid.jqID(G.p.id)).hover(function(){A(this).addClass("ui-state-hover");A("#"+A.jgrid.jqID(this.id),"#"+A.jgrid.jqID(G.p.id)+"_frozen").addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover");A("#"+A.jgrid.jqID(this.id),"#"+A.jgrid.jqID(G.p.id)+"_frozen").removeClass("ui-state-hover")}));L=null});G.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&!0===this.p.frozenColumns){A(this.grid.fhDiv).remove();A(this.grid.fbDiv).remove();this.grid.fhDiv=null;this.grid.fbDiv=null;A(this).unbind(".setFrozenColumns");if(!0===this.p.hoverrows){var B;A("#"+A.jgrid.jqID(this.p.id)).bind("mouseover",function(C){B=A(C.target).closest("tr.jqgrow");"ui-subgrid"!==A(B).attr("class")&&A(B).addClass("ui-state-hover")}).bind("mouseout",function(C){B=A(C.target).closest("tr.jqgrow");A(B).removeClass("ui-state-hover")})}this.p.frozenColumns=!1}})}})})(jQuery);(function(A){A.extend(A.jgrid,{showModal:function(B){B.w.show()},closeModal:function(B){B.w.hide().attr("aria-hidden","true");B.o&&B.o.remove()},hideModal:function(C,D){D=A.extend({jqm:!0,gb:""},D||{});if(D.onClose){var E=D.gb&&"string"===typeof D.gb&&"#gbox_"===D.gb.substr(0,6)?D.onClose.call(A("#"+D.gb.substr(6))[0],C):D.onClose(C);if("boolean"===typeof E&&!E){return}}if(A.fn.jqm&&!0===D.jqm){A(C).attr("aria-hidden","true").jqmHide()}else{if(""!==D.gb){try{A(".jqgrid-overlay:first",D.gb).hide()}catch(B){}}A(C).hide().attr("aria-hidden","true")}},findPos:function(D){var B=0,C=0;if(D.offsetParent){do{B+=D.offsetLeft,C+=D.offsetTop}while(D=D.offsetParent)}return[B,C]},createModal:function(P,L,M,O,B,F,N){var M=A.extend(!0,{},A.jgrid.jqModal||{},M),G=document.createElement("div"),D,H=this,N=A.extend({},N||{});D="rtl"===A(M.gbox).attr("dir")?!0:!1;G.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";G.id=P.themodal;var E=document.createElement("div");E.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";E.id=P.modalhead;A(E).append("<span class='ui-jqdialog-title'>"+M.caption+"</span>");var J=A("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){J.addClass("ui-state-hover")},function(){J.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");A(E).append(J);D?(G.dir="rtl",A(".ui-jqdialog-title",E).css("float","right"),A(".ui-jqdialog-titlebar-close",E).css("left","0.3em")):(G.dir="ltr",A(".ui-jqdialog-title",E).css("float","left"),A(".ui-jqdialog-titlebar-close",E).css("right","0.3em"));var K=document.createElement("div");A(K).addClass("ui-jqdialog-content ui-widget-content").attr("id",P.modalcontent);A(K).append(L);G.appendChild(K);A(G).prepend(E);!0===F?A("body").append(G):"string"===typeof F?A(F).append(G):A(G).insertBefore(O);A(G).css(N);void 0===M.jqModal&&(M.jqModal=!0);L={};if(A.fn.jqm&&!0===M.jqModal){0===M.left&&0===M.top&&M.overlay&&(N=[],N=A.jgrid.findPos(B),M.left=N[0]+4,M.top=N[1]+4),L.top=M.top+"px",L.left=M.left}else{if(0!==M.left||0!==M.top){L.left=M.left,L.top=M.top+"px"}}A("a.ui-jqdialog-titlebar-close",E).click(function(){var R=A("#"+A.jgrid.jqID(P.themodal)).data("onClose")||M.onClose,Q=A("#"+A.jgrid.jqID(P.themodal)).data("gbox")||M.gbox;H.hideModal("#"+A.jgrid.jqID(P.themodal),{gb:Q,jqm:M.jqModal,onClose:R});return false});if(0===M.width||!M.width){M.width=300}if(0===M.height||!M.height){M.height=200}M.zIndex||(O=A(O).parents("*[role=dialog]").filter(":first").css("z-index"),M.zIndex=O?parseInt(O,10)+2:950);O=0;D&&L.left&&!F&&(O=A(M.gbox).width()-(!isNaN(M.width)?parseInt(M.width,10):0)-8,L.left=parseInt(L.left,10)+parseInt(O,10));L.left&&(L.left+="px");A(G).css(A.extend({width:isNaN(M.width)?"auto":M.width+"px",height:isNaN(M.height)?"auto":M.height+"px",zIndex:M.zIndex,overflow:"hidden"},L)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":P.modalhead,"aria-hidden":"true"});void 0===M.drag&&(M.drag=!0);void 0===M.resize&&(M.resize=!0);if(M.drag){if(A(E).css("cursor","move"),A.fn.jqDrag){A(G).jqDrag(E)}else{try{A(G).draggable({handle:A("#"+A.jgrid.jqID(E.id))})}catch(I){}}}if(M.resize){if(A.fn.jqResize){A(G).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se'></div>"),A("#"+A.jgrid.jqID(P.themodal)).jqResize(".jqResize",P.scrollelm?"#"+A.jgrid.jqID(P.scrollelm):!1)}else{try{A(G).resizable({handles:"se, sw",alsoResize:P.scrollelm?"#"+A.jgrid.jqID(P.scrollelm):!1})}catch(C){}}}!0===M.closeOnEscape&&A(G).keydown(function(Q){if(Q.which==27){Q=A("#"+A.jgrid.jqID(P.themodal)).data("onClose")||M.onClose;H.hideModal("#"+A.jgrid.jqID(P.themodal),{gb:M.gbox,jqm:M.jqModal,onClose:Q})}})},viewModal:function(B,C){C=A.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:A.jgrid.showModal,onHide:A.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},C||{});if(A.fn.jqm&&!0===C.jqm){C.jqM?A(B).attr("aria-hidden","false").jqm(C).jqmShow():A(B).attr("aria-hidden","false").jqmShow()}else{""!==C.gbox&&(A(".jqgrid-overlay:first",C.gbox).show(),A(B).data("gbox",C.gbox));A(B).show().attr("aria-hidden","false");try{A(":input:visible",B)[0].focus()}catch(D){}}},info_dialog:function(J,F,G,I){var B={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1000,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};A.extend(!0,B,A.jgrid.jqModal||{},{caption:"<b>"+J+"</b>"},I||{});var D=B.jqModal,H=this;A.fn.jqm&&!D&&(D=!1);J="";if(0<B.buttons.length){for(I=0;I<B.buttons.length;I++){void 0===B.buttons[I].id&&(B.buttons[I].id="info_button_"+I),J+="<a href='javascript:void(0)' id='"+B.buttons[I].id+"' class='fm-button ui-state-default ui-corner-all'>"+B.buttons[I].text+"</a>"}}I=isNaN(B.dataheight)?B.dataheight:B.dataheight+"px";F="<div id='info_id'>"+("<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+I+";"+("text-align:"+B.align+";")+"'>"+F+"</div>");F+=G?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+B.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+G+"</a>"+J+"</div>":""!==J?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+B.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+J+"</div>":"";F+="</div>";try{"false"===A("#info_dialog").attr("aria-hidden")&&A.jgrid.hideModal("#info_dialog",{jqm:D}),A("#info_dialog").remove()}catch(E){}A.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},F,B,"","",!0);J&&A.each(B.buttons,function(K){A("#"+A.jgrid.jqID(this.id),"#info_id").bind("click",function(){B.buttons[K].onClick.call(A("#info_dialog"));return !1})});A("#closedialog","#info_id").click(function(){H.hideModal("#info_dialog",{jqm:D,onClose:A("#info_dialog").data("onClose")||B.onClose,gb:A("#info_dialog").data("gbox")||B.gbox});return !1});A(".fm-button","#info_dialog").hover(function(){A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")});A.isFunction(B.beforeOpen)&&B.beforeOpen();A.jgrid.viewModal("#info_dialog",{onHide:function(K){K.w.hide().remove();K.o&&K.o.remove()},modal:B.modal,jqm:D});A.isFunction(B.afterOpen)&&B.afterOpen();try{A("#info_dialog").focus()}catch(C){}},bindEv:function(B,C){A.isFunction(C.dataInit)&&C.dataInit.call(this,B);C.dataEvents&&A.each(C.dataEvents,function(){void 0!==this.data?A(B).bind(this.type,this.data,this.fn):A(B).bind(this.type,this.fn)})},createEl:function(N,J,K,M,B){function E(O,Q,R){var P="dataInit,dataEvents,dataUrl,buildSelect,sopt,searchhidden,defaultValue,attr,custom_element,custom_value".split(",");void 0!==R&&A.isArray(R)&&A.merge(P,R);A.each(Q,function(S,T){-1===A.inArray(S,P)&&A(O).attr(S,T)});Q.hasOwnProperty("id")||A(O).attr("id",A.jgrid.randId())}var L="",F=this;switch(N){case"textarea":L=document.createElement("textarea");M?J.cols||A(L).css({width:"98%"}):J.cols||(J.cols=20);J.rows||(J.rows=2);if("&nbsp;"===K||"&#160;"===K||1===K.length&&160===K.charCodeAt(0)){K=""}L.value=K;E(L,J);A(L).attr({role:"textbox",multiline:"true"});break;case"checkbox":L=document.createElement("input");L.type="checkbox";J.value?(N=J.value.split(":"),K===N[0]&&(L.checked=!0,L.defaultChecked=!0),L.value=N[0],A(L).attr("offval",N[1])):(N=K.toLowerCase(),0>N.search(/(false|f|0|no|n|off|undefined)/i)&&""!==N?(L.checked=!0,L.defaultChecked=!0,L.value=K):L.value="on",A(L).attr("offval","off"));E(L,J,["value"]);A(L).attr("role","checkbox");break;case"select":L=document.createElement("select");L.setAttribute("role","select");M=[];!0===J.multiple?(N=!0,L.multiple="multiple",A(L).attr("aria-multiselectable","true")):N=!1;if(void 0!==J.dataUrl){N=J.name?(""+J.id).substring(0,(""+J.id).length-(""+J.name).length-1):""+J.id,M=J.postData||B.postData,F.p&&F.p.idPrefix?N=A.jgrid.stripPref(F.p.idPrefix,N):M=void 0,A.ajax(A.extend({url:J.dataUrl,type:"GET",dataType:"html",data:A.isFunction(M)?M.call(F,N,K,""+J.name):M,context:{elem:L,options:J,vl:K},success:function(P){var R=[],S=this.elem,Q=this.vl,T=A.extend({},this.options),O=T.multiple===true,P=A.isFunction(T.buildSelect)?T.buildSelect.call(F,P):P;typeof P==="string"&&(P=A(A.trim(P)).html());if(P){A(S).append(P);E(S,T);if(T.size===void 0){T.size=O?3:1}if(O){R=Q.split(",");R=A.map(R,function(U){return A.trim(U)})}else{R[0]=A.trim(Q)}setTimeout(function(){A("option",S).each(function(U){if(U===0&&S.multiple){this.selected=false}A(this).attr("role","option");if(A.inArray(A.trim(A(this).text()),R)>-1||A.inArray(A.trim(A(this).val()),R)>-1){this.selected="selected"}})},0)}}},B||{}))}else{if(J.value){var C;void 0===J.size&&(J.size=N?3:1);N&&(M=K.split(","),M=A.map(M,function(O){return A.trim(O)}));"function"===typeof J.value&&(J.value=J.value());var G,D,H=void 0===J.separator?":":J.separator,B=void 0===J.delimiter?";":J.delimiter;if("string"===typeof J.value){G=J.value.split(B);for(C=0;C<G.length;C++){D=G[C].split(H);2<D.length&&(D[1]=A.map(D,function(P,O){if(O>0){return P}}).join(H));B=document.createElement("option");B.setAttribute("role","option");B.value=D[0];B.innerHTML=D[1];L.appendChild(B);if(!N&&(A.trim(D[0])===A.trim(K)||A.trim(D[1])===A.trim(K))){B.selected="selected"}if(N&&(-1<A.inArray(A.trim(D[1]),M)||-1<A.inArray(A.trim(D[0]),M))){B.selected="selected"}}}else{if("object"===typeof J.value){for(C in H=J.value,H){if(H.hasOwnProperty(C)){B=document.createElement("option");B.setAttribute("role","option");B.value=C;B.innerHTML=H[C];L.appendChild(B);if(!N&&(A.trim(C)===A.trim(K)||A.trim(H[C])===A.trim(K))){B.selected="selected"}if(N&&(-1<A.inArray(A.trim(H[C]),M)||-1<A.inArray(A.trim(C),M))){B.selected="selected"}}}}}E(L,J,["value"])}}break;case"text":case"password":case"button":C="button"===N?"button":"textbox";L=document.createElement("input");L.type=N;L.value=K;E(L,J);"button"!==N&&(M?J.size||A(L).css({width:"98%"}):J.size||(J.size=20));A(L).attr("role",C);break;case"image":case"file":L=document.createElement("input");L.type=N;E(L,J);break;case"custom":L=document.createElement("span");try{if(A.isFunction(J.custom_element)){if(H=J.custom_element.call(F,K,J)){H=A(H).addClass("customelement").attr({id:J.id,name:J.name}),A(L).empty().append(H)}else{throw"e2"}}else{throw"e1"}}catch(I){"e1"===I&&A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_element' "+A.jgrid.edit.msg.nodefined,A.jgrid.edit.bClose),"e2"===I?A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_element' "+A.jgrid.edit.msg.novalue,A.jgrid.edit.bClose):A.jgrid.info_dialog(A.jgrid.errors.errcap,"string"===typeof I?I:I.message,A.jgrid.edit.bClose)}}return L},checkDate:function(H,F){var G={},J,H=H.toLowerCase();J=-1!==H.indexOf("/")?"/":-1!==H.indexOf("-")?"-":-1!==H.indexOf(".")?".":"/";H=H.split(J);F=F.split(J);if(3!==F.length){return !1}J=-1;var B,D=-1,I=-1,E;for(E=0;E<H.length;E++){B=isNaN(F[E])?0:parseInt(F[E],10),G[H[E]]=B,B=H[E],-1!==B.indexOf("y")&&(J=E),-1!==B.indexOf("m")&&(I=E),-1!==B.indexOf("d")&&(D=E)}B="y"===H[J]||"yyyy"===H[J]?4:"yy"===H[J]?2:-1;E=[0,31,29,31,30,31,30,31,31,30,31,30,31];var C;if(-1===J){return !1}C=G[H[J]].toString();2===B&&1===C.length&&(B=1);if(C.length!==B||0===G[H[J]]&&"00"!==F[J]||-1===I){return !1}C=G[H[I]].toString();if(1>C.length||1>G[H[I]]||12<G[H[I]]||-1===D){return !1}C=G[H[D]].toString();return 1>C.length||1>G[H[D]]||31<G[H[D]]||2===G[H[I]]&&G[H[D]]>(0===G[H[J]]%4&&(0!==G[H[J]]%100||0===G[H[J]]%400)?29:28)||G[H[D]]>E[G[H[I]]]?!1:!0},isEmpty:function(B){return B.match(/^\s+$/)||""===B?!0:!1},checkTime:function(B){var C=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!A.jgrid.isEmpty(B)){if(B=B.match(C)){if(B[3]){if(1>B[1]||12<B[1]){return !1}}else{if(23<B[1]){return !1}}if(59<B[2]){return !1}}else{return !1}}return !0},checkValues:function(C,F,G,B){var D,E,H;H=this.p.colModel;if(void 0===G){if("string"===typeof F){G=0;for(B=H.length;G<B;G++){if(H[G].name===F){D=H[G].editrules;F=G;null!=H[G].formoptions&&(E=H[G].formoptions.label);break}}}else{0<=F&&(D=H[F].editrules)}}else{D=G,E=void 0===B?"_":B}if(D){E||(E=null!=this.p.colNames?this.p.colNames[F]:H[F].label);if(!0===D.required&&A.jgrid.isEmpty(C)){return[!1,E+": "+A.jgrid.edit.msg.required,""]}G=!1===D.required?!1:!0;if(!0===D.number&&!(!1===G&&A.jgrid.isEmpty(C))&&isNaN(C)){return[!1,E+": "+A.jgrid.edit.msg.number,""]}if(void 0!==D.minValue&&!isNaN(D.minValue)&&parseFloat(C)<parseFloat(D.minValue)){return[!1,E+": "+A.jgrid.edit.msg.minValue+" "+D.minValue,""]}if(void 0!==D.maxValue&&!isNaN(D.maxValue)&&parseFloat(C)>parseFloat(D.maxValue)){return[!1,E+": "+A.jgrid.edit.msg.maxValue+" "+D.maxValue,""]}if(!0===D.email&&!(!1===G&&A.jgrid.isEmpty(C))&&(B=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,!B.test(C))){return[!1,E+": "+A.jgrid.edit.msg.email,""]}if(!0===D.integer&&!(!1===G&&A.jgrid.isEmpty(C))&&(isNaN(C)||0!==C%1||-1!==C.indexOf("."))){return[!1,E+": "+A.jgrid.edit.msg.integer,""]}if(!0===D.date&&!(!1===G&&A.jgrid.isEmpty(C))&&(H[F].formatoptions&&H[F].formatoptions.newformat?(H=H[F].formatoptions.newformat,A.jgrid.formatter.date.masks.hasOwnProperty(H)&&(H=A.jgrid.formatter.date.masks[H])):H=H[F].datefmt||"Y-m-d",!A.jgrid.checkDate(H,C))){return[!1,E+": "+A.jgrid.edit.msg.date+" - "+H,""]}if(!0===D.time&&!(!1===G&&A.jgrid.isEmpty(C))&&!A.jgrid.checkTime(C)){return[!1,E+": "+A.jgrid.edit.msg.date+" - hh:mm (am/pm)",""]}if(!0===D.url&&!(!1===G&&A.jgrid.isEmpty(C))&&(B=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,!B.test(C))){return[!1,E+": "+A.jgrid.edit.msg.url,""]}if(!0===D.custom&&!(!1===G&&A.jgrid.isEmpty(C))){return A.isFunction(D.custom_func)?(C=D.custom_func.call(this,C,E,F),A.isArray(C)?C:[!1,A.jgrid.edit.msg.customarray,""]):[!1,A.jgrid.edit.msg.customfcheck,""]}}return[!0,"",""]}})})(jQuery);(function(B){var A={};B.jgrid.extend({searchGrid:function(C){C=B.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},B.jgrid.search,C||{});return this.each(function(){function O(V){G=B(S).triggerHandler("jqGridFilterBeforeShow",[V]);void 0===G&&(G=!0);G&&B.isFunction(C.beforeShowSearch)&&(G=C.beforeShowSearch.call(S,V));G&&(B.jgrid.viewModal("#"+B.jgrid.jqID(H.themodal),{gbox:"#gbox_"+B.jgrid.jqID(K),jqm:C.jqModal,modal:C.modal,overlay:C.overlay,toTop:C.toTop}),B(S).triggerHandler("jqGridFilterAfterShow",[V]),B.isFunction(C.afterShowSearch)&&C.afterShowSearch.call(S,V))}var S=this;if(S.grid){var K="fbox_"+S.p.id,G=!0,H={themodal:"searchmod"+K,modalhead:"searchhd"+K,modalcontent:"searchcnt"+K,scrollelm:K},D=S.p.postData[C.sFilter];"string"===typeof D&&(D=B.jgrid.parse(D));!0===C.recreateFilter&&B("#"+B.jgrid.jqID(H.themodal)).remove();if(void 0!==B("#"+B.jgrid.jqID(H.themodal))[0]){O(B("#fbox_"+B.jgrid.jqID(+S.p.id)))}else{var N=B("<div><div id='"+K+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+B.jgrid.jqID(S.p.id)),J="left",Q="";"rtl"===S.p.direction&&(J="right",Q=" style='text-align:left'",N.attr("dir","rtl"));var L=B.extend([],S.p.colModel),T="<a href='javascript:void(0)' id='"+K+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+C.Find+"</a>",R="<a href='javascript:void(0)' id='"+K+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+C.Reset+"</a>",F="",P="",M,I=!1,E=-1;C.showQuery&&(F="<a href='javascript:void(0)' id='"+K+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>");C.columns.length?(L=C.columns,E=0,M=L[0].register||L[0].name):B.each(L,function(Y, W){if(!W.label){W.label=S.p.colNames[Y]}if(!I){var X=W.search===void 0?true:W.search,V=W.hidden===true;if(W.searchoptions&&W.searchoptions.searchhidden===true&&X||X&&!V){I=true;M=W.register||W.name;E=Y}}});if(!D&&M||!1===C.multipleSearch){var U="eq";0<=E&&L[E].searchoptions&&L[E].searchoptions.sopt?U=L[E].searchoptions.sopt[0]:C.sopt&&C.sopt.length&&(U=C.sopt[0]);D={groupOp:"AND",rules:[{field:M,op:U,data:""}]}}I=!1;C.tmplNames&&C.tmplNames.length&&(I=!0,P=C.tmplLabel,P+="<select class='ui-template'>",P+="<option value='default'>Default</option>",B.each(C.tmplNames,function(W, V){P=P+("<option value='"+W+"'>"+V+"</option>")}),P+="</select>");J="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+K+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:"+J+"'>"+R+P+"</td><td class='EditButton' "+Q+">"+F+T+"</td></tr></tbody></table>";K=B.jgrid.jqID(K);B("#"+K).jqFilter({columns:L,filter:C.loadDefaults?D:null,showQuery:C.showQuery,errorcheck:C.errorcheck,sopt:C.sopt,groupButton:C.multipleGroup,ruleButtons:C.multipleSearch,afterRedraw:C.afterRedraw,ops:C.odata,operands:C.operands,ajaxSelectOptions:S.p.ajaxSelectOptions,groupOps:C.groupOps,onChange:function(){this.p.showQuery&&B(".query",this).html(this.toUserFriendlyString());B.isFunction(C.afterChange)&&C.afterChange.call(S,B("#"+K),C)},direction:S.p.direction,id:S.p.id});N.append(J);I&&C.tmplFilters&&C.tmplFilters.length&&B(".ui-template",N).bind("change",function(){var V=B(this).val();V==="default"?B("#"+K).jqFilter("addFilter",D):B("#"+K).jqFilter("addFilter",C.tmplFilters[parseInt(V,10)]);return false});!0===C.multipleGroup&&(C.multipleSearch=!0);B(S).triggerHandler("jqGridFilterInitialize",[B("#"+K)]);B.isFunction(C.onInitializeSearch)&&C.onInitializeSearch.call(S,B("#"+K));C.gbox="#gbox_"+K;C.layer?B.jgrid.createModal(H,N,C,"#gview_"+B.jgrid.jqID(S.p.id),B("#gbox_"+B.jgrid.jqID(S.p.id))[0],"#"+B.jgrid.jqID(C.layer),{position:"relative"}):B.jgrid.createModal(H,N,C,"#gview_"+B.jgrid.jqID(S.p.id),B("#gbox_"+B.jgrid.jqID(S.p.id))[0]);(C.searchOnEnter||C.closeOnEscape)&&B("#"+B.jgrid.jqID(H.themodal)).keydown(function(W){var V=B(W.target);if(C.searchOnEnter&&W.which===13&&!V.hasClass("add-group")&&!V.hasClass("add-rule")&&!V.hasClass("delete-group")&&!V.hasClass("delete-rule")&&(!V.hasClass("fm-button")||!V.is("[id$=_query]"))){B("#"+K+"_search").focus().click();return false}if(C.closeOnEscape&&W.which===27){B("#"+B.jgrid.jqID(H.modalhead)).find(".ui-jqdialog-titlebar-close").focus().click();return false}});F&&B("#"+K+"_query").bind("click",function(){B(".queryresult",N).toggle();return false});void 0===C.stringResult&&(C.stringResult=C.multipleSearch);B("#"+K+"_search").bind("click",function(){var Z=B("#"+K),W={},a,Y=Z.jqFilter("filterData");if(C.errorcheck){Z[0].hideError();C.showQuery||Z.jqFilter("toSQLString");if(Z[0].p.error){Z[0].showError();return false}}if(C.stringResult){try{a=xmlJsonClass.toJson(Y,"","",false)}catch(V){try{a=JSON.stringify(Y)}catch(X){}}if(typeof a==="string"){W[C.sFilter]=a;B.each([C.sField,C.sValue,C.sOper],function(){W[this]=""})}}else{if(C.multipleSearch){W[C.sFilter]=Y;B.each([C.sField,C.sValue,C.sOper],function(){W[this]=""})}else{W[C.sField]=Y.rules[0].field;W[C.sValue]=Y.rules[0].data;W[C.sOper]=Y.rules[0].op;W[C.sFilter]=""}}S.p.search=true;B.extend(S.p.postData,W);B(S).triggerHandler("jqGridFilterSearch");B.isFunction(C.onSearch)&&C.onSearch.call(S);B(S).trigger("reloadGrid",[{page:1}]);C.closeAfterSearch&&B.jgrid.hideModal("#"+B.jgrid.jqID(H.themodal),{gb:"#gbox_"+B.jgrid.jqID(S.p.id),jqm:C.jqModal,onClose:C.onClose});return false});B("#"+K+"_reset").bind("click",function(){var W={},V=B("#"+K);S.p.search=false;C.multipleSearch===false?W[C.sField]=W[C.sValue]=W[C.sOper]="":W[C.sFilter]="";V[0].resetFilter();I&&B(".ui-template",N).val("default");B.extend(S.p.postData,W);B(S).triggerHandler("jqGridFilterReset");B.isFunction(C.onReset)&&C.onReset.call(S);B(S).trigger("reloadGrid",[{page:1}]);return false});O(B("#"+K));B(".fm-button:not(.ui-state-disabled)",N).hover(function(){B(this).addClass("ui-state-hover")},function(){B(this).removeClass("ui-state-hover")})}}})},editGridRow:function(C,D){D=B.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:"ui-widget-overlay"},B.jgrid.edit,D||{});A[B(this)[0].p.id]=D;return this.each(function(){function M(){B(Ag+" > tbody > tr > td > .FormElement").each(function(){var F=B(".customelement",this);if(F.length){var E=B(F[0]).attr("name");B.each(Ap.p.colModel,function(){if(this.name===E&&this.editoptions&&B.isFunction(this.editoptions.custom_value)){try{if(Af[E]=this.editoptions.custom_value.call(Ap,B("#"+B.jgrid.jqID(E),Ag),"get"),void 0===Af[E]){throw"e1"}}catch(G){"e1"===G?B.jgrid.info_dialog(B.jgrid.errors.errcap,"function 'custom_value' "+B.jgrid.edit.msg.novalue,B.jgrid.edit.bClose):B.jgrid.info_dialog(B.jgrid.errors.errcap,G.message,B.jgrid.edit.bClose)}return !0}})}else{switch(B(this).get(0).type){case"checkbox":B(this).is(":checked")?Af[this.name]=B(this).val():(F=B(this).attr("offval"),Af[this.name]=F);break;case"select-one":Af[this.name]=B("option:selected",this).val();break;case"select-multiple":Af[this.name]=B(this).val();Af[this.name]=Af[this.name]?Af[this.name].join(","):"";B("option:selected",this).each(function(H,G){B(G).text()});break;case"password":case"text":case"textarea":case"button":Af[this.name]=B(this).val()}Ap.p.autoencode&&(Af[this.name]=B.jgrid.htmlEncode(Af[this.name]))}});return !0}function Ai(u,E,s,w){var K,I,J,F=0,L,t,f,d=[],G=!1,v="",H;for(H=1;H<=w;H++){v+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>"}"_empty"!==u&&(G=B(E).jqGrid("getInd",u));B(E.p.colModel).each(function(e){K=this.name;t=(I=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";if("cb"!==K&&"subgrid"!==K&&!0===this.editable&&"rn"!==K){if(!1===G){L=""}else{if(K===E.p.ExpandColumn&&!0===E.p.treeGrid){L=B("td[role='gridcell']:eq("+e+")",E.rows[G]).text()}else{try{L=B.unformat.call(E,B("td[role='gridcell']:eq("+e+")",E.rows[G]),{rowId:u,colModel:this},e)}catch(j){L=this.edittype&&"textarea"===this.edittype?B("td[role='gridcell']:eq("+e+")",E.rows[G]).text():B("td[role='gridcell']:eq("+e+")",E.rows[G]).html()}if(!L||"&nbsp;"===L||"&#160;"===L||1===L.length&&160===L.charCodeAt(0)){L=""}}}var h=B.extend({},this.editoptions||{},{id:K,name:K}),g=B.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),i=parseInt(g.rowpos,10)||F+1,k=parseInt(2*(parseInt(g.colpos,10)||1),10);"_empty"===u&&h.defaultValue&&(L=B.isFunction(h.defaultValue)?h.defaultValue.call(Ap):h.defaultValue);this.edittype||(this.edittype="text");Ap.p.autoencode&&(L=B.jgrid.htmlDecode(L));f=B.jgrid.createEl.call(Ap,this.edittype,h,L,!1,B.extend({},B.jgrid.ajaxOptions,E.p.ajaxSelectOptions||{}));if(A[Ap.p.id].checkOnSubmit||A[Ap.p.id].checkOnUpdate){A[Ap.p.id]._savedData[K]=L}B(f).addClass("FormElement");-1<B.inArray(this.edittype,["text","textarea","password","select"])&&B(f).addClass("ui-widget-content ui-corner-all");J=B(s).find("tr[rowpos="+i+"]");if(g.rowabove){var l=B("<tr><td class='contentinfo' colspan='"+2*w+"'>"+g.rowcontent+"</td></tr>");B(s).append(l);l[0].rp=i}0===J.length&&(J=B("<tr "+t+" rowpos='"+i+"'></tr>").addClass("FormData").attr("id","tr_"+K),B(J).append(v),B(s).append(J),J[0].rp=i);B("td:eq("+(k-2)+")",J[0]).html(void 0===g.label?E.p.colNames[e]:g.label);B("td:eq("+(k-1)+")",J[0]).append(g.elmprefix).append(f).append(g.elmsuffix);B.isFunction(h.custom_value)&&"_empty"!==u&&h.custom_value.call(Ap,B("#"+K,"#"+An),"set",L);B.jgrid.bindEv.call(Ap,f,h);d[F]=e;F++}});if(0<F&&(H=B("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*w-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+E.p.id+"_id' value='"+u+"'/></td></tr>"),H[0].rp=F+999,B(s).append(H),A[Ap.p.id].checkOnSubmit||A[Ap.p.id].checkOnUpdate)){A[Ap.p.id]._savedData[E.p.id+"_id"]=u}return d}function Ad(k,E,n){var L,I=0,q,H,J,F,G;if(A[Ap.p.id].checkOnSubmit||A[Ap.p.id].checkOnUpdate){A[Ap.p.id]._savedData={},A[Ap.p.id]._savedData[E.p.id+"_id"]=k}var d=E.p.colModel;if("_empty"===k){B(d).each(function(){L=this.name;J=B.extend({},this.editoptions||{});if((H=B("#"+B.jgrid.jqID(L),"#"+n))&&H.length&&null!==H[0]){if(F="",J.defaultValue?(F=B.isFunction(J.defaultValue)?J.defaultValue.call(Ap):J.defaultValue,"checkbox"===H[0].type?(G=F.toLowerCase(),0>G.search(/(false|f|0|no|n|off|undefined)/i)&&""!==G?(H[0].checked=!0,H[0].defaultChecked=!0,H[0].value=F):(H[0].checked=!1,H[0].defaultChecked=!1)):H.val(F)):"checkbox"===H[0].type?(H[0].checked=!1,H[0].defaultChecked=!1,F=B(H).attr("offval")):H[0].type&&"select"===H[0].type.substr(0,6)?H[0].selectedIndex=0:H.val(F),!0===A[Ap.p.id].checkOnSubmit||A[Ap.p.id].checkOnUpdate){A[Ap.p.id]._savedData[L]=F}}}),B("#id_g","#"+n).val(k)}else{var K=B(E).jqGrid("getInd",k,!0);K&&(B('td[role="gridcell"]',K).each(function(g){L=d[g].name;if("cb"!==L&&"subgrid"!==L&&"rn"!==L&&!0===d[g].editable){if(L===E.p.ExpandColumn&&!0===E.p.treeGrid){q=B(this).text()}else{try{q=B.unformat.call(E,B(this),{rowId:k,colModel:d[g]},g)}catch(e){q="textarea"===d[g].edittype?B(this).text():B(this).html()}}Ap.p.autoencode&&(q=B.jgrid.htmlDecode(q));if(!0===A[Ap.p.id].checkOnSubmit||A[Ap.p.id].checkOnUpdate){A[Ap.p.id]._savedData[L]=q}L=B.jgrid.jqID(L);switch(d[g].edittype){case"password":case"text":case"button":case"image":case"textarea":if("&nbsp;"===q||"&#160;"===q||1===q.length&&160===q.charCodeAt(0)){q=""}B("#"+L,"#"+n).val(q);break;case"select":var h=q.split(","),h=B.map(h,function(i){return B.trim(i)});B("#"+L+" option","#"+n).each(function(){this.selected=!d[g].editoptions.multiple&&(B.trim(q)===B.trim(B(this).text())||h[0]===B.trim(B(this).text())||h[0]===B.trim(B(this).val()))?!0:d[g].editoptions.multiple?-1<B.inArray(B.trim(B(this).text()),h)||-1<B.inArray(B.trim(B(this).val()),h)?!0:!1:!1});break;case"checkbox":q=""+q;if(d[g].editoptions&&d[g].editoptions.value){if(d[g].editoptions.value.split(":")[0]===q){B("#"+L,"#"+n)[Ap.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0})}else{B("#"+L,"#"+n)[Ap.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1})}}else{q=q.toLowerCase(),0>q.search(/(false|f|0|no|n|off|undefined)/i)&&""!==q?(B("#"+L,"#"+n)[Ap.p.useProp?"prop":"attr"]("checked",!0),B("#"+L,"#"+n)[Ap.p.useProp?"prop":"attr"]("defaultChecked",!0)):(B("#"+L,"#"+n)[Ap.p.useProp?"prop":"attr"]("checked",!1),B("#"+L,"#"+n)[Ap.p.useProp?"prop":"attr"]("defaultChecked",!1))}break;case"custom":try{if(d[g].editoptions&&B.isFunction(d[g].editoptions.custom_value)){d[g].editoptions.custom_value.call(Ap,B("#"+L,"#"+n),"set",q)}else{throw"e1"}}catch(f){"e1"===f?B.jgrid.info_dialog(B.jgrid.errors.errcap,"function 'custom_value' "+B.jgrid.edit.msg.nodefined,B.jgrid.edit.bClose):B.jgrid.info_dialog(B.jgrid.errors.errcap,f.message,B.jgrid.edit.bClose)}}I++}}),0<I&&B("#id_g",Ag).val(k))}}function Ae(){B.each(Ap.p.colModel,function(F,E){E.editoptions&&!0===E.editoptions.NullIfEmpty&&Af.hasOwnProperty(E.name)&&""===Af[E.name]&&(Af[E.name]="null")})}function c(){var F,K=[!0,"",""],f={},G=Ap.p.prmNames,H,L,E,J,I,d=B(Ap).triggerHandler("jqGridAddEditBeforeCheckValues",[B("#"+An),Ab]);d&&"object"===typeof d&&(Af=d);B.isFunction(A[Ap.p.id].beforeCheckValues)&&(d=A[Ap.p.id].beforeCheckValues.call(Ap,Af,B("#"+An),Ab))&&"object"===typeof d&&(Af=d);for(E in Af){if(Af.hasOwnProperty(E)&&(K=B.jgrid.checkValues.call(Ap,Af[E],E),!1===K[0])){break}}Ae();K[0]&&(f=B(Ap).triggerHandler("jqGridAddEditClickSubmit",[A[Ap.p.id],Af,Ab]),void 0===f&&B.isFunction(A[Ap.p.id].onclickSubmit)&&(f=A[Ap.p.id].onclickSubmit.call(Ap,A[Ap.p.id],Af,Ab)||{}),K=B(Ap).triggerHandler("jqGridAddEditBeforeSubmit",[Af,B("#"+An),Ab]),void 0===K&&(K=[!0,"",""]),K[0]&&B.isFunction(A[Ap.p.id].beforeSubmit)&&(K=A[Ap.p.id].beforeSubmit.call(Ap,Af,B("#"+An),Ab)));if(K[0]&&!A[Ap.p.id].processing){A[Ap.p.id].processing=!0;B("#sData",Ag+"_2").addClass("ui-state-active");L=G.oper;H=G.id;Af[L]="_empty"===B.trim(Af[Ap.p.id+"_id"])?G.addoper:G.editoper;Af[L]!==G.addoper?Af[H]=Af[Ap.p.id+"_id"]:void 0===Af[H]&&(Af[H]=Af[Ap.p.id+"_id"]);delete Af[Ap.p.id+"_id"];Af=B.extend(Af,A[Ap.p.id].editData,f);if(!0===Ap.p.treeGrid){for(I in Af[L]===G.addoper&&(J=B(Ap).jqGrid("getGridParam","selrow"),Af["adjacency"===Ap.p.treeGridModel?Ap.p.treeReader.parent_id_field:"parent_id"]=J),Ap.p.treeReader){Ap.p.treeReader.hasOwnProperty(I)&&(f=Ap.p.treeReader[I],Af.hasOwnProperty(f)&&!(Af[L]===G.addoper&&"parent_id_field"===I)&&delete Af[f])}}Af[H]=B.jgrid.stripPref(Ap.p.idPrefix,Af[H]);I=B.extend({url:A[Ap.p.id].url||B(Ap).jqGrid("getGridParam","editurl"),type:A[Ap.p.id].mtype,data:B.isFunction(A[Ap.p.id].serializeEditData)?A[Ap.p.id].serializeEditData.call(Ap,Af):Af,complete:function(e,h){var i;Af[H]=Ap.p.idPrefix+Af[H];if(e.status>=300&&e.status!==304){K[0]=false;K[1]=B(Ap).triggerHandler("jqGridAddEditErrorTextFormat",[e,Ab]);K[1]=B.isFunction(A[Ap.p.id].errorTextFormat)?A[Ap.p.id].errorTextFormat.call(Ap,e,Ab):h+" Status: '"+e.statusText+"'. Error code: "+e.status}else{K=B(Ap).triggerHandler("jqGridAddEditAfterSubmit",[e,Af,Ab]);K===void 0&&(K=[true,"",""]);K[0]&&B.isFunction(A[Ap.p.id].afterSubmit)&&(K=A[Ap.p.id].afterSubmit.call(Ap,e,Af,Ab))}if(K[0]===false){B("#FormError>td",Ag).html(K[1]);B("#FormError",Ag).show()}else{Ap.p.autoencode&&B.each(Af,function(k,g){Af[k]=B.jgrid.htmlDecode(g)});if(Af[L]===G.addoper){K[2]||(K[2]=B.jgrid.randId());Af[H]=K[2];A[Ap.p.id].reloadAfterSubmit?B(Ap).trigger("reloadGrid"):Ap.p.treeGrid===true?B(Ap).jqGrid("addChildNode",K[2],J,Af):B(Ap).jqGrid("addRowData",K[2],Af,D.addedrow);if(A[Ap.p.id].closeAfterAdd){Ap.p.treeGrid!==true&&B(Ap).jqGrid("setSelection",K[2]);B.jgrid.hideModal("#"+B.jgrid.jqID(r.themodal),{gb:"#gbox_"+B.jgrid.jqID(Aa),jqm:D.jqModal,onClose:A[Ap.p.id].onClose})}else{A[Ap.p.id].clearAfterAdd&&Ad("_empty",Ap,An)}}else{if(A[Ap.p.id].reloadAfterSubmit){B(Ap).trigger("reloadGrid");A[Ap.p.id].closeAfterEdit||setTimeout(function(){B(Ap).jqGrid("setSelection",Af[H])},1000)}else{Ap.p.treeGrid===true?B(Ap).jqGrid("setTreeRow",Af[H],Af):B(Ap).jqGrid("setRowData",Af[H],Af)}A[Ap.p.id].closeAfterEdit&&B.jgrid.hideModal("#"+B.jgrid.jqID(r.themodal),{gb:"#gbox_"+B.jgrid.jqID(Aa),jqm:D.jqModal,onClose:A[Ap.p.id].onClose})}if(B.isFunction(A[Ap.p.id].afterComplete)){F=e;setTimeout(function(){B(Ap).triggerHandler("jqGridAddEditAfterComplete",[F,Af,B("#"+An),Ab]);A[Ap.p.id].afterComplete.call(Ap,F,Af,B("#"+An),Ab);F=null},500)}if(A[Ap.p.id].checkOnSubmit||A[Ap.p.id].checkOnUpdate){B("#"+An).data("disabled",false);if(A[Ap.p.id]._savedData[Ap.p.id+"_id"]!=="_empty"){for(i in A[Ap.p.id]._savedData){A[Ap.p.id]._savedData.hasOwnProperty(i)&&Af[i]&&(A[Ap.p.id]._savedData[i]=Af[i])}}}}A[Ap.p.id].processing=false;B("#sData",Ag+"_2").removeClass("ui-state-active");try{B(":input:visible","#"+An)[0].focus()}catch(j){}}},B.jgrid.ajaxOptions,A[Ap.p.id].ajaxEditOptions);!I.url&&!A[Ap.p.id].useDataProxy&&(B.isFunction(Ap.p.dataProxy)?A[Ap.p.id].useDataProxy=!0:(K[0]=!1,K[1]+=" "+B.jgrid.errors.nourl));K[0]&&(A[Ap.p.id].useDataProxy?(f=Ap.p.dataProxy.call(Ap,I,"set_"+Ap.p.id),void 0===f&&(f=[!0,""]),!1===f[0]?(K[0]=!1,K[1]=f[1]||"Error deleting the selected row!"):(I.data.oper===G.addoper&&A[Ap.p.id].closeAfterAdd&&B.jgrid.hideModal("#"+B.jgrid.jqID(r.themodal),{gb:"#gbox_"+B.jgrid.jqID(Aa),jqm:D.jqModal,onClose:A[Ap.p.id].onClose}),I.data.oper===G.editoper&&A[Ap.p.id].closeAfterEdit&&B.jgrid.hideModal("#"+B.jgrid.jqID(r.themodal),{gb:"#gbox_"+B.jgrid.jqID(Aa),jqm:D.jqModal,onClose:A[Ap.p.id].onClose}))):B.ajax(I))}!1===K[0]&&(B("#FormError>td",Ag).html(K[1]),B("#FormError",Ag).show())}function Am(H,G){var F=!1,E;for(E in H){if(H.hasOwnProperty(E)&&H[E]!=G[E]){F=!0;break}}return F}function Ah(){var E=!0;B("#FormError",Ag).hide();if(A[Ap.p.id].checkOnUpdate&&(Af={},M(),O=Am(Af,A[Ap.p.id]._savedData))){B("#"+An).data("disabled",!0),B(".confirm","#"+r.themodal).show(),E=!1}return E}function Ao(){var E;if("_empty"!==C&&void 0!==Ap.p.savedRow&&0<Ap.p.savedRow.length&&B.isFunction(B.fn.jqGrid.restoreRow)){for(E=0;E<Ap.p.savedRow.length;E++){if(Ap.p.savedRow[E].id==C){B(Ap).jqGrid("restoreRow",C);break}}}}function Aj(G,F){var E=F[1].length-1;0===G?B("#pData",Ag+"_2").addClass("ui-state-disabled"):void 0!==F[1][G-1]&&B("#"+B.jgrid.jqID(F[1][G-1])).hasClass("ui-state-disabled")?B("#pData",Ag+"_2").addClass("ui-state-disabled"):B("#pData",Ag+"_2").removeClass("ui-state-disabled");G===E?B("#nData",Ag+"_2").addClass("ui-state-disabled"):void 0!==F[1][G+1]&&B("#"+B.jgrid.jqID(F[1][G+1])).hasClass("ui-state-disabled")?B("#nData",Ag+"_2").addClass("ui-state-disabled"):B("#nData",Ag+"_2").removeClass("ui-state-disabled")}function a(){var F=B(Ap).jqGrid("getDataIDs"),E=B("#id_g",Ag).val();return[B.inArray(E,F),F]}var Ap=this;if(Ap.grid&&C){var Aa=Ap.p.id,An="FrmGrid_"+Aa,Ak="TblGrid_"+Aa,Ag="#"+B.jgrid.jqID(Ak),r={themodal:"editmod"+Aa,modalhead:"edithd"+Aa,modalcontent:"editcnt"+Aa,scrollelm:An},b=B.isFunction(A[Ap.p.id].beforeShowForm)?A[Ap.p.id].beforeShowForm:!1,U=B.isFunction(A[Ap.p.id].afterShowForm)?A[Ap.p.id].afterShowForm:!1,Ac=B.isFunction(A[Ap.p.id].beforeInitData)?A[Ap.p.id].beforeInitData:!1,S=B.isFunction(A[Ap.p.id].onInitializeForm)?A[Ap.p.id].onInitializeForm:!1,Al=!0,Z=1,V=0,Af,O,Ab,An=B.jgrid.jqID(An);"new"===C?(C="_empty",Ab="add",D.caption=A[Ap.p.id].addCaption):(D.caption=A[Ap.p.id].editCaption,Ab="edit");!0===D.recreateForm&&void 0!==B("#"+B.jgrid.jqID(r.themodal))[0]&&B("#"+B.jgrid.jqID(r.themodal)).remove();var W=!0;D.checkOnUpdate&&D.jqModal&&!D.modal&&(W=!1);if(void 0!==B("#"+B.jgrid.jqID(r.themodal))[0]){Al=B(Ap).triggerHandler("jqGridAddEditBeforeInitData",[B("#"+B.jgrid.jqID(An)),Ab]);void 0===Al&&(Al=!0);Al&&Ac&&(Al=Ac.call(Ap,B("#"+An),Ab));if(!1===Al){return}Ao();B(".ui-jqdialog-title","#"+B.jgrid.jqID(r.modalhead)).html(D.caption);B("#FormError",Ag).hide();A[Ap.p.id].topinfo?(B(".topinfo",Ag).html(A[Ap.p.id].topinfo),B(".tinfo",Ag).show()):B(".tinfo",Ag).hide();A[Ap.p.id].bottominfo?(B(".bottominfo",Ag+"_2").html(A[Ap.p.id].bottominfo),B(".binfo",Ag+"_2").show()):B(".binfo",Ag+"_2").hide();Ad(C,Ap,An);"_empty"===C||!A[Ap.p.id].viewPagerButtons?B("#pData, #nData",Ag+"_2").hide():B("#pData, #nData",Ag+"_2").show();!0===A[Ap.p.id].processing&&(A[Ap.p.id].processing=!1,B("#sData",Ag+"_2").removeClass("ui-state-active"));!0===B("#"+An).data("disabled")&&(B(".confirm","#"+B.jgrid.jqID(r.themodal)).hide(),B("#"+An).data("disabled",!1));B(Ap).triggerHandler("jqGridAddEditBeforeShowForm",[B("#"+An),Ab]);b&&b.call(Ap,B("#"+An),Ab);B("#"+B.jgrid.jqID(r.themodal)).data("onClose",A[Ap.p.id].onClose);B.jgrid.viewModal("#"+B.jgrid.jqID(r.themodal),{gbox:"#gbox_"+B.jgrid.jqID(Aa),jqm:D.jqModal,jqM:!1,overlay:D.overlay,modal:D.modal,overlayClass:D.overlayClass});W||B("."+B.jgrid.jqID(D.overlayClass)).click(function(){if(!Ah()){return false}B.jgrid.hideModal("#"+B.jgrid.jqID(r.themodal),{gb:"#gbox_"+B.jgrid.jqID(Aa),jqm:D.jqModal,onClose:A[Ap.p.id].onClose});return false});B(Ap).triggerHandler("jqGridAddEditAfterShowForm",[B("#"+An),Ab]);U&&U.call(Ap,B("#"+An),Ab)}else{var Y=isNaN(D.dataheight)?D.dataheight:D.dataheight+"px",Al=isNaN(D.datawidth)?D.datawidth:D.datawidth+"px",Y=B("<form name='FormPost' id='"+An+"' class='FormGrid' onSubmit='return false;' style='width:"+Al+";overflow:auto;position:relative;height:"+Y+";'></form>").data("disabled",!1),T=B("<table id='"+Ak+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),Al=B(Ap).triggerHandler("jqGridAddEditBeforeInitData",[B("#"+An),Ab]);void 0===Al&&(Al=!0);Al&&Ac&&(Al=Ac.call(Ap,B("#"+An,Ab)));if(!1===Al){return}Ao();B(Ap.p.colModel).each(function(){var E=this.formoptions;Z=Math.max(Z,E?E.colpos||0:0);V=Math.max(V,E?E.rowpos||0:0)});B(Y).append(T);Ac=B("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+2*Z+"'></td></tr>");Ac[0].rp=0;B(T).append(Ac);Ac=B("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*Z+"'>"+A[Ap.p.id].topinfo+"</td></tr>");Ac[0].rp=0;B(T).append(Ac);var Al=(Ac="rtl"===Ap.p.direction?!0:!1)?"nData":"pData",X=Ac?"pData":"nData";Ai(C,Ap,T,Z);var Al="<a href='javascript:void(0)' id='"+Al+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",X="<a href='javascript:void(0)' id='"+X+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",P="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+D.bSubmit+"</a>",Q="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+D.bCancel+"</a>",Ak="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+Ak+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(Ac?X+Al:Al+X)+"</td><td class='EditButton'>"+P+Q+"</td></tr>"+("<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+A[Ap.p.id].bottominfo+"</td></tr>"),Ak=Ak+"</tbody></table>";if(0<V){var N=[];B.each(B(T)[0].rows,function(F,E){N[F]=E});N.sort(function(F,E){return F.rp>E.rp?1:F.rp<E.rp?-1:0});B.each(N,function(F,E){B("tbody",T).append(E)})}D.gbox="#gbox_"+B.jgrid.jqID(Aa);var R=!1;!0===D.closeOnEscape&&(D.closeOnEscape=!1,R=!0);Ak=B("<div></div>").append(Y).append(Ak);B.jgrid.createModal(r,Ak,D,"#gview_"+B.jgrid.jqID(Ap.p.id),B("#gbox_"+B.jgrid.jqID(Ap.p.id))[0]);Ac&&(B("#pData, #nData",Ag+"_2").css("float","right"),B(".EditButton",Ag+"_2").css("text-align","left"));A[Ap.p.id].topinfo&&B(".tinfo",Ag).show();A[Ap.p.id].bottominfo&&B(".binfo",Ag+"_2").show();Ak=Ak=null;B("#"+B.jgrid.jqID(r.themodal)).keydown(function(E){var F=E.target;if(B("#"+An).data("disabled")===true){return false}if(A[Ap.p.id].savekey[0]===true&&E.which===A[Ap.p.id].savekey[1]&&F.tagName!=="TEXTAREA"){B("#sData",Ag+"_2").trigger("click");return false}if(E.which===27){if(!Ah()){return false}R&&B.jgrid.hideModal("#"+B.jgrid.jqID(r.themodal),{gb:D.gbox,jqm:D.jqModal,onClose:A[Ap.p.id].onClose});return false}if(A[Ap.p.id].navkeys[0]===true){if(B("#id_g",Ag).val()==="_empty"){return true}if(E.which===A[Ap.p.id].navkeys[1]){B("#pData",Ag+"_2").trigger("click");return false}if(E.which===A[Ap.p.id].navkeys[2]){B("#nData",Ag+"_2").trigger("click");return false}}});D.checkOnUpdate&&(B("a.ui-jqdialog-titlebar-close span","#"+B.jgrid.jqID(r.themodal)).removeClass("jqmClose"),B("a.ui-jqdialog-titlebar-close","#"+B.jgrid.jqID(r.themodal)).unbind("click").click(function(){if(!Ah()){return false}B.jgrid.hideModal("#"+B.jgrid.jqID(r.themodal),{gb:"#gbox_"+B.jgrid.jqID(Aa),jqm:D.jqModal,onClose:A[Ap.p.id].onClose});return false}));D.saveicon=B.extend([!0,"left","ui-icon-disk"],D.saveicon);D.closeicon=B.extend([!0,"left","ui-icon-close"],D.closeicon);!0===D.saveicon[0]&&B("#sData",Ag+"_2").addClass("right"===D.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+D.saveicon[2]+"'></span>");!0===D.closeicon[0]&&B("#cData",Ag+"_2").addClass("right"===D.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+D.closeicon[2]+"'></span>");if(A[Ap.p.id].checkOnSubmit||A[Ap.p.id].checkOnUpdate){P="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+D.bYes+"</a>",X="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+D.bNo+"</a>",Q="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+D.bExit+"</a>",Ak=D.zIndex||999,Ak++,B("<div class='"+D.overlayClass+" jqgrid-overlay confirm' style='z-index:"+Ak+";display:none;'>&#160;</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(Ak+1)+"'>"+D.saveData+"<br/><br/>"+P+X+Q+"</div>").insertAfter("#"+An),B("#sNew","#"+B.jgrid.jqID(r.themodal)).click(function(){c();B("#"+An).data("disabled",false);B(".confirm","#"+B.jgrid.jqID(r.themodal)).hide();return false}),B("#nNew","#"+B.jgrid.jqID(r.themodal)).click(function(){B(".confirm","#"+B.jgrid.jqID(r.themodal)).hide();B("#"+An).data("disabled",false);setTimeout(function(){B(":input:visible","#"+An)[0].focus()},0);return false}),B("#cNew","#"+B.jgrid.jqID(r.themodal)).click(function(){B(".confirm","#"+B.jgrid.jqID(r.themodal)).hide();B("#"+An).data("disabled",false);B.jgrid.hideModal("#"+B.jgrid.jqID(r.themodal),{gb:"#gbox_"+B.jgrid.jqID(Aa),jqm:D.jqModal,onClose:A[Ap.p.id].onClose});return false})}B(Ap).triggerHandler("jqGridAddEditInitializeForm",[B("#"+An),Ab]);S&&S.call(Ap,B("#"+An),Ab);"_empty"===C||!A[Ap.p.id].viewPagerButtons?B("#pData,#nData",Ag+"_2").hide():B("#pData,#nData",Ag+"_2").show();B(Ap).triggerHandler("jqGridAddEditBeforeShowForm",[B("#"+An),Ab]);b&&b.call(Ap,B("#"+An),Ab);B("#"+B.jgrid.jqID(r.themodal)).data("onClose",A[Ap.p.id].onClose);B.jgrid.viewModal("#"+B.jgrid.jqID(r.themodal),{gbox:"#gbox_"+B.jgrid.jqID(Aa),jqm:D.jqModal,overlay:D.overlay,modal:D.modal,overlayClass:D.overlayClass});W||B("."+B.jgrid.jqID(D.overlayClass)).click(function(){if(!Ah()){return false}B.jgrid.hideModal("#"+B.jgrid.jqID(r.themodal),{gb:"#gbox_"+B.jgrid.jqID(Aa),jqm:D.jqModal,onClose:A[Ap.p.id].onClose});return false});B(Ap).triggerHandler("jqGridAddEditAfterShowForm",[B("#"+An),Ab]);U&&U.call(Ap,B("#"+An),Ab);B(".fm-button","#"+B.jgrid.jqID(r.themodal)).hover(function(){B(this).addClass("ui-state-hover")},function(){B(this).removeClass("ui-state-hover")});B("#sData",Ag+"_2").click(function(){Af={};B("#FormError",Ag).hide();M();if(Af[Ap.p.id+"_id"]==="_empty"){c()}else{if(D.checkOnSubmit===true){if(O=Am(Af,A[Ap.p.id]._savedData)){B("#"+An).data("disabled",true);B(".confirm","#"+B.jgrid.jqID(r.themodal)).show()}else{c()}}else{c()}}return false});B("#cData",Ag+"_2").click(function(){if(!Ah()){return false}B.jgrid.hideModal("#"+B.jgrid.jqID(r.themodal),{gb:"#gbox_"+B.jgrid.jqID(Aa),jqm:D.jqModal,onClose:A[Ap.p.id].onClose});return false});B("#nData",Ag+"_2").click(function(){if(!Ah()){return false}B("#FormError",Ag).hide();var F=a();F[0]=parseInt(F[0],10);if(F[0]!==-1&&F[1][F[0]+1]){B(Ap).triggerHandler("jqGridAddEditClickPgButtons",["next",B("#"+An),F[1][F[0]]]);var E;if(B.isFunction(D.onclickPgButtons)){E=D.onclickPgButtons.call(Ap,"next",B("#"+An),F[1][F[0]]);if(E!==void 0&&E===false){return false}}if(B("#"+B.jgrid.jqID(F[1][F[0]+1])).hasClass("ui-state-disabled")){return false}Ad(F[1][F[0]+1],Ap,An);B(Ap).jqGrid("setSelection",F[1][F[0]+1]);B(Ap).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",B("#"+An),F[1][F[0]]]);B.isFunction(D.afterclickPgButtons)&&D.afterclickPgButtons.call(Ap,"next",B("#"+An),F[1][F[0]+1]);Aj(F[0]+1,F)}return false});B("#pData",Ag+"_2").click(function(){if(!Ah()){return false}B("#FormError",Ag).hide();var F=a();if(F[0]!==-1&&F[1][F[0]-1]){B(Ap).triggerHandler("jqGridAddEditClickPgButtons",["prev",B("#"+An),F[1][F[0]]]);var E;if(B.isFunction(D.onclickPgButtons)){E=D.onclickPgButtons.call(Ap,"prev",B("#"+An),F[1][F[0]]);if(E!==void 0&&E===false){return false}}if(B("#"+B.jgrid.jqID(F[1][F[0]-1])).hasClass("ui-state-disabled")){return false}Ad(F[1][F[0]-1],Ap,An);B(Ap).jqGrid("setSelection",F[1][F[0]-1]);B(Ap).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",B("#"+An),F[1][F[0]]]);B.isFunction(D.afterclickPgButtons)&&D.afterclickPgButtons.call(Ap,"prev",B("#"+An),F[1][F[0]-1]);Aj(F[0]-1,F)}return false})}b=a();Aj(b[0],b)}})},viewGridRow:function(C,D){D=B.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1},B.jgrid.view,D||{});A[B(this)[0].p.id]=D;return this.each(function(){function T(){(!0===A[P.p.id].closeOnEscape||!0===A[P.p.id].navkeys[0])&&setTimeout(function(){B(".ui-jqdialog-titlebar-close","#"+B.jgrid.jqID(G.modalhead)).focus()},0)}function M(Af,Ai,Aj,Ah){var Ag,Aa,Ab,z=0,a,Ae,Ac=[],Y=!1,Ad,c="<td class='CaptionTD form-view-label ui-widget-content' width='"+D.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",Z="",l=["integer","number","currency"],j=0,v=0,Am,Al,Ak;for(Ad=1;Ad<=Ah;Ad++){Z+=1===Ad?c:"<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>"}B(Ai.p.colModel).each(function(){Aa=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1;!Aa&&"right"===this.align&&(this.formatter&&-1!==B.inArray(this.formatter,l)?j=Math.max(j,parseInt(this.width,10)):v=Math.max(v,parseInt(this.width,10)))});Am=0!==j?j:0!==v?v:0;Y=B(Ai).jqGrid("getInd",Af);B(Ai.p.colModel).each(function(g){Ag=this.name;Al=!1;Ae=(Aa=this.editrules&&!0===this.editrules.edithidden?!1:!0===this.hidden?!0:!1)?"style='display:none'":"";Ak="boolean"!==typeof this.viewable?!0:this.viewable;if("cb"!==Ag&&"subgrid"!==Ag&&"rn"!==Ag&&Ak){a=!1===Y?"":Ag===Ai.p.ExpandColumn&&!0===Ai.p.treeGrid?B("td:eq("+g+")",Ai.rows[Y]).text():B("td:eq("+g+")",Ai.rows[Y]).html();Al="right"===this.align&&0!==Am?!0:!1;var h=B.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),e=parseInt(h.rowpos,10)||z+1,d=parseInt(2*(parseInt(h.colpos,10)||1),10);if(h.rowabove){var f=B("<tr><td class='contentinfo' colspan='"+2*Ah+"'>"+h.rowcontent+"</td></tr>");B(Aj).append(f);f[0].rp=e}Ab=B(Aj).find("tr[rowpos="+e+"]");0===Ab.length&&(Ab=B("<tr "+Ae+" rowpos='"+e+"'></tr>").addClass("FormData").attr("id","trv_"+Ag),B(Ab).append(Z),B(Aj).append(Ab),Ab[0].rp=e);B("td:eq("+(d-2)+")",Ab[0]).html("<b>"+(void 0===h.label?Ai.p.colNames[g]:h.label)+"</b>");B("td:eq("+(d-1)+")",Ab[0]).append("<span>"+a+"</span>").attr("id","v_"+Ag);Al&&B("td:eq("+(d-1)+") span",Ab[0]).css({"text-align":"right",width:Am+"px"});Ac[z]=g;z++}});0<z&&(Af=B("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*Ah-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+Af+"'/></td></tr>"),Af[0].rp=z+99,B(Aj).append(Af));return Ac}function I(j,k){var Z,a,Y=0,l,i;if(i=B(k).jqGrid("getInd",j,!0)){B("td",i).each(function(c){Z=k.p.colModel[c].name;a=k.p.colModel[c].editrules&&!0===k.p.colModel[c].editrules.edithidden?!1:!0===k.p.colModel[c].hidden?!0:!1;"cb"!==Z&&"subgrid"!==Z&&"rn"!==Z&&(l=Z===k.p.ExpandColumn&&!0===k.p.treeGrid?B(this).text():B(this).html(),Z=B.jgrid.jqID("v_"+Z),B("#"+Z+" span","#"+N).html(l),a&&B("#"+Z,"#"+N).parents("tr:first").hide(),Y++)}),0<Y&&B("#id_g","#"+N).val(j)}}function J(Z,a){var Y=a[1].length-1;0===Z?B("#pData","#"+N+"_2").addClass("ui-state-disabled"):void 0!==a[1][Z-1]&&B("#"+B.jgrid.jqID(a[1][Z-1])).hasClass("ui-state-disabled")?B("#pData",N+"_2").addClass("ui-state-disabled"):B("#pData","#"+N+"_2").removeClass("ui-state-disabled");Z===Y?B("#nData","#"+N+"_2").addClass("ui-state-disabled"):void 0!==a[1][Z+1]&&B("#"+B.jgrid.jqID(a[1][Z+1])).hasClass("ui-state-disabled")?B("#nData",N+"_2").addClass("ui-state-disabled"):B("#nData","#"+N+"_2").removeClass("ui-state-disabled")}function E(){var Y=B(P).jqGrid("getDataIDs"),Z=B("#id_g","#"+N).val();return[B.inArray(Z,Y),Y]}var P=this;if(P.grid&&C){var L=P.p.id,R="ViewGrid_"+B.jgrid.jqID(L),N="ViewTbl_"+B.jgrid.jqID(L),W="ViewGrid_"+L,S="ViewTbl_"+L,G={themodal:"viewmod"+L,modalhead:"viewhd"+L,modalcontent:"viewcnt"+L,scrollelm:R},Q=B.isFunction(A[P.p.id].beforeInitData)?A[P.p.id].beforeInitData:!1,O=!0,K=1,F=0;!0===D.recreateForm&&void 0!==B("#"+B.jgrid.jqID(G.themodal))[0]&&B("#"+B.jgrid.jqID(G.themodal)).remove();if(void 0!==B("#"+B.jgrid.jqID(G.themodal))[0]){Q&&(O=Q.call(P,B("#"+R)),void 0===O&&(O=!0));if(!1===O){return}B(".ui-jqdialog-title","#"+B.jgrid.jqID(G.modalhead)).html(D.caption);B("#FormError","#"+N).hide();I(C,P);B.isFunction(A[P.p.id].beforeShowForm)&&A[P.p.id].beforeShowForm.call(P,B("#"+R));B.jgrid.viewModal("#"+B.jgrid.jqID(G.themodal),{gbox:"#gbox_"+B.jgrid.jqID(L),jqm:D.jqModal,jqM:!1,overlay:D.overlay,modal:D.modal});T()}else{var X=isNaN(D.dataheight)?D.dataheight:D.dataheight+"px",V=isNaN(D.datawidth)?D.datawidth:D.datawidth+"px",W=B("<form name='FormPost' id='"+W+"' class='FormGrid' style='width:"+V+";overflow:auto;position:relative;height:"+X+";'></form>"),H=B("<table id='"+S+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");Q&&(O=Q.call(P,B("#"+R)),void 0===O&&(O=!0));if(!1===O){return}B(P.p.colModel).each(function(){var Y=this.formoptions;K=Math.max(K,Y?Y.colpos||0:0);F=Math.max(F,Y?Y.rowpos||0:0)});B(W).append(H);M(C,P,H,K);S="rtl"===P.p.direction?!0:!1;Q="<a href='javascript:void(0)' id='"+(S?"nData":"pData")+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>";O="<a href='javascript:void(0)' id='"+(S?"pData":"nData")+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>";X="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+D.bClose+"</a>";if(0<F){var U=[];B.each(B(H)[0].rows,function(Z,Y){U[Z]=Y});U.sort(function(Z,Y){return Z.rp>Y.rp?1:Z.rp<Y.rp?-1:0});B.each(U,function(Y,Z){B("tbody",H).append(Z)})}D.gbox="#gbox_"+B.jgrid.jqID(L);W=B("<div></div>").append(W).append("<table border='0' class='EditTable' id='"+N+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+D.labelswidth+"'>"+(S?O+Q:Q+O)+"</td><td class='EditButton'>"+X+"</td></tr></tbody></table>");B.jgrid.createModal(G,W,D,"#gview_"+B.jgrid.jqID(P.p.id),B("#gview_"+B.jgrid.jqID(P.p.id))[0]);S&&(B("#pData, #nData","#"+N+"_2").css("float","right"),B(".EditButton","#"+N+"_2").css("text-align","left"));D.viewPagerButtons||B("#pData, #nData","#"+N+"_2").hide();W=null;B("#"+G.themodal).keydown(function(Y){if(Y.which===27){A[P.p.id].closeOnEscape&&B.jgrid.hideModal("#"+B.jgrid.jqID(G.themodal),{gb:D.gbox,jqm:D.jqModal,onClose:D.onClose});return false}if(D.navkeys[0]===true){if(Y.which===D.navkeys[1]){B("#pData","#"+N+"_2").trigger("click");return false}if(Y.which===D.navkeys[2]){B("#nData","#"+N+"_2").trigger("click");return false}}});D.closeicon=B.extend([!0,"left","ui-icon-close"],D.closeicon);!0===D.closeicon[0]&&B("#cData","#"+N+"_2").addClass("right"===D.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+D.closeicon[2]+"'></span>");B.isFunction(D.beforeShowForm)&&D.beforeShowForm.call(P,B("#"+R));B.jgrid.viewModal("#"+B.jgrid.jqID(G.themodal),{gbox:"#gbox_"+B.jgrid.jqID(L),jqm:D.jqModal,overlay:D.overlay,modal:D.modal});B(".fm-button:not(.ui-state-disabled)","#"+N+"_2").hover(function(){B(this).addClass("ui-state-hover")},function(){B(this).removeClass("ui-state-hover")});T();B("#cData","#"+N+"_2").click(function(){B.jgrid.hideModal("#"+B.jgrid.jqID(G.themodal),{gb:"#gbox_"+B.jgrid.jqID(L),jqm:D.jqModal,onClose:D.onClose});return false});B("#nData","#"+N+"_2").click(function(){B("#FormError","#"+N).hide();var Y=E();Y[0]=parseInt(Y[0],10);if(Y[0]!==-1&&Y[1][Y[0]+1]){B.isFunction(D.onclickPgButtons)&&D.onclickPgButtons.call(P,"next",B("#"+R),Y[1][Y[0]]);I(Y[1][Y[0]+1],P);B(P).jqGrid("setSelection",Y[1][Y[0]+1]);B.isFunction(D.afterclickPgButtons)&&D.afterclickPgButtons.call(P,"next",B("#"+R),Y[1][Y[0]+1]);J(Y[0]+1,Y)}T();return false});B("#pData","#"+N+"_2").click(function(){B("#FormError","#"+N).hide();var Y=E();if(Y[0]!==-1&&Y[1][Y[0]-1]){B.isFunction(D.onclickPgButtons)&&D.onclickPgButtons.call(P,"prev",B("#"+R),Y[1][Y[0]]);I(Y[1][Y[0]-1],P);B(P).jqGrid("setSelection",Y[1][Y[0]-1]);B.isFunction(D.afterclickPgButtons)&&D.afterclickPgButtons.call(P,"prev",B("#"+R),Y[1][Y[0]-1]);J(Y[0]-1,Y)}T();return false})}W=E();J(W[0],W)}})},delGridRow:function(C,D){D=B.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},B.jgrid.del,D||{});A[B(this)[0].p.id]=D;return this.each(function(){var E=this;if(E.grid&&C){var M=B.isFunction(A[E.p.id].beforeShowForm),I=B.isFunction(A[E.p.id].afterShowForm),J=B.isFunction(A[E.p.id].beforeInitData)?A[E.p.id].beforeInitData:!1,F=E.p.id,P={},L=!0,S="DelTbl_"+B.jgrid.jqID(F),N,Q,T,H,R="DelTbl_"+F,O={themodal:"delmod"+F,modalhead:"delhd"+F,modalcontent:"delcnt"+F,scrollelm:S};B.isArray(C)&&(C=C.join());if(void 0!==B("#"+B.jgrid.jqID(O.themodal))[0]){J&&(L=J.call(E,B("#"+S)),void 0===L&&(L=!0));if(!1===L){return}B("#DelData>td","#"+S).text(C);B("#DelError","#"+S).hide();!0===A[E.p.id].processing&&(A[E.p.id].processing=!1,B("#dData","#"+S).removeClass("ui-state-active"));M&&A[E.p.id].beforeShowForm.call(E,B("#"+S));B.jgrid.viewModal("#"+B.jgrid.jqID(O.themodal),{gbox:"#gbox_"+B.jgrid.jqID(F),jqm:A[E.p.id].jqModal,jqM:!1,overlay:A[E.p.id].overlay,modal:A[E.p.id].modal})}else{var K=isNaN(A[E.p.id].dataheight)?A[E.p.id].dataheight:A[E.p.id].dataheight+"px",G=isNaN(D.datawidth)?D.datawidth:D.datawidth+"px",R="<div id='"+R+"' class='formdata' style='width:"+G+";overflow:auto;position:relative;height:"+K+";'><table class='DelTable'><tbody><tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>"+("<tr id='DelData' style='display:none'><td >"+C+"</td></tr>"),R=R+('<tr><td class="delmsg" style="white-space:pre;">'+A[E.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>"),R=R+"</tbody></table></div>"+("<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+S+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+("<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+D.bSubmit+"</a>")+"&#160;"+("<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+D.bCancel+"</a>")+"</td></tr></tbody></table>");D.gbox="#gbox_"+B.jgrid.jqID(F);B.jgrid.createModal(O,R,D,"#gview_"+B.jgrid.jqID(E.p.id),B("#gview_"+B.jgrid.jqID(E.p.id))[0]);J&&(L=J.call(E,B("#"+S)),void 0===L&&(L=!0));if(!1===L){return}B(".fm-button","#"+S+"_2").hover(function(){B(this).addClass("ui-state-hover")},function(){B(this).removeClass("ui-state-hover")});D.delicon=B.extend([!0,"left","ui-icon-scissors"],A[E.p.id].delicon);D.cancelicon=B.extend([!0,"left","ui-icon-cancel"],A[E.p.id].cancelicon);!0===D.delicon[0]&&B("#dData","#"+S+"_2").addClass("right"===D.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+D.delicon[2]+"'></span>");!0===D.cancelicon[0]&&B("#eData","#"+S+"_2").addClass("right"===D.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+D.cancelicon[2]+"'></span>");B("#dData","#"+S+"_2").click(function(){var W=[true,""],U,V=B("#DelData>td","#"+S).text();P={};B.isFunction(A[E.p.id].onclickSubmit)&&(P=A[E.p.id].onclickSubmit.call(E,A[E.p.id],V)||{});B.isFunction(A[E.p.id].beforeSubmit)&&(W=A[E.p.id].beforeSubmit.call(E,V));if(W[0]&&!A[E.p.id].processing){A[E.p.id].processing=true;T=E.p.prmNames;N=B.extend({},A[E.p.id].delData,P);H=T.oper;N[H]=T.deloper;Q=T.id;V=(""+V).split(",");if(!V.length){return false}for(U in V){V.hasOwnProperty(U)&&(V[U]=B.jgrid.stripPref(E.p.idPrefix,V[U]))}N[Q]=V.join();B(this).addClass("ui-state-active");U=B.extend({url:A[E.p.id].url||B(E).jqGrid("getGridParam","editurl"),type:A[E.p.id].mtype,data:B.isFunction(A[E.p.id].serializeDelData)?A[E.p.id].serializeDelData.call(E,N):N,complete:function(Y,X){var a;if(Y.status>=300&&Y.status!==304){W[0]=false;W[1]=B.isFunction(A[E.p.id].errorTextFormat)?A[E.p.id].errorTextFormat.call(E,Y):X+" Status: '"+Y.statusText+"'. Error code: "+Y.status}else{B.isFunction(A[E.p.id].afterSubmit)&&(W=A[E.p.id].afterSubmit.call(E,Y,N))}if(W[0]===false){B("#DelError>td","#"+S).html(W[1]);B("#DelError","#"+S).show()}else{if(A[E.p.id].reloadAfterSubmit&&E.p.datatype!=="local"){B(E).trigger("reloadGrid")}else{if(E.p.treeGrid===true){try{B(E).jqGrid("delTreeNode",E.p.idPrefix+V[0])}catch(Z){}}else{for(a=0;a<V.length;a++){B(E).jqGrid("delRowData",E.p.idPrefix+V[a])}}E.p.selrow=null;E.p.selarrrow=[]}B.isFunction(A[E.p.id].afterComplete)&&setTimeout(function(){A[E.p.id].afterComplete.call(E,Y,V)},500)}A[E.p.id].processing=false;B("#dData","#"+S+"_2").removeClass("ui-state-active");W[0]&&B.jgrid.hideModal("#"+B.jgrid.jqID(O.themodal),{gb:"#gbox_"+B.jgrid.jqID(F),jqm:D.jqModal,onClose:A[E.p.id].onClose})}},B.jgrid.ajaxOptions,A[E.p.id].ajaxDelOptions);if(!U.url&&!A[E.p.id].useDataProxy){if(B.isFunction(E.p.dataProxy)){A[E.p.id].useDataProxy=true}else{W[0]=false;W[1]=W[1]+(" "+B.jgrid.errors.nourl)}}if(W[0]){if(A[E.p.id].useDataProxy){U=E.p.dataProxy.call(E,U,"del_"+E.p.id);U===void 0&&(U=[true,""]);if(U[0]===false){W[0]=false;W[1]=U[1]||"Error deleting the selected row!"}else{B.jgrid.hideModal("#"+B.jgrid.jqID(O.themodal),{gb:"#gbox_"+B.jgrid.jqID(F),jqm:D.jqModal,onClose:A[E.p.id].onClose})}}else{B.ajax(U)}}}if(W[0]===false){B("#DelError>td","#"+S).html(W[1]);B("#DelError","#"+S).show()}return false});B("#eData","#"+S+"_2").click(function(){B.jgrid.hideModal("#"+B.jgrid.jqID(O.themodal),{gb:"#gbox_"+B.jgrid.jqID(F),jqm:A[E.p.id].jqModal,onClose:A[E.p.id].onClose});return false});M&&A[E.p.id].beforeShowForm.call(E,B("#"+S));B.jgrid.viewModal("#"+B.jgrid.jqID(O.themodal),{gbox:"#gbox_"+B.jgrid.jqID(F),jqm:A[E.p.id].jqModal,overlay:A[E.p.id].overlay,modal:A[E.p.id].modal})}I&&A[E.p.id].afterShowForm.call(E,B("#"+S));!0===A[E.p.id].closeOnEscape&&setTimeout(function(){B(".ui-jqdialog-titlebar-close","#"+B.jgrid.jqID(O.modalhead)).focus()},0)}})},navGrid:function(F,G,D,C,H,I,E){G=B.extend({edit:!0,editicon:"fa fa-pencil",add:!0,addicon:"fa fa-plus",del:!0,delicon:"fa fa-trash-o red",search:!0,searchicon:"fa fa-search",refresh:!0,refreshicon:"fa fa-refresh",refreshstate:"firstpage",view:!1,viewicon:"fa fa-search",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},B.jgrid.nav,G||{});return this.each(function(){if(!this.nav){var O={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},L=this,R;if(L.grid&&"string"===typeof F){void 0===B("#"+O.themodal)[0]&&(!G.alerttop&&!G.alertleft&&(void 0!==window.innerWidth?(G.alertleft=window.innerWidth,G.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(G.alertleft=document.documentElement.clientWidth,G.alerttop=document.documentElement.clientHeight):(G.alertleft=1024,G.alerttop=768),G.alertleft=G.alertleft/2-parseInt(G.alertwidth,10)/2,G.alerttop=G.alerttop/2-25),B.jgrid.createModal(O,"<div>"+G.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+B.jgrid.jqID(L.p.id),jqModal:!0,drag:!0,resize:!0,caption:G.alertcap,top:G.alerttop,left:G.alertleft,width:G.alertwidth,height:G.alertheight,closeOnEscape:G.closeOnEscape,zIndex:G.alertzIndex},"#gview_"+B.jgrid.jqID(L.p.id),B("#gbox_"+B.jgrid.jqID(L.p.id))[0],!0));var M=1,P,S=function(){B(this).hasClass("ui-state-disabled")||B(this).addClass("ui-state-hover")},J=function(){B(this).removeClass("ui-state-hover")};G.cloneToTop&&L.p.toppager&&(M=2);for(P=0;P<M;P++){var Q=B("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),N,K;0===P?(N=F,K=L.p.id,N===L.p.toppager&&(K+="_top",M=1)):(N=L.p.toppager,K=L.p.id+"_top");"rtl"===L.p.direction&&B(Q).attr("dir","rtl").css("float","right");G.add&&(C=C||{},R=B("<td class='ui-pg-button ui-corner-all'></td>"),B(R).append("<div class='ui-pg-div'><span class='ui-icon "+G.addicon+"'></span>"+G.addtext+"</div>"),B("tr",Q).append(R),B(R,Q).attr({title:G.addtitle||"",id:C.id||"add_"+K}).click(function(){B(this).hasClass("ui-state-disabled")||(B.isFunction(G.addfunc)?G.addfunc.call(L):B(L).jqGrid("editGridRow","new",C));return false}).hover(S,J),R=null);G.edit&&(R=B("<td class='ui-pg-button ui-corner-all'></td>"),D=D||{},B(R).append("<div class='ui-pg-div'><span class='ui-icon "+G.editicon+"'></span>"+G.edittext+"</div>"),B("tr",Q).append(R),B(R,Q).attr({title:G.edittitle||"",id:D.id||"edit_"+K}).click(function(){if(!B(this).hasClass("ui-state-disabled")){var T=L.p.selrow;if(T){B.isFunction(G.editfunc)?G.editfunc.call(L,T):B(L).jqGrid("editGridRow",T,D)}else{B.jgrid.viewModal("#"+O.themodal,{gbox:"#gbox_"+B.jgrid.jqID(L.p.id),jqm:true});B("#jqg_alrt").focus()}}return false}).hover(S,J),R=null);G.view&&(R=B("<td class='ui-pg-button ui-corner-all'></td>"),E=E||{},B(R).append("<div class='ui-pg-div'><span class='ui-icon "+G.viewicon+"'></span>"+G.viewtext+"</div>"),B("tr",Q).append(R),B(R,Q).attr({title:G.viewtitle||"",id:E.id||"view_"+K}).click(function(){if(!B(this).hasClass("ui-state-disabled")){var T=L.p.selrow;if(T){B.isFunction(G.viewfunc)?G.viewfunc.call(L,T):B(L).jqGrid("viewGridRow",T,E)}else{B.jgrid.viewModal("#"+O.themodal,{gbox:"#gbox_"+B.jgrid.jqID(L.p.id),jqm:true});B("#jqg_alrt").focus()}}return false}).hover(S,J),R=null);G.del&&(R=B("<td class='ui-pg-button ui-corner-all'></td>"),H=H||{},B(R).append("<div class='ui-pg-div'><span class='ui-icon "+G.delicon+"'></span>"+G.deltext+"</div>"),B("tr",Q).append(R),B(R,Q).attr({title:G.deltitle||"",id:H.id||"del_"+K}).click(function(){if(!B(this).hasClass("ui-state-disabled")){var T;if(L.p.multiselect){T=L.p.selarrrow;T.length===0&&(T=null)}else{T=L.p.selrow}if(T){B.isFunction(G.delfunc)?G.delfunc.call(L,T):B(L).jqGrid("delGridRow",T,H)}else{B.jgrid.viewModal("#"+O.themodal,{gbox:"#gbox_"+B.jgrid.jqID(L.p.id),jqm:true});B("#jqg_alrt").focus()}}return false}).hover(S,J),R=null);(G.add||G.edit||G.del||G.view)&&B("tr",Q).append("<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>");G.search&&(R=B("<td class='ui-pg-button ui-corner-all'></td>"),I=I||{},B(R).append("<div class='ui-pg-div'><span class='ui-icon "+G.searchicon+"'></span>"+G.searchtext+"</div>"),B("tr",Q).append(R),B(R,Q).attr({title:G.searchtitle||"",id:I.id||"search_"+K}).click(function(){B(this).hasClass("ui-state-disabled")||(B.isFunction(G.searchfunc)?G.searchfunc.call(L,I):B(L).jqGrid("searchGrid",I));return false}).hover(S,J),I.showOnLoad&&!0===I.showOnLoad&&B(R,Q).click(),R=null);G.refresh&&(R=B("<td class='ui-pg-button ui-corner-all'></td>"),B(R).append("<div class='ui-pg-div'><span class='ui-icon "+G.refreshicon+"'></span>"+G.refreshtext+"</div>"),B("tr",Q).append(R),B(R,Q).attr({title:G.refreshtitle||"",id:"refresh_"+K}).click(function(){if(!B(this).hasClass("ui-state-disabled")){B.isFunction(G.beforeRefresh)&&G.beforeRefresh.call(L);L.p.search=false;try{var V=L.p.id;L.p.postData.filters="";try{B("#fbox_"+B.jgrid.jqID(V)).jqFilter("resetFilter")}catch(T){}B.isFunction(L.clearToolbar)&&L.clearToolbar.call(L,false)}catch(U){}switch(G.refreshstate){case"firstpage":B(L).trigger("reloadGrid",[{page:1}]);break;case"current":B(L).trigger("reloadGrid",[{current:true}])}B.isFunction(G.afterRefresh)&&G.afterRefresh.call(L)}return false}).hover(S,J),R=null);R=B(".ui-jqgrid").css("font-size")||"11px";B("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+R+";visibility:hidden;' ></div>");R=B(Q).clone().appendTo("#testpg2").width();B("#testpg2").remove();B(N+"_"+G.position,N).append(Q);L.p._nvtd&&(R>L.p._nvtd[0]&&(B(N+"_"+G.position,N).width(R),L.p._nvtd[0]=R),L.p._nvtd[1]=R);Q=R=R=null;this.nav=!0}}}})},navButtonAdd:function(C,D){D=B.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},D||{});return this.each(function(){if(this.grid){"string"===typeof C&&0!==C.indexOf("#")&&(C="#"+B.jgrid.jqID(C));var F=B(".navtable",C)[0],E=this;if(F&&!(D.id&&void 0!==B("#"+B.jgrid.jqID(D.id),F)[0])){var G=B("<td></td>");"NONE"===D.buttonicon.toString().toUpperCase()?B(G).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+D.caption+"</div>"):B(G).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+D.buttonicon+"'></span>"+D.caption+"</div>");D.id&&B(G).attr("id",D.id);"first"===D.position?0===F.rows[0].cells.length?B("tr",F).append(G):B("tr td:eq(0)",F).before(G):B("tr",F).append(G);B(G,F).attr("title",D.title||"").click(function(H){B(this).hasClass("ui-state-disabled")||B.isFunction(D.onClickButton)&&D.onClickButton.call(E,H);return !1}).hover(function(){B(this).hasClass("ui-state-disabled")||B(this).addClass("ui-state-hover")},function(){B(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(C,D){D=B.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},D||{});return this.each(function(){if(this.grid){"string"===typeof C&&0!==C.indexOf("#")&&(C="#"+B.jgrid.jqID(C));var F=B(".navtable",C)[0];if(F){var E="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+D.sepclass+"'></span>"+D.sepcontent+"</td>";"first"===D.position?0===F.rows[0].cells.length?B("tr",F).append(E):B("tr td:eq(0)",F).before(E):B("tr",F).append(E)}}})},GridToForm:function(C,D){return this.each(function(){var F=this,E;if(F.grid){var G=B(F).jqGrid("getRowData",C);if(G){for(E in G){G.hasOwnProperty(E)&&(B("[name="+B.jgrid.jqID(E)+"]",D).is("input:radio")||B("[name="+B.jgrid.jqID(E)+"]",D).is("input:checkbox")?B("[name="+B.jgrid.jqID(E)+"]",D).each(function(){if(B(this).val()==G[E]){B(this)[F.p.useProp?"prop":"attr"]("checked",!0)}else{B(this)[F.p.useProp?"prop":"attr"]("checked",!1)}}):B("[name="+B.jgrid.jqID(E)+"]",D).val(G[E]))}}}})},FormToGrid:function(E,F,D,C){return this.each(function(){if(this.grid){D||(D="set");C||(C="first");var G=B(F).serializeArray(),H={};B.each(G,function(J,I){H[I.name]=I.value});"add"===D?B(this).jqGrid("addRowData",E,H,C):"set"===D&&B(this).jqGrid("setRowData",E,H)}})}})})(jQuery);(function(A){A.fn.jqFilter=function(B){if("string"===typeof B){var D=A.fn.jqFilter[B];if(!D){throw"jqFilter - No such method: "+B}var E=A.makeArray(arguments).slice(1);return D.apply(this,E)}var C=A.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:"eq,ne,lt,le,gt,ge,nu,nn,in,ni".split(","),stropts:"eq,ne,bw,bn,ew,en,cn,nc,nu,nn,in,ni".split(","),strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},A.jgrid.filter,B||{});return this.each(function(){if(!this.filter){this.p=C;if(null===this.p.filter||void 0===this.p.filter){this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}}var F,H=this.p.columns.length,K,I=/msie/i.test(navigator.userAgent)&&!window.opera;this.p.initFilter=A.extend(!0,{},this.p.filter);if(H){for(F=0; F<H; F++){if(K=this.p.columns[F],K.stype?K.inputtype=K.stype:K.inputtype||(K.inputtype="text"),K.sorttype?K.searchtype=K.sorttype:K.searchtype||(K.searchtype="string"),void 0===K.hidden&&(K.hidden=!1),K.label||(K.label=K.name),K.register&&(K.name=K.register),K.hasOwnProperty("searchoptions")||(K.searchoptions={}),!K.hasOwnProperty("searchrules")){K.searchrules={}}}this.p.showQuery&&A(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var J=function(){return A("#"+A.jgrid.jqID(C.id))[0]||null},G=function(L, O){var M=[!0,""],N=J();if(A.isFunction(O.searchrules)){M=O.searchrules.call(N,L,O)}else{if(A.jgrid&&A.jgrid.checkValues){try{M=A.jgrid.checkValues.call(N,L,-1,O.searchrules,O.label)}catch(P){}}}M&&M.length&&!1===M[0]&&(C.error=!M[0],C.errmsg=M[1])};this.onchange=function(){this.p.error=!1;this.p.errmsg="";return A.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){A("table.group:first",this).remove();var L=this.createTableForGroup(C.filter,null);A(this).append(L);A.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)};this.createTableForGroup=function(T,M){var Q=this,R,N=A("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>"),L="left";"rtl"===this.p.direction&&(L="right",N.attr("dir","rtl"));null===M&&N.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+L+"'></th></tr>");var O=A("<tr></tr>");N.append(O);L=A("<th colspan='5' align='"+L+"'></th>");O.append(L);if(!0===this.p.ruleButtons){var U=A("<select class='opsel'></select>");L.append(U);var O="",P;for(R=0;R<C.groupOps.length;R++){P=T.groupOp===Q.p.groupOps[R].op?" selected='selected'":"",O+="<option value='"+Q.p.groupOps[R].op+"'"+P+">"+Q.p.groupOps[R].text+"</option>"}U.append(O).bind("change",function(){T.groupOp=A(U).val();Q.onchange()})}O="<span></span>";this.p.groupButton&&(O=A("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),O.bind("click",function(){if(T.groups===void 0){T.groups=[]}T.groups.push({groupOp:C.groupOps[0].op,rules:[],groups:[]});Q.reDraw();Q.onchange();return false}));L.append(O);if(!0===this.p.ruleButtons){var O=A("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),S;O.bind("click",function(){if(T.rules===void 0){T.rules=[]}for(R=0;R<Q.p.columns.length;R++){var V=Q.p.columns[R].search===void 0?true:Q.p.columns[R].search,W=Q.p.columns[R].hidden===true;if(Q.p.columns[R].searchoptions.searchhidden===true&&V||V&&!W){S=Q.p.columns[R];break}}V=S.searchoptions.sopt?S.searchoptions.sopt:Q.p.sopt?Q.p.sopt:A.inArray(S.searchtype,Q.p.strarr)!==-1?Q.p.stropts:Q.p.numopts;T.rules.push({field:S.name,op:V[0],data:""});Q.reDraw();return false});L.append(O)}null!==M&&(O=A("<input type='button' value='-' title='Delete group' class='delete-group'/>"),L.append(O),O.bind("click",function(){for(R=0;R<M.groups.length;R++){if(M.groups[R]===T){M.groups.splice(R,1);break}}Q.reDraw();Q.onchange();return false}));if(void 0!==T.groups){for(R=0;R<T.groups.length;R++){L=A("<tr></tr>"),N.append(L),O=A("<td class='first'></td>"),L.append(O),O=A("<td colspan='4'></td>"),O.append(this.createTableForGroup(T.groups[R],T)),L.append(O)}}void 0===T.groupOp&&(T.groupOp=Q.p.groupOps[0].op);if(void 0!==T.rules){for(R=0;R<T.rules.length;R++){N.append(this.createTableRowForRule(T.rules[R],T))}}return N};this.createTableRowForRule=function(Z,P){var W=this,X=J(),Q=A("<tr></tr>"),n,R,Y,S,a="",N;Q.append("<td class='first'></td>");var V=A("<td class='columns'></td>");Q.append(V);var U=A("<select></select>"),T,O=[];V.append(U);U.bind("change",function(){Z.field=A(U).val();Y=A(this).parents("tr:first");for(n=0;n<W.p.columns.length;n++){if(W.p.columns[n].name===Z.field){S=W.p.columns[n];break}}if(S){S.searchoptions.id=A.jgrid.randId();I&&"text"===S.inputtype&&!S.searchoptions.size&&(S.searchoptions.size=10);var b=A.jgrid.createEl.call(X,S.inputtype,S.searchoptions,"",!0,W.p.ajaxSelectOptions,!0);A(b).addClass("input-elm");R=S.searchoptions.sopt?S.searchoptions.sopt:W.p.sopt?W.p.sopt:-1!==A.inArray(S.searchtype,W.p.strarr)?W.p.stropts:W.p.numopts;var c="",e=0;O=[];A.each(W.p.ops,function(){O.push(this.oper)});for(n=0;n<R.length;n++){T=A.inArray(R[n],O),-1!==T&&(0===e&&(Z.op=W.p.ops[T].oper),c+="<option value='"+W.p.ops[T].oper+"'>"+W.p.ops[T].text+"</option>",e++)}A(".selectopts",Y).empty().append(c);A(".selectopts",Y)[0].selectedIndex=0;A.jgrid.msie&&9>A.jgrid.msiever()&&(c=parseInt(A("select.selectopts",Y)[0].offsetWidth,10)+1,A(".selectopts",Y).width(c),A(".selectopts",Y).css("width","auto"));A(".data",Y).empty().append(b);A.jgrid.bindEv.call(X,b,S.searchoptions);A(".input-elm",Y).bind("change",function(g){var f=A(this).hasClass("ui-autocomplete-input")?200:0;setTimeout(function(){var h=g.target;Z.data=h.nodeName.toUpperCase()==="SPAN"&&S.searchoptions&&A.isFunction(S.searchoptions.custom_value)?S.searchoptions.custom_value.call(X,A(h).children(".customelement:first"),"get"):h.value;W.onchange()},f)});setTimeout(function(){Z.data=A(b).val();W.onchange()},0)}});for(n=V=0;n<W.p.columns.length;n++){N=void 0===W.p.columns[n].search?!0:W.p.columns[n].search;var L=!0===W.p.columns[n].hidden;if(!0===W.p.columns[n].searchoptions.searchhidden&&N||N&&!L){N="",Z.field===W.p.columns[n].name&&(N=" selected='selected'",V=n),a+="<option value='"+W.p.columns[n].name+"'"+N+">"+W.p.columns[n].label+"</option>"}}U.append(a);a=A("<td class='operators'></td>");Q.append(a);S=C.columns[V];S.searchoptions.id=A.jgrid.randId();I&&"text"===S.inputtype&&!S.searchoptions.size&&(S.searchoptions.size=10);V=A.jgrid.createEl.call(X,S.inputtype,S.searchoptions,Z.data,!0,W.p.ajaxSelectOptions,!0);if("nu"===Z.op||"nn"===Z.op){A(V).attr("readonly","true"),A(V).attr("disabled","true")}var M=A("<select class='selectopts'></select>");a.append(M);M.bind("change",function(){Z.op=A(M).val();Y=A(this).parents("tr:first");var b=A(".input-elm",Y)[0];if(Z.op==="nu"||Z.op==="nn"){Z.data="";b.value="";b.setAttribute("readonly","true");b.setAttribute("disabled","true")}else{b.removeAttribute("readonly");b.removeAttribute("disabled")}W.onchange()});R=S.searchoptions.sopt?S.searchoptions.sopt:W.p.sopt?W.p.sopt:-1!==A.inArray(S.searchtype,W.p.strarr)?W.p.stropts:W.p.numopts;a="";A.each(W.p.ops,function(){O.push(this.oper)});for(n=0;n<R.length;n++){T=A.inArray(R[n],O),-1!==T&&(N=Z.op===W.p.ops[T].oper?" selected='selected'":"",a+="<option value='"+W.p.ops[T].oper+"'"+N+">"+W.p.ops[T].text+"</option>")}M.append(a);a=A("<td class='data'></td>");Q.append(a);a.append(V);A.jgrid.bindEv.call(X,V,S.searchoptions);A(V).addClass("input-elm").bind("change",function(){Z.data=S.inputtype==="custom"?S.searchoptions.custom_value.call(X,A(this).children(".customelement:first"),"get"):A(this).val();W.onchange()});a=A("<td></td>");Q.append(a);!0===this.p.ruleButtons&&(V=A("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>"),a.append(V),V.bind("click",function(){for(n=0;n<P.rules.length;n++){if(P.rules[n]===Z){P.rules.splice(n,1);break}}W.reDraw();W.onchange();return false}));return Q};this.getStringForGroup=function(O){var L="(",M;if(void 0!==O.groups){for(M=0;M<O.groups.length;M++){1<L.length&&(L+=" "+O.groupOp+" ");try{L+=this.getStringForGroup(O.groups[M])}catch(N){alert(N)}}}if(void 0!==O.rules){try{for(M=0;M<O.rules.length;M++){1<L.length&&(L+=" "+O.groupOp+" "),L+=this.getStringForRule(O.rules[M])}}catch(P){alert(P)}}L+=")";return"()"===L?"":L};this.getStringForRule=function(M){var P="",N="",O,L;for(O=0;O<this.p.ops.length;O++){if(this.p.ops[O].oper===M.op){P=this.p.operands.hasOwnProperty(M.op)?this.p.operands[M.op]:"";N=this.p.ops[O].oper;break}}for(O=0;O<this.p.columns.length;O++){if(this.p.columns[O].name===M.field){L=this.p.columns[O];break}}if(void 0===L){return""}O=M.data;if("bw"===N||"bn"===N){O+="%"}if("ew"===N||"en"===N){O="%"+O}if("cn"===N||"nc"===N){O="%"+O+"%"}if("in"===N||"ni"===N){O=" ("+O+")"}C.errorcheck&&G(M.data,L);return -1!==A.inArray(L.searchtype,["int","integer","float","number","currency"])||"nn"===N||"nu"===N?M.field+" "+P+" "+O:M.field+" "+P+' "'+O+'"'};this.resetFilter=function(){this.p.filter=A.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){A("th.ui-state-error",this).html("");A("tr.error",this).hide()};this.showError=function(){A("th.ui-state-error",this).html(this.p.errmsg);A("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(C.filter)};this.toString=function(){function M(Q){var R="(",S;if(void 0!==Q.groups){for(S=0;S<Q.groups.length;S++){1<R.length&&(R="OR"===Q.groupOp?R+" || ":R+" && "),R+=M(Q.groups[S])}}if(void 0!==Q.rules){for(S=0;S<Q.rules.length;S++){1<R.length&&(R="OR"===Q.groupOp?R+" || ":R+" && ");var O=Q.rules[S];if(L.p.errorcheck){for(var N=void 0,P=void 0,N=0;N<L.p.columns.length;N++){if(L.p.columns[N].name===O.field){P=L.p.columns[N];break}}P&&G(O.data,P)}R+=O.op+"(item."+O.field+",'"+O.data+"')"}}R+=")";return"()"===R?"":R}var L=this;return M(this.p.filter)};this.reDraw();if(this.p.showQuery){this.onchange()}this.filter=!0}}})};A.extend(A.fn.jqFilter,{toSQLString:function(){var B="";this.each(function(){B=this.toUserFriendlyString()});return B},filterData:function(){var B;this.each(function(){B=this.p.filter});return B},getParameter:function(B){return void 0!==B&&this.p.hasOwnProperty(B)?this.p[B]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(B){"string"===typeof B&&(B=A.jgrid.parse(B));this.each(function(){this.p.filter=B;this.reDraw();this.onchange()})}})})(jQuery);(function(A){A.jgrid.inlineEdit=A.jgrid.inlineEdit||{};A.jgrid.extend({editRow:function(I,H,B,F,G,K,E,D,J){var C={},L=A.makeArray(arguments).slice(1);if("object"===A.type(L[0])){C=L[0]}else{if(void 0!==H&&(C.keys=H),A.isFunction(B)&&(C.oneditfunc=B),A.isFunction(F)&&(C.successfunc=F),void 0!==G&&(C.url=G),void 0!==K&&(C.extraparam=K),A.isFunction(E)&&(C.aftersavefunc=E),A.isFunction(D)&&(C.errorfunc=D),A.isFunction(J)){C.afterrestorefunc=J}}C=A.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},A.jgrid.inlineEdit,C);return this.each(function(){var T=this,Q,R,M=0,O=null,P={},S,N;if(T.grid&&(S=A(T).jqGrid("getInd",I,!0),!1!==S&&"0"===(A(S).attr("editable")||"0")&&!A(S).hasClass("not-editable-row"))){N=T.p.colModel,A('td[role="gridcell"]',S).each(function(U){Q=N[U].name;var Y=!0===T.p.treeGrid&&Q===T.p.ExpandColumn;if(Y){R=A("span:first",this).html()}else{try{R=A.unformat.call(T,this,{rowId:I,colModel:N[U]},U)}catch(V){R=N[U].edittype&&"textarea"===N[U].edittype?A(this).text():A(this).html()}}if("cb"!==Q&&"subgrid"!==Q&&"rn"!==Q&&(T.p.autoencode&&(R=A.jgrid.htmlDecode(R)),P[Q]=R,!0===N[U].editable)){null===O&&(O=U);Y?A("span:first",this).html(""):A(this).html("");var X=A.extend({},N[U].editoptions||{},{id:I+"_"+Q,name:Q});N[U].edittype||(N[U].edittype="text");if("&nbsp;"===R||"&#160;"===R||1===R.length&&160===R.charCodeAt(0)){R=""}var W=A.jgrid.createEl.call(T,N[U].edittype,X,R,!0,A.extend({},A.jgrid.ajaxOptions,T.p.ajaxSelectOptions||{}));A(W).addClass("editable");Y?A("span:first",this).append(W):A(this).append(W);A.jgrid.bindEv.call(T,W,X);"select"===N[U].edittype&&void 0!==N[U].editoptions&&!0===N[U].editoptions.multiple&&void 0===N[U].editoptions.dataUrl&&A.jgrid.msie&&A(W).width(A(W).width());M++}}),0<M&&(P.id=I,T.p.savedRow.push(P),A(S).attr("editable","1"),A("td:eq("+O+") input",S).focus(),!0===C.keys&&A(S).bind("keydown",function(W){if(27===W.keyCode){A(T).jqGrid("restoreRow",I,C.afterrestorefunc);if(T.p._inlinenav){try{A(T).jqGrid("showAddEditButtons")}catch(V){}}return !1}if(13===W.keyCode){if("TEXTAREA"===W.target.tagName){return !0}if(A(T).jqGrid("saveRow",I,C)&&T.p._inlinenav){try{A(T).jqGrid("showAddEditButtons")}catch(U){}}return !1}}),A(T).triggerHandler("jqGridInlineEditRow",[I,C]),A.isFunction(C.oneditfunc)&&C.oneditfunc.call(T,I))}})},saveRow:function(R,Q,V,N,O,T,M){var K=A.makeArray(arguments).slice(1),S={};if("object"===A.type(K[0])){S=K[0]}else{if(A.isFunction(Q)&&(S.successfunc=Q),void 0!==V&&(S.url=V),void 0!==N&&(S.extraparam=N),A.isFunction(O)&&(S.aftersavefunc=O),A.isFunction(T)&&(S.errorfunc=T),A.isFunction(M)){S.afterrestorefunc=M}}var S=A.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},A.jgrid.inlineEdit,S),I=!1,U=this[0],P,L={},F={},B={},G,C,E;if(!U.grid){return I}E=A(U).jqGrid("getInd",R,!0);if(!1===E){return I}K=A(E).attr("editable");S.url=S.url||U.p.editurl;if("1"===K){var J;A('td[role="gridcell"]',E).each(function(a){J=U.p.colModel[a];P=J.name;if("cb"!==P&&"subgrid"!==P&&!0===J.editable&&"rn"!==P&&!A(this).hasClass("not-editable-cell")){switch(J.edittype){case"checkbox":var Z=["Yes","No"];J.editoptions&&(Z=J.editoptions.value.split(":"));L[P]=A("input",this).is(":checked")?Z[0]:Z[1];break;case"text":case"password":case"textarea":case"button":L[P]=A("input, textarea",this).val();break;case"select":if(J.editoptions.multiple){var Z=A("select",this),X=[];L[P]=A(Z).val();L[P]=L[P]?L[P].join(","):"";A("select option:selected",this).each(function(b,e){X[b]=A(e).text()});F[P]=X.join(",")}else{L[P]=A("select option:selected",this).val(),F[P]=A("select option:selected",this).text()}J.formatter&&"select"===J.formatter&&(F={});break;case"custom":try{if(J.editoptions&&A.isFunction(J.editoptions.custom_value)){if(L[P]=J.editoptions.custom_value.call(U,A(".customelement",this),"get"),void 0===L[P]){throw"e2"}}else{throw"e1"}}catch(Y){"e1"===Y&&A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_value' "+A.jgrid.edit.msg.nodefined,A.jgrid.edit.bClose),"e2"===Y?A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_value' "+A.jgrid.edit.msg.novalue,A.jgrid.edit.bClose):A.jgrid.info_dialog(A.jgrid.errors.errcap,Y.message,A.jgrid.edit.bClose)}}C=A.jgrid.checkValues.call(U,L[P],a);if(!1===C[0]){return C[1]=L[P]+" "+C[1],!1}U.p.autoencode&&(L[P]=A.jgrid.htmlEncode(L[P]));"clientArray"!==S.url&&J.editoptions&&!0===J.editoptions.NullIfEmpty&&""===L[P]&&(B[P]="null")}});if(!1===C[0]){try{var H=U.rows.namedItem(R),D=A.jgrid.findPos(H);A.jgrid.info_dialog(A.jgrid.errors.errcap,C[1],A.jgrid.edit.bClose,{left:D[0],top:D[1]+A(H).outerHeight()})}catch(W){alert(C[1])}return I}K=U.p.prmNames;H=R;D=!1===U.p.keyIndex?K.id:U.p.colModel[U.p.keyIndex+(!0===U.p.rownumbers?1:0)+(!0===U.p.multiselect?1:0)+(!0===U.p.subGrid?1:0)].name;if(L){L[K.oper]=K.editoper;if(void 0===L[D]||""===L[D]){L[D]=R}else{if(E.id!==U.p.idPrefix+L[D]&&(K=A.jgrid.stripPref(U.p.idPrefix,R),void 0!==U.p._index[K]&&(U.p._index[L[D]]=U.p._index[K],delete U.p._index[K]),R=U.p.idPrefix+L[D],A(E).attr("id",R),U.p.selrow===H&&(U.p.selrow=R),A.isArray(U.p.selarrrow)&&(K=A.inArray(H,U.p.selarrrow),0<=K&&(U.p.selarrrow[K]=R)),U.p.multiselect)){K="jqg_"+U.p.id+"_"+R,A("input.cbox",E).attr("id",K).attr("name",K)}}void 0===U.p.inlineData&&(U.p.inlineData={});L=A.extend({},L,U.p.inlineData,S.extraparam)}if("clientArray"===S.url){L=A.extend({},L,F);U.p.autoencode&&A.each(L,function(X,Y){L[X]=A.jgrid.htmlDecode(Y)});K=A(U).jqGrid("setRowData",R,L);A(E).attr("editable","0");for(D=0;D<U.p.savedRow.length;D++){if(""+U.p.savedRow[D].id===""+H){G=D;break}}0<=G&&U.p.savedRow.splice(G,1);A(U).triggerHandler("jqGridInlineAfterSaveRow",[R,K,L,S]);A.isFunction(S.aftersavefunc)&&S.aftersavefunc.call(U,R,K,S);I=!0;A(E).removeClass("jqgrid-new-row").unbind("keydown")}else{A("#lui_"+A.jgrid.jqID(U.p.id)).show(),B=A.extend({},L,B),B[D]=A.jgrid.stripPref(U.p.idPrefix,B[D]),A.ajax(A.extend({url:S.url,data:A.isFunction(U.p.serializeRowData)?U.p.serializeRowData.call(U,B):B,type:S.mtype,async:!1,complete:function(a,X){A("#lui_"+A.jgrid.jqID(U.p.id)).hide();if("success"===X){var Z=!0,Y;Y=A(U).triggerHandler("jqGridInlineSuccessSaveRow",[a,R,S]);A.isArray(Y)||(Y=[!0,L]);Y[0]&&A.isFunction(S.successfunc)&&(Y=S.successfunc.call(U,a));A.isArray(Y)?(Z=Y[0],L=Y[1]||L):Z=Y;if(!0===Z){U.p.autoencode&&A.each(L,function(b,e){L[b]=A.jgrid.htmlDecode(e)});L=A.extend({},L,F);A(U).jqGrid("setRowData",R,L);A(E).attr("editable","0");for(Z=0;Z<U.p.savedRow.length;Z++){if(""+U.p.savedRow[Z].id===""+R){G=Z;break}}0<=G&&U.p.savedRow.splice(G,1);A(U).triggerHandler("jqGridInlineAfterSaveRow",[R,a,L,S]);A.isFunction(S.aftersavefunc)&&S.aftersavefunc.call(U,R,a);I=!0;A(E).removeClass("jqgrid-new-row").unbind("keydown")}else{A(U).triggerHandler("jqGridInlineErrorSaveRow",[R,a,X,null,S]),A.isFunction(S.errorfunc)&&S.errorfunc.call(U,R,a,X,null),!0===S.restoreAfterError&&A(U).jqGrid("restoreRow",R,S.afterrestorefunc)}}},error:function(a,Z,X){A("#lui_"+A.jgrid.jqID(U.p.id)).hide();A(U).triggerHandler("jqGridInlineErrorSaveRow",[R,a,Z,X,S]);if(A.isFunction(S.errorfunc)){S.errorfunc.call(U,R,a,Z,X)}else{a=a.responseText||a.statusText;try{A.jgrid.info_dialog(A.jgrid.errors.errcap,'<div class="ui-state-error">'+a+"</div>",A.jgrid.edit.bClose,{buttonalign:"right"})}catch(Y){alert(a)}}!0===S.restoreAfterError&&A(U).jqGrid("restoreRow",R,S.afterrestorefunc)}},A.jgrid.ajaxOptions,U.p.ajaxRowOptions||{}))}}return I},restoreRow:function(E,D){var B=A.makeArray(arguments).slice(1),C={};"object"===A.type(B[0])?C=B[0]:A.isFunction(D)&&(C.afterrestorefunc=D);C=A.extend(!0,{},A.jgrid.inlineEdit,C);return this.each(function(){var I=this,G,H,F={},K;if(I.grid){H=A(I).jqGrid("getInd",E,true);if(H!==false){for(K=0;K<I.p.savedRow.length;K++){if(""+I.p.savedRow[K].id===""+E){G=K;break}}if(G>=0){if(A.isFunction(A.fn.datepicker)){try{A("input.hasDatepicker","#"+A.jgrid.jqID(H.id)).datepicker("hide")}catch(J){}}A.each(I.p.colModel,function(){this.editable===true&&I.p.savedRow[G].hasOwnProperty(this.name)&&(F[this.name]=I.p.savedRow[G][this.name])});A(I).jqGrid("setRowData",E,F);A(H).attr("editable","0").unbind("keydown");I.p.savedRow.splice(G,1);A("#"+A.jgrid.jqID(E),"#"+A.jgrid.jqID(I.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){A(I).jqGrid("delRowData",E);A(I).jqGrid("showAddEditButtons")},0)}A(I).triggerHandler("jqGridInlineAfterRestoreRow",[E]);A.isFunction(C.afterrestorefunc)&&C.afterrestorefunc.call(I,E)}}})},addRow:function(B){B=A.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},B||{});return this.each(function(){if(this.grid){var D=this;B.rowID=A.isFunction(B.rowID)?B.rowID.call(D,B):null!=B.rowID?B.rowID:A.jgrid.randId();!0===B.useDefValues&&A(D.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var E=this.editoptions.defaultValue,E=A.isFunction(E)?E.call(D):E;B.initdata[this.name]=E}});A(D).jqGrid("addRowData",B.rowID,B.initdata,B.position);B.rowID=D.p.idPrefix+B.rowID;A("#"+A.jgrid.jqID(B.rowID),"#"+A.jgrid.jqID(D.p.id)).addClass("jqgrid-new-row");if(B.useFormatter){A("#"+A.jgrid.jqID(B.rowID)+" .ui-inline-edit","#"+A.jgrid.jqID(D.p.id)).click()}else{var C=D.p.prmNames;B.addRowParams.extraparam[C.oper]=C.addoper;A(D).jqGrid("editRow",B.rowID,B.addRowParams);A(D).jqGrid("setSelection",B.rowID)}}})},inlineNav:function(C,B){B=A.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},A.jgrid.nav,B||{});return this.each(function(){if(this.grid){var E=this,F,G=A.jgrid.jqID(E.p.id);E.p._inlinenav=!0;if(!0===B.addParams.useFormatter){var D=E.p.colModel,H;for(H=0;H<D.length;H++){if(D[H].formatter&&"actions"===D[H].formatter){D[H].formatoptions&&(D=A.extend({keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},D[H].formatoptions),B.addParams.addRowParams={keys:D.keys,oneditfunc:D.onEdit,successfunc:D.onSuccess,url:D.url,extraparam:D.extraparam,aftersavefunc:D.afterSave,errorfunc:D.onError,afterrestorefunc:D.afterRestore});break}}}B.add&&A(E).jqGrid("navButtonAdd",C,{caption:B.addtext,title:B.addtitle,buttonicon:B.addicon,id:E.p.id+"_iladd",onClickButton:function(){A(E).jqGrid("addRow",B.addParams);B.addParams.useFormatter||(A("#"+G+"_ilsave").removeClass("ui-state-disabled"),A("#"+G+"_ilcancel").removeClass("ui-state-disabled"),A("#"+G+"_iladd").addClass("ui-state-disabled"),A("#"+G+"_iledit").addClass("ui-state-disabled"))}});B.edit&&A(E).jqGrid("navButtonAdd",C,{caption:B.edittext,title:B.edittitle,buttonicon:B.editicon,id:E.p.id+"_iledit",onClickButton:function(){var I=A(E).jqGrid("getGridParam","selrow");I?(A(E).jqGrid("editRow",I,B.editParams),A("#"+G+"_ilsave").removeClass("ui-state-disabled"),A("#"+G+"_ilcancel").removeClass("ui-state-disabled"),A("#"+G+"_iladd").addClass("ui-state-disabled"),A("#"+G+"_iledit").addClass("ui-state-disabled")):(A.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+G,jqm:!0}),A("#jqg_alrt").focus())}});B.save&&(A(E).jqGrid("navButtonAdd",C,{caption:B.savetext||"",title:B.savetitle||"Save row",buttonicon:B.saveicon,id:E.p.id+"_ilsave",onClickButton:function(){var K=E.p.savedRow[0].id;if(K){var L=E.p.prmNames,I=L.oper,J={};A("#"+A.jgrid.jqID(K),"#"+G).hasClass("jqgrid-new-row")?(B.addParams.addRowParams.extraparam[I]=L.addoper,J=B.addParams.addRowParams):(B.editParams.extraparam||(B.editParams.extraparam={}),B.editParams.extraparam[I]=L.editoper,J=B.editParams);A(E).jqGrid("saveRow",K,J)&&A(E).jqGrid("showAddEditButtons")}else{A.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+G,jqm:!0}),A("#jqg_alrt").focus()}}}),A("#"+G+"_ilsave").addClass("ui-state-disabled"));B.cancel&&(A(E).jqGrid("navButtonAdd",C,{caption:B.canceltext||"",title:B.canceltitle||"Cancel row editing",buttonicon:B.cancelicon,id:E.p.id+"_ilcancel",onClickButton:function(){var I=E.p.savedRow[0].id,J={};if(I){J=A("#"+A.jgrid.jqID(I),"#"+G).hasClass("jqgrid-new-row")?B.addParams.addRowParams:B.editParams;A(E).jqGrid("restoreRow",I,J);A(E).jqGrid("showAddEditButtons")}else{A.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+G,jqm:true});A("#jqg_alrt").focus()}}}),A("#"+G+"_ilcancel").addClass("ui-state-disabled"));!0===B.restoreAfterSelect&&(F=A.isFunction(E.p.beforeSelectRow)?E.p.beforeSelectRow:!1,E.p.beforeSelectRow=function(J,K){var I=true;if(E.p.savedRow.length>0&&E.p._inlinenav===true&&J!==E.p.selrow&&E.p.selrow!==null){E.p.selrow===B.addParams.rowID?A(E).jqGrid("delRowData",E.p.selrow):A(E).jqGrid("restoreRow",E.p.selrow,B.editParams);A(E).jqGrid("showAddEditButtons")}F&&(I=F.call(E,J,K));return I})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var B=A.jgrid.jqID(this.p.id);A("#"+B+"_ilsave").addClass("ui-state-disabled");A("#"+B+"_ilcancel").addClass("ui-state-disabled");A("#"+B+"_iladd").removeClass("ui-state-disabled");A("#"+B+"_iledit").removeClass("ui-state-disabled")}})}})})(jQuery);(function(A){A.jgrid.extend({editCell:function(B,D,C){return this.each(function(){var K=this,L,E,H,I;if(K.grid&&!0===K.p.cellEdit){D=parseInt(D,10);K.p.selrow=K.rows[B].id;K.p.knv||A(K).jqGrid("GridNav");if(0<K.p.savedRow.length){if(!0===C&&B==K.p.iRow&&D==K.p.iCol){return}A(K).jqGrid("saveCell",K.p.savedRow[0].id,K.p.savedRow[0].ic)}else{window.setTimeout(function(){A("#"+A.jgrid.jqID(K.p.knv)).attr("tabindex","-1").focus()},0)}I=K.p.colModel[D];L=I.name;if(!("subgrid"===L||"cb"===L||"rn"===L)){H=A("td:eq("+D+")",K.rows[B]);if(!0===I.editable&&!0===C&&!H.hasClass("not-editable-cell")){0<=parseInt(K.p.iCol,10)&&0<=parseInt(K.p.iRow,10)&&(A("td:eq("+K.p.iCol+")",K.rows[K.p.iRow]).removeClass("edit-cell ui-state-highlight"),A(K.rows[K.p.iRow]).removeClass("selected-row ui-state-hover"));A(H).addClass("edit-cell ui-state-highlight");A(K.rows[B]).addClass("selected-row ui-state-hover");try{E=A.unformat.call(K,H,{rowId:K.rows[B].id,colModel:I},D)}catch(G){E=I.edittype&&"textarea"===I.edittype?A(H).text():A(H).html()}K.p.autoencode&&(E=A.jgrid.htmlDecode(E));I.edittype||(I.edittype="text");K.p.savedRow.push({id:B,ic:D,name:L,v:E});if("&nbsp;"===E||"&#160;"===E||1===E.length&&160===E.charCodeAt(0)){E=""}if(A.isFunction(K.p.formatCell)){var F=K.p.formatCell.call(K,K.rows[B].id,L,E,B,D);void 0!==F&&(E=F)}var F=A.extend({},I.editoptions||{},{id:B+"_"+L,name:L}),J=A.jgrid.createEl.call(K,I.edittype,F,E,!0,A.extend({},A.jgrid.ajaxOptions,K.p.ajaxSelectOptions||{}));A(K).triggerHandler("jqGridBeforeEditCell",[K.rows[B].id,L,E,B,D]);A.isFunction(K.p.beforeEditCell)&&K.p.beforeEditCell.call(K,K.rows[B].id,L,E,B,D);A(H).html("").append(J).attr("tabindex","0");A.jgrid.bindEv.call(K,J,F);window.setTimeout(function(){A(J).focus()},0);A("input, select, textarea",H).bind("keydown",function(M){M.keyCode===27&&(A("input.hasDatepicker",H).length>0?A(".ui-datepicker").is(":hidden")?A(K).jqGrid("restoreCell",B,D):A("input.hasDatepicker",H).datepicker("hide"):A(K).jqGrid("restoreCell",B,D));if(M.keyCode===13){A(K).jqGrid("saveCell",B,D);return false}if(M.keyCode===9){if(K.grid.hDiv.loading){return false}M.shiftKey?A(K).jqGrid("prevCell",B,D):A(K).jqGrid("nextCell",B,D)}M.stopPropagation()});A(K).triggerHandler("jqGridAfterEditCell",[K.rows[B].id,L,E,B,D]);A.isFunction(K.p.afterEditCell)&&K.p.afterEditCell.call(K,K.rows[B].id,L,E,B,D)}else{0<=parseInt(K.p.iCol,10)&&0<=parseInt(K.p.iRow,10)&&(A("td:eq("+K.p.iCol+")",K.rows[K.p.iRow]).removeClass("edit-cell ui-state-highlight"),A(K.rows[K.p.iRow]).removeClass("selected-row ui-state-hover")),H.addClass("edit-cell ui-state-highlight"),A(K.rows[B]).addClass("selected-row ui-state-hover"),E=H.html().replace(/\&#160\;/ig,""),A(K).triggerHandler("jqGridSelectCell",[K.rows[B].id,L,E,B,D]),A.isFunction(K.p.onSelectCell)&&K.p.onSelectCell.call(K,K.rows[B].id,L,E,B,D)}K.p.iCol=D;K.p.iRow=B}}})},saveCell:function(B,C){return this.each(function(){var Q=this,P;if(Q.grid&&!0===Q.p.cellEdit){P=1<=Q.p.savedRow.length?0:null;if(null!==P){var R=A("td:eq("+C+")",Q.rows[B]),D,J,K=Q.p.colModel[C],I=K.name,H=A.jgrid.jqID(I);switch(K.edittype){case"select":if(K.editoptions.multiple){var H=A("#"+B+"_"+H,Q.rows[B]),L=[];(D=A(H).val())?D.join(","):D="";A("option:selected",H).each(function(T,S){L[T]=A(S).text()});J=L.join(",")}else{D=A("#"+B+"_"+H+" option:selected",Q.rows[B]).val(),J=A("#"+B+"_"+H+" option:selected",Q.rows[B]).text()}K.formatter&&(J=D);break;case"checkbox":var N=["Yes","No"];K.editoptions&&(N=K.editoptions.value.split(":"));J=D=A("#"+B+"_"+H,Q.rows[B]).is(":checked")?N[0]:N[1];break;case"password":case"text":case"textarea":case"button":J=D=A("#"+B+"_"+H,Q.rows[B]).val();break;case"custom":try{if(K.editoptions&&A.isFunction(K.editoptions.custom_value)){D=K.editoptions.custom_value.call(Q,A(".customelement",R),"get");if(void 0===D){throw"e2"}J=D}else{throw"e1"}}catch(M){"e1"===M&&A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_value' "+A.jgrid.edit.msg.nodefined,A.jgrid.edit.bClose),"e2"===M?A.jgrid.info_dialog(A.jgrid.errors.errcap,"function 'custom_value' "+A.jgrid.edit.msg.novalue,A.jgrid.edit.bClose):A.jgrid.info_dialog(A.jgrid.errors.errcap,M.message,A.jgrid.edit.bClose)}}if(J!==Q.p.savedRow[P].v){if(P=A(Q).triggerHandler("jqGridBeforeSaveCell",[Q.rows[B].id,I,D,B,C])){J=D=P}if(A.isFunction(Q.p.beforeSaveCell)&&(P=Q.p.beforeSaveCell.call(Q,Q.rows[B].id,I,D,B,C))){J=D=P}var E=A.jgrid.checkValues.call(Q,D,C);if(!0===E[0]){P=A(Q).triggerHandler("jqGridBeforeSubmitCell",[Q.rows[B].id,I,D,B,C])||{};A.isFunction(Q.p.beforeSubmitCell)&&((P=Q.p.beforeSubmitCell.call(Q,Q.rows[B].id,I,D,B,C))||(P={}));0<A("input.hasDatepicker",R).length&&A("input.hasDatepicker",R).datepicker("hide");if("remote"===Q.p.cellsubmit){if(Q.p.cellurl){var O={};Q.p.autoencode&&(D=A.jgrid.htmlEncode(D));O[I]=D;N=Q.p.prmNames;K=N.id;H=N.oper;O[K]=A.jgrid.stripPref(Q.p.idPrefix,Q.rows[B].id);O[H]=N.editoper;O=A.extend(P,O);A("#lui_"+A.jgrid.jqID(Q.p.id)).show();Q.grid.hDiv.loading=!0;A.ajax(A.extend({url:Q.p.cellurl,data:A.isFunction(Q.p.serializeCellData)?Q.p.serializeCellData.call(Q,O):O,type:"POST",complete:function(T,S){A("#lui_"+Q.p.id).hide();Q.grid.hDiv.loading=false;if(S==="success"){var U=A(Q).triggerHandler("jqGridAfterSubmitCell",[Q,T,O.id,I,D,B,C])||[true,""];U[0]===true&&A.isFunction(Q.p.afterSubmitCell)&&(U=Q.p.afterSubmitCell.call(Q,T,O.id,I,D,B,C));if(U[0]===true){A(R).empty();A(Q).jqGrid("setCell",Q.rows[B].id,C,J,false,false,true);A(R).addClass("dirty-cell");A(Q.rows[B]).addClass("edited");A(Q).triggerHandler("jqGridAfterSaveCell",[Q.rows[B].id,I,D,B,C]);A.isFunction(Q.p.afterSaveCell)&&Q.p.afterSaveCell.call(Q,Q.rows[B].id,I,D,B,C);Q.p.savedRow.splice(0,1)}else{A.jgrid.info_dialog(A.jgrid.errors.errcap,U[1],A.jgrid.edit.bClose);A(Q).jqGrid("restoreCell",B,C)}}},error:function(U,T,S){A("#lui_"+A.jgrid.jqID(Q.p.id)).hide();Q.grid.hDiv.loading=false;A(Q).triggerHandler("jqGridErrorCell",[U,T,S]);A.isFunction(Q.p.errorCell)?Q.p.errorCell.call(Q,U,T,S):A.jgrid.info_dialog(A.jgrid.errors.errcap,U.status+" : "+U.statusText+"<br/>"+T,A.jgrid.edit.bClose);A(Q).jqGrid("restoreCell",B,C)}},A.jgrid.ajaxOptions,Q.p.ajaxCellOptions||{}))}else{try{A.jgrid.info_dialog(A.jgrid.errors.errcap,A.jgrid.errors.nourl,A.jgrid.edit.bClose),A(Q).jqGrid("restoreCell",B,C)}catch(F){}}}"clientArray"===Q.p.cellsubmit&&(A(R).empty(),A(Q).jqGrid("setCell",Q.rows[B].id,C,J,!1,!1,!0),A(R).addClass("dirty-cell"),A(Q.rows[B]).addClass("edited"),A(Q).triggerHandler("jqGridAfterSaveCell",[Q.rows[B].id,I,D,B,C]),A.isFunction(Q.p.afterSaveCell)&&Q.p.afterSaveCell.call(Q,Q.rows[B].id,I,D,B,C),Q.p.savedRow.splice(0,1))}else{try{window.setTimeout(function(){A.jgrid.info_dialog(A.jgrid.errors.errcap,D+" "+E[1],A.jgrid.edit.bClose)},100),A(Q).jqGrid("restoreCell",B,C)}catch(G){}}}else{A(Q).jqGrid("restoreCell",B,C)}}window.setTimeout(function(){A("#"+A.jgrid.jqID(Q.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(B,C){return this.each(function(){var G=this,F;if(G.grid&&!0===G.p.cellEdit){F=1<=G.p.savedRow.length?0:null;if(null!==F){var D=A("td:eq("+C+")",G.rows[B]);if(A.isFunction(A.fn.datepicker)){try{A("input.hasDatepicker",D).datepicker("hide")}catch(E){}}A(D).empty().attr("tabindex","-1");A(G).jqGrid("setCell",G.rows[B].id,C,G.p.savedRow[F].v,!1,!1,!0);A(G).triggerHandler("jqGridAfterRestoreCell",[G.rows[B].id,G.p.savedRow[F].v,B,C]);A.isFunction(G.p.afterRestoreCell)&&G.p.afterRestoreCell.call(G,G.rows[B].id,G.p.savedRow[F].v,B,C);G.p.savedRow.splice(0,1)}window.setTimeout(function(){A("#"+G.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(B,C){return this.each(function(){var E=!1,D;if(this.grid&&!0===this.p.cellEdit){for(D=C+1;D<this.p.colModel.length;D++){if(!0===this.p.colModel[D].editable){E=D;break}}!1!==E?A(this).jqGrid("editCell",B,E,!0):0<this.p.savedRow.length&&A(this).jqGrid("saveCell",B,C)}})},prevCell:function(B,C){return this.each(function(){var E=!1,D;if(this.grid&&!0===this.p.cellEdit){for(D=C-1;0<=D;D--){if(!0===this.p.colModel[D].editable){E=D;break}}!1!==E?A(this).jqGrid("editCell",B,E,!0):0<this.p.savedRow.length&&A(this).jqGrid("saveCell",B,C)}})},GridNav:function(){return this.each(function(){function C(M,I,J){if("v"===J.substr(0,1)){var N=A(F.grid.bDiv)[0].clientHeight,H=A(F.grid.bDiv)[0].scrollTop,L=F.rows[M].offsetTop+F.rows[M].clientHeight,K=F.rows[M].offsetTop;"vd"===J&&L>=N&&(A(F.grid.bDiv)[0].scrollTop=A(F.grid.bDiv)[0].scrollTop+F.rows[M].clientHeight);"vu"===J&&K<H&&(A(F.grid.bDiv)[0].scrollTop=A(F.grid.bDiv)[0].scrollTop-F.rows[M].clientHeight)}"h"===J&&(J=A(F.grid.bDiv)[0].clientWidth,N=A(F.grid.bDiv)[0].scrollLeft,H=F.rows[M].cells[I].offsetLeft,F.rows[M].cells[I].offsetLeft+F.rows[M].cells[I].clientWidth>=J+parseInt(N,10)?A(F.grid.bDiv)[0].scrollLeft=A(F.grid.bDiv)[0].scrollLeft+F.rows[M].cells[I].clientWidth:H<N&&(A(F.grid.bDiv)[0].scrollLeft=A(F.grid.bDiv)[0].scrollLeft-F.rows[M].cells[I].clientWidth))}function G(J,K){var H,I;if("lft"===K){H=J+1;for(I=J;0<=I;I--){if(!0!==F.p.colModel[I].hidden){H=I;break}}}if("rgt"===K){H=J-1;for(I=J;I<F.p.colModel.length;I++){if(!0!==F.p.colModel[I].hidden){H=I;break}}}return H}var F=this;if(F.grid&&!0===F.p.cellEdit){F.p.knv=F.p.id+"_kn";var E=A("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+F.p.knv+"'></div></div>"),B,D;A(E).insertBefore(F.grid.cDiv);A("#"+F.p.knv).focus().keydown(function(H){D=H.keyCode;"rtl"===F.p.direction&&(37===D?D=39:39===D&&(D=37));switch(D){case 38:0<F.p.iRow-1&&(C(F.p.iRow-1,F.p.iCol,"vu"),A(F).jqGrid("editCell",F.p.iRow-1,F.p.iCol,!1));break;case 40:F.p.iRow+1<=F.rows.length-1&&(C(F.p.iRow+1,F.p.iCol,"vd"),A(F).jqGrid("editCell",F.p.iRow+1,F.p.iCol,!1));break;case 37:0<=F.p.iCol-1&&(B=G(F.p.iCol-1,"lft"),C(F.p.iRow,B,"h"),A(F).jqGrid("editCell",F.p.iRow,B,!1));break;case 39:F.p.iCol+1<=F.p.colModel.length-1&&(B=G(F.p.iCol+1,"rgt"),C(F.p.iRow,B,"h"),A(F).jqGrid("editCell",F.p.iRow,B,!1));break;case 13:0<=parseInt(F.p.iCol,10)&&0<=parseInt(F.p.iRow,10)&&A(F).jqGrid("editCell",F.p.iRow,F.p.iCol,!0);break;default:return !0}return !1})}})},getChangedCells:function(B){var C=[];B||(B="all");this.each(function(){var E=this,D;E.grid&&!0===E.p.cellEdit&&A(E.rows).each(function(F){var G={};A(this).hasClass("edited")&&(A("td",this).each(function(J){D=E.p.colModel[J].name;if("cb"!==D&&"subgrid"!==D){if("dirty"===B){if(A(this).hasClass("dirty-cell")){try{G[D]=A.unformat.call(E,this,{rowId:E.rows[F].id,colModel:E.p.colModel[J]},J)}catch(I){G[D]=A.jgrid.htmlDecode(A(this).html())}}}else{try{G[D]=A.unformat.call(E,this,{rowId:E.rows[F].id,colModel:E.p.colModel[J]},J)}catch(H){G[D]=A.jgrid.htmlDecode(A(this).html())}}}}),G.id=this.id,C.push(G))})});return C}})})(jQuery);(function(H){H.fn.jqm=function(K){var J={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:I,ajaxText:"",target:I,modal:I,toTop:I,onShow:I,onHide:I,onLoad:I};return this.each(function(){if(this._jqm){return B[this._jqm].c=H.extend({},B[this._jqm].c,K)}F++;this._jqm=F;B[F]={c:H.extend(J,H.jqm.params,K),a:I,w:H(this).addClass("jqmID"+F),s:F};J.trigger&&H(this).jqmAddTrigger(J.trigger)})};H.fn.jqmAddClose=function(J){return E(this,J,"jqmHide")};H.fn.jqmAddTrigger=function(J){return E(this,J,"jqmShow")};H.fn.jqmShow=function(J){return this.each(function(){H.jqm.open(this._jqm,J)})};H.fn.jqmHide=function(J){return this.each(function(){H.jqm.close(this._jqm,J)})};H.jqm={hash:{},open:function(O,K){var N=B[O],L=N.c,J="."+L.closeClass,P=parseInt(N.w.css("z-index")),P=0<P?P:3000,M=H("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":P-1,opacity:L.overlay/100});if(N.a){return I}N.t=K;N.a=!0;N.w.css("z-index",P);L.modal?(C[0]||setTimeout(function(){A("bind")},1),C.push(O)):0<L.overlay?L.closeoverlay&&N.w.jqmAddClose(M):M=I;N.o=M?M.addClass(L.overlayClass).prependTo("body"):I;L.ajax?(P=L.target||N.w,M=L.ajax,P="string"==typeof P?H(P,N.w):H(P),M="@"==M.substr(0,1)?H(K).attr(M.substring(1)):M,P.html(L.ajaxText).load(M,function(){L.onLoad&&L.onLoad.call(this,N);J&&N.w.jqmAddClose(H(J,N.w));G(N)})):J&&N.w.jqmAddClose(H(J,N.w));L.toTop&&N.o&&N.w.before('<span id="jqmP'+N.w[0]._jqm+'"></span>').insertAfter(N.o);L.onShow?L.onShow(N):N.w.show();G(N);return I},close:function(J){J=B[J];if(!J.a){return I}J.a=I;C[0]&&(C.pop(),C[0]||A("unbind"));J.c.toTop&&J.o&&H("#jqmP"+J.w[0]._jqm).after(J.w).remove();if(J.c.onHide){J.c.onHide(J)}else{J.w.hide(),J.o&&J.o.remove()}return I},params:{}};var F=0,B=H.jqm.hash,C=[],I=!1,G=function(K){try{H(":input:visible",K.w)[0].focus()}catch(J){}},A=function(J){H(document)[J]("keypress",D)[J]("keydown",D)[J]("mousedown",D)},D=function(L){var J=B[C[C.length-1]],K=!H(L.target).parents(".jqmID"+J.s)[0];K&&(H(".jqmID"+J.s).each(function(){var N=H(this),M=N.offset();if(M.top<=L.pageY&&L.pageY<=M.top+N.height()&&M.left<=L.pageX&&L.pageX<=M.left+N.width()){return K=!1}}),G(J));return !K},E=function(L,J,K){return L.each(function(){var M=this._jqm;H(J).each(function(){this[K]||(this[K]=[],H(this).click(function(){for(var O in {jqmShow:1,jqmHide:1}){for(var N in this[O]){if(B[this[O][N]]){B[this[O][N]].w[O](this)}}}return I}));this[K].push(M)})})}})(jQuery);(function(E){E.fn.jqDrag=function(J){return D(this,J,"d")};E.fn.jqResize=function(K,J){return D(this,K,"r",J)};E.jqDnR={dnr:{},e:0,drag:function(J){"d"==I.k?A.css({left:I.X+J.pageX-I.pX,top:I.Y+J.pageY-I.pY}):(A.css({width:Math.max(J.pageX-I.pX+I.W,0),height:Math.max(J.pageY-I.pY+I.H,0)}),G&&H.css({width:Math.max(J.pageX-G.pX+G.W,0),height:Math.max(J.pageY-G.pY+G.H,0)}));return !1},stop:function(){E(document).unbind("mousemove",F.drag).unbind("mouseup",F.stop)}};var F=E.jqDnR,I=F.dnr,A=F.e,H,G,D=function(M,L,J,K){return M.each(function(){L=L?E(L,M):M;L.bind("mousedown",{e:M,k:J},function(R){var Q=R.data,O={};A=Q.e;H=K?E(K):!1;if("relative"!=A.css("position")){try{A.position(O)}catch(N){}}I={X:O.left||B("left")||0,Y:O.top||B("top")||0,W:B("width")||A[0].scrollWidth||0,H:B("height")||A[0].scrollHeight||0,pX:R.pageX,pY:R.pageY,k:Q.k};G=H&&"d"!=Q.k?{X:O.left||C("left")||0,Y:O.top||C("top")||0,W:H[0].offsetWidth||C("width")||0,H:H[0].offsetHeight||C("height")||0,pX:R.pageX,pY:R.pageY,k:Q.k}:!1;if(E("input.hasDatepicker",A[0])[0]){try{E("input.hasDatepicker",A[0]).datepicker("hide")}catch(P){}}E(document).mousemove(E.jqDnR.drag).mouseup(E.jqDnR.stop);return !1})})},B=function(J){return parseInt(A.css(J),10)||!1},C=function(J){return parseInt(H.css(J),10)||!1}})(jQuery);(function(A){A.jgrid.extend({setSubGrid:function(){return this.each(function(){var B,C;this.p.subGridOptions=A.extend({plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,reloadOnExpand:!0},this.p.subGridOptions||{});this.p.colNames.unshift("");this.p.colModel.unshift({name:"subgrid",width:A.jgrid.cell_width?this.p.subGridWidth+this.p.cellLayout:this.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0});B=this.p.subGridModel;if(B[0]){B[0].align=A.extend([],B[0].align||[]);for(C=0;C<B[0].name.length;C++){B[0].align[C]=B[0].align[C]||"left"}}})},addSubGridCell:function(D,E){var F="",C,B;this.each(function(){F=this.formatCol(D,E);B=this.p.id;C=this.p.subGridOptions.plusicon});return'<td role="gridcell" aria-describedby="'+B+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+F+"><a href='javascript:void(0);'><span class='ui-icon "+C+"'></span></a></td>"},addSubGrid:function(B,C){return this.each(function(){var N=this;if(N.grid){var M=function(S,R,Q){R=A("<td align='"+N.p.subGridModel[0].align[Q]+"'></td>").html(R);A(S).append(R)},L=function(V,S){var Q,W,T,R=A("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),U=A("<tr></tr>");for(W=0;W<N.p.subGridModel[0].name.length;W++){Q=A("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+N.p.direction+"'></th>"),A(Q).html(N.p.subGridModel[0].name[W]),A(Q).width(N.p.subGridModel[0].width[W]),A(U).append(Q)}A(R).append(U);V&&(T=N.p.xmlReader.subgrid,A(T.root+" "+T.row,V).each(function(){U=A("<tr class='ui-widget-content ui-subtblcell'></tr>");if(!0===T.repeatitems){A(T.cell,this).each(function(Y){M(U,A(this).text()||"&#160;",Y)})}else{var X=N.p.subGridModel[0].mapping||N.p.subGridModel[0].name;if(X){for(W=0;W<X.length;W++){M(U,A(X[W],this).text()||"&#160;",W)}}}A(R).append(U)}));Q=A("table:first",N.grid.bDiv).attr("id")+"_";A("#"+A.jgrid.jqID(Q+S)).append(R);N.grid.hDiv.loading=!1;A("#load_"+A.jgrid.jqID(N.p.id)).hide();return !1},F=function(W,Q){var T,X,Z,Y,U,S=A("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),R=A("<tr></tr>");for(X=0;X<N.p.subGridModel[0].name.length;X++){T=A("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+N.p.direction+"'></th>"),A(T).html(N.p.subGridModel[0].name[X]),A(T).width(N.p.subGridModel[0].width[X]),A(R).append(T)}A(S).append(R);if(W&&(Y=N.p.jsonReader.subgrid,T=A.jgrid.getAccessor(W,Y.root),void 0!==T)){for(X=0;X<T.length;X++){Z=T[X];R=A("<tr class='ui-widget-content ui-subtblcell'></tr>");if(!0===Y.repeatitems){Y.cell&&(Z=Z[Y.cell]);for(U=0;U<Z.length;U++){M(R,Z[U]||"&#160;",U)}}else{var V=N.p.subGridModel[0].mapping||N.p.subGridModel[0].name;if(V.length){for(U=0;U<V.length;U++){M(R,Z[V[U]]||"&#160;",U)}}}A(S).append(R)}}X=A("table:first",N.grid.bDiv).attr("id")+"_";A("#"+A.jgrid.jqID(X+Q)).append(S);N.grid.hDiv.loading=!1;A("#load_"+A.jgrid.jqID(N.p.id)).hide();return !1},H=function(T){var S,R,U,Q;S=A(T).attr("id");R={nd_:(new Date).getTime()};R[N.p.prmNames.subgridid]=S;if(!N.p.subGridModel[0]){return !1}if(N.p.subGridModel[0].params){for(Q=0;Q<N.p.subGridModel[0].params.length;Q++){for(U=0;U<N.p.colModel.length;U++){N.p.colModel[U].name===N.p.subGridModel[0].params[Q]&&(R[N.p.colModel[U].name]=A("td:eq("+U+")",T).text().replace(/\&#160\;/ig,""))}}}if(!N.grid.hDiv.loading){switch(N.grid.hDiv.loading=!0,A("#load_"+A.jgrid.jqID(N.p.id)).show(),N.p.subgridtype||(N.p.subgridtype=N.p.datatype),A.isFunction(N.p.subgridtype)?N.p.subgridtype.call(N,R):N.p.subgridtype=N.p.subgridtype.toLowerCase(),N.p.subgridtype){case"xml":case"json":A.ajax(A.extend({type:N.p.mtype,url:N.p.subGridUrl,dataType:N.p.subgridtype,data:A.isFunction(N.p.serializeSubGridData)?N.p.serializeSubGridData.call(N,R):R,complete:function(V){N.p.subgridtype==="xml"?L(V.responseXML,S):F(A.jgrid.parse(V.responseText),S)}},A.jgrid.ajaxOptions,N.p.ajaxSubgridOptions||{}))}}return !1},P,J,G,D=0,O,I;A.each(N.p.colModel,function(){(!0===this.hidden||"rn"===this.name||"cb"===this.name)&&D++});var E=N.rows.length,K=1;void 0!==C&&0<C&&(K=C,E=C+1);for(;K<E;){A(N.rows[K]).hasClass("jqgrow")&&A(N.rows[K].cells[B]).bind("click",function(){var Q=A(this).parent("tr")[0];I=Q.nextSibling;if(A(this).hasClass("sgcollapsed")){J=N.p.id;P=Q.id;if(N.p.subGridOptions.reloadOnExpand===true||N.p.subGridOptions.reloadOnExpand===false&&!A(I).hasClass("ui-subgrid")){G=B>=1?"<td colspan='"+B+"'>&#160;</td>":"";O=A(N).triggerHandler("jqGridSubGridBeforeExpand",[J+"_"+P,P]);(O=O===false||O==="stop"?false:true)&&A.isFunction(N.p.subGridBeforeExpand)&&(O=N.p.subGridBeforeExpand.call(N,J+"_"+P,P));if(O===false){return false}A(Q).after("<tr role='row' class='ui-subgrid'>"+G+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+N.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(N.p.colNames.length-1-D,10)+"' class='ui-widget-content subgrid-data'><div id="+J+"_"+P+" class='tablediv'></div></td></tr>");A(N).triggerHandler("jqGridSubGridRowExpanded",[J+"_"+P,P]);A.isFunction(N.p.subGridRowExpanded)?N.p.subGridRowExpanded.call(N,J+"_"+P,P):H(Q)}else{A(I).show()}A(this).html("<a href='javascript:void(0);'><span class='ui-icon "+N.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");N.p.subGridOptions.selectOnExpand&&A(N).jqGrid("setSelection",P)}else{if(A(this).hasClass("sgexpanded")){O=A(N).triggerHandler("jqGridSubGridRowColapsed",[J+"_"+P,P]);if((O=O===false||O==="stop"?false:true)&&A.isFunction(N.p.subGridRowColapsed)){P=Q.id;O=N.p.subGridRowColapsed.call(N,J+"_"+P,P)}if(O===false){return false}N.p.subGridOptions.reloadOnExpand===true?A(I).remove(".ui-subgrid"):A(I).hasClass("ui-subgrid")&&A(I).hide();A(this).html("<a href='javascript:void(0);'><span class='ui-icon "+N.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed")}}return false}),K++}!0===N.p.subGridOptions.expandOnLoad&&A(N.rows).filter(".jqgrow").each(function(R,Q){A(Q.cells[0]).click()});N.subGridXml=function(R,Q){L(R,Q)};N.subGridJson=function(R,Q){F(R,Q)}}})},expandSubGridRow:function(B){return this.each(function(){if((this.grid||B)&&!0===this.p.subGrid){var C=A(this).jqGrid("getInd",B,!0);C&&(C=A("td.sgcollapsed",C)[0])&&A(C).trigger("click")}})},collapseSubGridRow:function(B){return this.each(function(){if((this.grid||B)&&!0===this.p.subGrid){var C=A(this).jqGrid("getInd",B,!0);C&&(C=A("td.sgexpanded",C)[0])&&A(C).trigger("click")}})},toggleSubGridRow:function(B){return this.each(function(){if((this.grid||B)&&!0===this.p.subGrid){var C=A(this).jqGrid("getInd",B,!0);if(C){var D=A("td.sgcollapsed",C)[0];D?A(D).trigger("click"):(D=A("td.sgexpanded",C)[0])&&A(D).trigger("click")}}})}})})(jQuery);(function(A){A.extend(A.jgrid,{template:function(C){var B=A.makeArray(arguments).slice(1),E,D=B.length;null==C&&(C="");return C.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(F,G){if(!isNaN(parseInt(G,10))){return B[parseInt(G,10)]}for(E=0;E<D;E++){if(A.isArray(B[E])){for(var H=B[E],I=H.length;I--;){if(G===H[I].nm){return H[I].v}}}}})}});A.jgrid.extend({groupingSetup:function(){return this.each(function(){var C,B,E=this.p.colModel,D=this.p.groupingView;if(null!==D&&("object"===typeof D||A.isFunction(D))){if(D.groupField.length){void 0===D.visibiltyOnNextGrouping&&(D.visibiltyOnNextGrouping=[]);D.lastvalues=[];D.groups=[];D.counters=[];for(C=0;C<D.groupField.length;C++){D.groupOrder[C]||(D.groupOrder[C]="asc"),D.groupText[C]||(D.groupText[C]="{0}"),"boolean"!==typeof D.groupColumnShow[C]&&(D.groupColumnShow[C]=!0),"boolean"!==typeof D.groupSummary[C]&&(D.groupSummary[C]=!1),!0===D.groupColumnShow[C]?(D.visibiltyOnNextGrouping[C]=!0,A(this).jqGrid("showCol",D.groupField[C])):(D.visibiltyOnNextGrouping[C]=A("#"+A.jgrid.jqID(this.p.id+"_"+D.groupField[C])).is(":visible"),A(this).jqGrid("hideCol",D.groupField[C]))}D.summary=[];C=0;for(B=E.length;C<B;C++){E[C].summaryType&&D.summary.push({nm:E[C].name,st:E[C].summaryType,v:"",sr:E[C].summaryRound,srt:E[C].summaryRoundType||"round"})}}else{this.p.grouping=!1}}else{this.p.grouping=!1}})},groupingPrepare:function(C,B,E,D){this.each(function(){var F=this.p.groupingView,J=this,M,I=F.groupField.length,K,H,L,G=0;for(M=0;M<I;M++){K=F.groupField[M],L=F.displayField[M],H=E[K],L=null==L?null:E[L],null==L&&(L=H),void 0!==H&&(0===D?(F.groups.push({idx:M,dataIndex:K,value:H,displayValue:L,startRow:D,cnt:1,summary:[]}),F.lastvalues[M]=H,F.counters[M]={cnt:1,pos:F.groups.length-1,summary:A.extend(!0,[],F.summary)}):"object"!==typeof H&&(A.isArray(F.isInTheSameGroup)&&A.isFunction(F.isInTheSameGroup[M])?!F.isInTheSameGroup[M].call(J,F.lastvalues[M],H,M,F):F.lastvalues[M]!==H)?(F.groups.push({idx:M,dataIndex:K,value:H,displayValue:L,startRow:D,cnt:1,summary:[]}),F.lastvalues[M]=H,G=1,F.counters[M]={cnt:1,pos:F.groups.length-1,summary:A.extend(!0,[],F.summary)}):1===G?(F.groups.push({idx:M,dataIndex:K,value:H,displayValue:L,startRow:D,cnt:1,summary:[]}),F.lastvalues[M]=H,F.counters[M]={cnt:1,pos:F.groups.length-1,summary:A.extend(!0,[],F.summary)}):(F.counters[M].cnt+=1,F.groups[F.counters[M].pos].cnt=F.counters[M].cnt),A.each(F.counters[M].summary,function(){this.v=A.isFunction(this.st)?this.st.call(J,this.v,this.nm,E):A(J).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,E)}),F.groups[F.counters[M].pos].summary=F.counters[M].summary)}B.push(C)});return B},groupingToggle:function(B){this.each(function(){var J=this.p.groupingView,I=B.split("_"),H=parseInt(I[I.length-2],10);I.splice(I.length-2,2);var I=I.join("_"),C=J.minusicon,E=J.plusicon,G=A("#"+A.jgrid.jqID(B)),G=G.length?G[0].nextSibling:null,D=A("#"+A.jgrid.jqID(B)+" span.tree-wrap-"+this.p.direction),F=!1;if(D.hasClass(C)){if(J.showSummaryOnHide){if(G){for(;G&&!(A(G).hasClass("jqfoot")&&parseInt(A(G).attr("jqfootlevel"),10)<=H);){A(G).hide(),G=G.nextSibling}}}else{if(G){for(;G;){J=G.className.indexOf(I);if(-1!==J&&parseInt(G.className.substring(J+I.length+1),10)<=H){break}A(G).hide();G=G.nextSibling}}}D.removeClass(C).addClass(E);F=!0}else{if(G){for(;G;){J=G.className.indexOf(I);if(-1!==J&&parseInt(G.className.substring(J+I.length+1),10)<=H){break}A(G).show();(J=A(G).find("span.tree-wrap-"+this.p.direction))&&A(J).hasClass(E)&&A(J).removeClass(E).addClass(C);G=G.nextSibling}}D.removeClass(E).addClass(C)}A(this).triggerHandler("jqGridGroupingClickGroup",[B,F]);A.isFunction(this.p.onClickGroup)&&this.p.onClickGroup.call(this,B,F)});return !1},groupingRender:function(C,B){return this.each(function(){function P(U,S,T){var R=!1;if(0===S){R=T[U]}else{var Q=T[U].idx;if(0===Q){R=T[U]}else{for(;0<=U;U--){if(T[U].idx===Q-S){R=T[U];break}}}}return R}var O=this,D=O.p.groupingView,J="",N="",I,L,H=D.groupCollapse?D.plusicon:D.minusicon,M,E=[],F=D.groupField.length,H=H+(" tree-wrap-"+O.p.direction);A.each(O.p.colModel,function(S,R){var Q;for(Q=0;Q<F;Q++){if(D.groupField[Q]===R.name){E[Q]=S;break}}});var G=0,K=A.makeArray(D.groupSummary);K.reverse();A.each(D.groups,function(R,X){G++;L=O.p.id+"ghead_"+X.idx;I=L+"_"+R;N="<span style='cursor:pointer;' class='ui-icon "+H+"' onclick=\"jQuery('#"+A.jgrid.jqID(O.p.id)+"').jqGrid('groupingToggle','"+I+"');return false;\"></span>";try{A.isArray(D.formatDisplayField)&&A.isFunction(D.formatDisplayField[X.idx])&&(X.displayValue=D.formatDisplayField[X.idx].call(O,X.displayValue,X.value,O.p.colModel[E[X.idx]],X.idx,D)),M=O.formatter(I,X.displayValue,E[X.idx],X.value)}catch(V){M=X.displayValue}J+='<tr id="'+I+'" role="row" class= "ui-widget-content jqgroup ui-row-'+O.p.direction+" "+L+'"><td style="padding-left:'+12*X.idx+'px;" colspan="'+B+'">'+N+A.jgrid.template(D.groupText[X.idx],M,X.cnt,X.summary)+"</td></tr>";if(F-1===X.idx){var Z=D.groups[R+1],S,Y,U=void 0!==Z?D.groups[R+1].startRow:C.length;for(Y=X.startRow;Y<U;Y++){J+=C[Y].join("")}var Q;if(void 0!==Z){for(Q=0;Q<D.groupField.length&&Z.dataIndex!==D.groupField[Q];Q++){}G=D.groupField.length-Q}for(Z=0;Z<G;Z++){if(K[Z]){Y="";D.groupCollapse&&!D.showSummaryOnHide&&(Y=' style="display:none;"');J+="<tr"+Y+' jqfootlevel="'+(X.idx-Z)+'" role="row" class="ui-widget-content jqfoot ui-row-'+O.p.direction+'">';Y=P(R,Z,D.groups);var W=O.p.colModel,T,c=Y.cnt;for(S=0;S<B;S++){var a="<td "+O.formatCol(S,1,"")+">&#160;</td>",b="{0}";A.each(Y.summary,function(){if(this.nm===W[S].name){W[S].summaryTpl&&(b=W[S].summaryTpl);"string"===typeof this.st&&"avg"===this.st.toLowerCase()&&this.v&&0<c&&(this.v/=c);try{T=O.formatter("",this.v,S,this)}catch(d){T=this.v}a="<td "+O.formatCol(S,1,"")+">"+A.jgrid.format(b,T)+"</td>";return !1}});J+=a}J+="</tr>"}}G=Q}});A("#"+A.jgrid.jqID(O.p.id)+" tbody:first").append(J);J=null})},groupingGroupBy:function(C,B){return this.each(function(){"string"===typeof C&&(C=[C]);var E=this.p.groupingView;this.p.grouping=!0;void 0===E.visibiltyOnNextGrouping&&(E.visibiltyOnNextGrouping=[]);var D;for(D=0;D<E.groupField.length;D++){!E.groupColumnShow[D]&&E.visibiltyOnNextGrouping[D]&&A(this).jqGrid("showCol",E.groupField[D])}for(D=0;D<C.length;D++){E.visibiltyOnNextGrouping[D]=A("#"+A.jgrid.jqID(this.p.id)+"_"+A.jgrid.jqID(C[D])).is(":visible")}this.p.groupingView=A.extend(this.p.groupingView,B||{});E.groupField=C;A(this).trigger("reloadGrid")})},groupingRemove:function(B){return this.each(function(){void 0===B&&(B=!0);this.p.grouping=!1;if(!0===B){var C=this.p.groupingView,D;for(D=0;D<C.groupField.length;D++){!C.groupColumnShow[D]&&C.visibiltyOnNextGrouping[D]&&A(this).jqGrid("showCol",C.groupField)}A("tr.jqgroup, tr.jqfoot","#"+A.jgrid.jqID(this.p.id)+" tbody:first").remove();A("tr.jqgrow:hidden","#"+A.jgrid.jqID(this.p.id)+" tbody:first").show()}else{A(this).trigger("reloadGrid")}})},groupingCalculations:{handler:function(E,C,H,G,D,B){var F={sum:function(){return parseFloat(C||0)+parseFloat(B[H]||0)},min:function(){return""===C?parseFloat(B[H]||0):Math.min(parseFloat(C),parseFloat(B[H]||0))},max:function(){return""===C?parseFloat(B[H]||0):Math.max(parseFloat(C),parseFloat(B[H]||0))},count:function(){""===C&&(C=0);return B.hasOwnProperty(H)?C+1:0},avg:function(){return F.sum()}};if(!F[E]){throw"jqGrid Grouping No such method: "+E}E=F[E]();null!=G&&("fixed"===D?E=E.toFixed(G):(G=Math.pow(10,G),E=Math.round(E*G)/G));return E}}})})(jQuery);(function(A){A.jgrid.extend({setTreeNode:function(B,C){return this.each(function(){var L=this;if(L.grid&&L.p.treeGrid){for(var G=L.p.expColInd,D=L.p.treeReader.expanded_field,H=L.p.treeReader.leaf_field,N=L.p.treeReader.level_field,M=L.p.treeReader.icon_field,J=L.p.treeReader.loaded,F,K,I,E;B<C;){E=A.jgrid.stripPref(L.p.idPrefix,L.rows[B].id),E=L.p.data[L.p._index[E]],"nested"===L.p.treeGridModel&&!E[H]&&(F=parseInt(E[L.p.treeReader.left_field],10),K=parseInt(E[L.p.treeReader.right_field],10),E[H]=K===F+1?"true":"false",L.rows[B].cells[L.p._treeleafpos].innerHTML=E[H]),F=parseInt(E[N],10),0===L.p.tree_root_level?(I=F+1,K=F):(I=F,K=F-1),I="<div class='tree-wrap tree-wrap-"+L.p.direction+"' style='width:"+18*I+"px;'>",I+="<div style='"+("rtl"===L.p.direction?"right:":"left:")+18*K+"px;' class='ui-icon ",void 0!==E[J]&&(E[J]="true"===E[J]||!0===E[J]?!0:!1),"true"===E[H]||!0===E[H]?(I+=(void 0!==E[M]&&""!==E[M]?E[M]:L.p.treeIcons.leaf)+" tree-leaf treeclick",E[H]=!0,K="leaf"):(E[H]=!1,K=""),E[D]=("true"===E[D]||!0===E[D]?!0:!1)&&(E[J]||void 0===E[J]),I=!1===E[D]?I+(!0===E[H]?"'":L.p.treeIcons.plus+" tree-plus treeclick'"):I+(!0===E[H]?"'":L.p.treeIcons.minus+" tree-minus treeclick'"),I+="></div></div>",A(L.rows[B].cells[G]).wrapInner("<span class='cell-wrapper"+K+"'></span>").prepend(I),F!==parseInt(L.p.tree_root_level,10)&&((E=(E=A(L).jqGrid("getNodeParent",E))&&E.hasOwnProperty(D)?E[D]:!0)||A(L.rows[B]).css("display","none")),A(L.rows[B].cells[G]).find("div.treeclick").bind("click",function(O){O=A.jgrid.stripPref(L.p.idPrefix,A(O.target||O.srcElement,L.rows).closest("tr.jqgrow")[0].id);O=L.p._index[O];if(!L.p.data[O][H]){if(L.p.data[O][D]){A(L).jqGrid("collapseRow",L.p.data[O]);A(L).jqGrid("collapseNode",L.p.data[O])}else{A(L).jqGrid("expandRow",L.p.data[O]);A(L).jqGrid("expandNode",L.p.data[O])}}return false}),!0===L.p.ExpandColClick&&A(L.rows[B].cells[G]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(O){var O=A.jgrid.stripPref(L.p.idPrefix,A(O.target||O.srcElement,L.rows).closest("tr.jqgrow")[0].id),P=L.p._index[O];if(!L.p.data[P][H]){if(L.p.data[P][D]){A(L).jqGrid("collapseRow",L.p.data[P]);A(L).jqGrid("collapseNode",L.p.data[P])}else{A(L).jqGrid("expandRow",L.p.data[P]);A(L).jqGrid("expandNode",L.p.data[P])}}A(L).jqGrid("setSelection",O);return false}),B++}}})},setTreeGrid:function(){return this.each(function(){var F=this,G=0,H=!1,B,D,C,E=[];if(F.p.treeGrid){F.p.treedatatype||A.extend(F.p,{treedatatype:F.p.datatype});F.p.subGrid=!1;F.p.altRows=!1;F.p.pgbuttons=!1;F.p.pginput=!1;F.p.gridview=!0;null===F.p.rowTotal&&(F.p.rowNum=10000);F.p.multiselect=!1;F.p.rowList=[];F.p.expColInd=0;F.p.treeIcons=A.extend({plus:"ui-icon-triangle-1-"+("rtl"===F.p.direction?"w":"e"),minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},F.p.treeIcons||{});"nested"===F.p.treeGridModel?F.p.treeReader=A.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},F.p.treeReader):"adjacency"===F.p.treeGridModel&&(F.p.treeReader=A.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},F.p.treeReader));for(D in F.p.colModel){if(F.p.colModel.hasOwnProperty(D)){for(C in B=F.p.colModel[D].name,B===F.p.ExpandColumn&&!H&&(H=!0,F.p.expColInd=G),G++,F.p.treeReader){F.p.treeReader.hasOwnProperty(C)&&F.p.treeReader[C]===B&&E.push(B)}}}A.each(F.p.treeReader,function(J,I){if(I&&A.inArray(I,E)===-1){if(J==="leaf_field"){F.p._treeleafpos=G}G++;F.p.colNames.push(I);F.p.colModel.push({name:I,width:1,hidden:true,sortable:false,resizable:false,hidedlg:true,editable:true,search:false})}})}})},expandRow:function(B){this.each(function(){var E=this;if(E.grid&&E.p.treeGrid){var F=A(E).jqGrid("getNodeChildren",B),C=E.p.treeReader.expanded_field,D=E.rows;A(F).each(function(){var G=E.p.idPrefix+A.jgrid.getAccessor(this,E.p.localReader.id);A(D.namedItem(G)).css("display","");this[C]&&A(E).jqGrid("expandRow",this)})}})},collapseRow:function(B){this.each(function(){var E=this;if(E.grid&&E.p.treeGrid){var F=A(E).jqGrid("getNodeChildren",B),C=E.p.treeReader.expanded_field,D=E.rows;A(F).each(function(){var G=E.p.idPrefix+A.jgrid.getAccessor(this,E.p.localReader.id);A(D.namedItem(G)).css("display","none");this[C]&&A(E).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var B=[];this.each(function(){var D=this;if(D.grid&&D.p.treeGrid){switch(D.p.treeGridModel){case"nested":var E=D.p.treeReader.level_field;A(D.p.data).each(function(){parseInt(this[E],10)===parseInt(D.p.tree_root_level,10)&&B.push(this)});break;case"adjacency":var C=D.p.treeReader.parent_id_field;A(D.p.data).each(function(){(null===this[C]||"null"===(""+this[C]).toLowerCase())&&B.push(this)})}}});return B},getNodeDepth:function(B){var C=null;this.each(function(){if(this.grid&&this.p.treeGrid){switch(this.p.treeGridModel){case"nested":C=parseInt(B[this.p.treeReader.level_field],10)-parseInt(this.p.tree_root_level,10);break;case"adjacency":C=A(this).jqGrid("getNodeAncestors",B).length}}});return C},getNodeParent:function(B){var C=null;this.each(function(){var J=this;if(J.grid&&J.p.treeGrid){switch(J.p.treeGridModel){case"nested":var F=J.p.treeReader.left_field,D=J.p.treeReader.right_field,G=J.p.treeReader.level_field,L=parseInt(B[F],10),K=parseInt(B[D],10),H=parseInt(B[G],10);A(this.p.data).each(function(){if(parseInt(this[G],10)===H-1&&parseInt(this[F],10)<L&&parseInt(this[D],10)>K){return C=this,!1}});break;case"adjacency":var E=J.p.treeReader.parent_id_field,I=J.p.localReader.id;A(this.p.data).each(function(){if(this[I]===A.jgrid.stripPref(J.p.idPrefix,B[E])){return C=this,!1}})}}});return C},getNodeChildren:function(B){var C=[];this.each(function(){var J=this;if(J.grid&&J.p.treeGrid){switch(J.p.treeGridModel){case"nested":var F=J.p.treeReader.left_field,D=J.p.treeReader.right_field,G=J.p.treeReader.level_field,L=parseInt(B[F],10),K=parseInt(B[D],10),H=parseInt(B[G],10);A(this.p.data).each(function(){parseInt(this[G],10)===H+1&&parseInt(this[F],10)>L&&parseInt(this[D],10)<K&&C.push(this)});break;case"adjacency":var E=J.p.treeReader.parent_id_field,I=J.p.localReader.id;A(this.p.data).each(function(){this[E]==A.jgrid.stripPref(J.p.idPrefix,B[I])&&C.push(this)})}}});return C},getFullTreeNode:function(B){var C=[];this.each(function(){var K=this,F;if(K.grid&&K.p.treeGrid){switch(K.p.treeGridModel){case"nested":var D=K.p.treeReader.left_field,G=K.p.treeReader.right_field,M=K.p.treeReader.level_field,L=parseInt(B[D],10),I=parseInt(B[G],10),E=parseInt(B[M],10);A(this.p.data).each(function(){parseInt(this[M],10)>=E&&parseInt(this[D],10)>=L&&parseInt(this[D],10)<=I&&C.push(this)});break;case"adjacency":if(B){C.push(B);var J=K.p.treeReader.parent_id_field,H=K.p.localReader.id;A(this.p.data).each(function(N){F=C.length;for(N=0;N<F;N++){if(A.jgrid.stripPref(K.p.idPrefix,C[N][H])===this[J]){C.push(this);break}}})}}}});return C},getNodeAncestors:function(B){var C=[];this.each(function(){if(this.grid&&this.p.treeGrid){for(var D=A(this).jqGrid("getNodeParent",B);D;){C.push(D),D=A(this).jqGrid("getNodeParent",D)}}});return C},isVisibleNode:function(B){var C=!0;this.each(function(){if(this.grid&&this.p.treeGrid){var E=A(this).jqGrid("getNodeAncestors",B),D=this.p.treeReader.expanded_field;A(E).each(function(){C=C&&this[D];if(!C){return !1}})}});return C},isNodeLoaded:function(B){var C;this.each(function(){if(this.grid&&this.p.treeGrid){var D=this.p.treeReader.leaf_field;C=void 0!==B?void 0!==B.loaded?B.loaded:B[D]||0<A(this).jqGrid("getNodeChildren",B).length?!0:!1:!1}});return C},expandNode:function(B){return this.each(function(){if(this.grid&&this.p.treeGrid){var H=this.p.treeReader.expanded_field,I=this.p.treeReader.parent_id_field,E=this.p.treeReader.loaded,C=this.p.treeReader.level_field,F=this.p.treeReader.left_field,K=this.p.treeReader.right_field;if(!B[H]){var J=A.jgrid.getAccessor(B,this.p.localReader.id),G=A("#"+this.p.idPrefix+A.jgrid.jqID(J),this.grid.bDiv)[0],D=this.p._index[J];A(this).jqGrid("isNodeLoaded",this.p.data[D])?(B[H]=!0,A("div.treeclick",G).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(B[H]=!0,A("div.treeclick",G).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=G.rowIndex,this.p.datatype=this.p.treedatatype,"nested"===this.p.treeGridModel?A(this).jqGrid("setGridParam",{postData:{nodeid:J,n_left:B[F],n_right:B[K],n_level:B[C]}}):A(this).jqGrid("setGridParam",{postData:{nodeid:J,parentid:B[I],n_level:B[C]}}),A(this).trigger("reloadGrid"),B[E]=!0,"nested"===this.p.treeGridModel?A(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):A(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(B){return this.each(function(){if(this.grid&&this.p.treeGrid){var C=this.p.treeReader.expanded_field;B[C]&&(B[C]=!1,C=A.jgrid.getAccessor(B,this.p.localReader.id),C=A("#"+this.p.idPrefix+A.jgrid.jqID(C),this.grid.bDiv)[0],A("div.treeclick",C).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus"))}})},SortTree:function(C,D,E,B){return this.each(function(){if(this.grid&&this.p.treeGrid){var H,G,F,K=[],J=this,I;H=A(this).jqGrid("getRootNodes");H=A.jgrid.from(H);H.orderBy(C,D,E,B);I=H.select();H=0;for(G=I.length;H<G;H++){F=I[H],K.push(F),A(this).jqGrid("collectChildrenSortTree",K,F,C,D,E,B)}A.each(K,function(M){var L=A.jgrid.getAccessor(this,J.p.localReader.id);A("#"+A.jgrid.jqID(J.p.id)+" tbody tr:eq("+M+")").after(A("tr#"+A.jgrid.jqID(L),J.grid.bDiv))});K=I=H=null}})},collectChildrenSortTree:function(E,F,G,B,D,C){return this.each(function(){if(this.grid&&this.p.treeGrid){var H,K,J,I;H=A(this).jqGrid("getNodeChildren",F);H=A.jgrid.from(H);H.orderBy(G,B,D,C);I=H.select();H=0;for(K=I.length;H<K;H++){J=I[H],E.push(J),A(this).jqGrid("collectChildrenSortTree",E,J,G,B,D,C)}}})},setTreeRow:function(B,C){var D=!1;this.each(function(){this.grid&&this.p.treeGrid&&(D=A(this).jqGrid("setRowData",B,C))});return D},delTreeNode:function(B){return this.each(function(){var G=this.p.localReader.id,H,D=this.p.treeReader.left_field,C=this.p.treeReader.right_field,E,J,I;if(this.grid&&this.p.treeGrid&&(H=this.p._index[B],void 0!==H)){E=parseInt(this.p.data[H][C],10);J=E-parseInt(this.p.data[H][D],10)+1;var F=A(this).jqGrid("getFullTreeNode",this.p.data[H]);if(0<F.length){for(H=0;H<F.length;H++){A(this).jqGrid("delRowData",F[H][G])}}if("nested"===this.p.treeGridModel){G=A.jgrid.from(this.p.data).greater(D,E,{stype:"integer"}).select();if(G.length){for(I in G){G.hasOwnProperty(I)&&(G[I][D]=parseInt(G[I][D],10)-J)}}G=A.jgrid.from(this.p.data).greater(C,E,{stype:"integer"}).select();if(G.length){for(I in G){G.hasOwnProperty(I)&&(G[I][C]=parseInt(G[I][C],10)-J)}}}}})},addChildNode:function(Q,R,S,K){var V=this[0];if(S){var L=V.p.treeReader.expanded_field,U=V.p.treeReader.leaf_field,T=V.p.treeReader.level_field,O=V.p.treeReader.parent_id_field,J=V.p.treeReader.left_field,P=V.p.treeReader.right_field,M=V.p.treeReader.loaded,I,B,E,G,D;I=0;var C=R,H;void 0===K&&(K=!1);if(void 0===Q||null===Q){D=V.p.data.length-1;if(0<=D){for(;0<=D;){I=Math.max(I,parseInt(V.p.data[D][V.p.localReader.id],10)),D--}}Q=I+1}var F=A(V).jqGrid("getInd",R);H=!1;if(void 0===R||null===R||""===R){C=R=null,I="last",G=V.p.tree_root_level,D=V.p.data.length+1}else{if(I="after",B=V.p._index[R],E=V.p.data[B],R=E[V.p.localReader.id],G=parseInt(E[T],10)+1,D=A(V).jqGrid("getFullTreeNode",E),D.length?(C=D=D[D.length-1][V.p.localReader.id],D=A(V).jqGrid("getInd",C)+1):D=A(V).jqGrid("getInd",R)+1,E[U]){H=!0,E[L]=!0,A(V.rows[F]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(V.p.treeIcons.leaf+" tree-leaf").addClass(V.p.treeIcons.minus+" tree-minus"),V.p.data[B][U]=!1,E[M]=!0}}B=D+1;void 0===S[L]&&(S[L]=!1);void 0===S[M]&&(S[M]=!1);S[T]=G;void 0===S[U]&&(S[U]=!0);"adjacency"===V.p.treeGridModel&&(S[O]=R);if("nested"===V.p.treeGridModel){var N;if(null!==R){U=parseInt(E[P],10);T=A.jgrid.from(V.p.data);T=T.greaterOrEquals(P,U,{stype:"integer"});T=T.select();if(T.length){for(N in T){T.hasOwnProperty(N)&&(T[N][J]=T[N][J]>U?parseInt(T[N][J],10)+2:T[N][J],T[N][P]=T[N][P]>=U?parseInt(T[N][P],10)+2:T[N][P])}}S[J]=U;S[P]=U+1}else{U=parseInt(A(V).jqGrid("getCol",P,!1,"max"),10);T=A.jgrid.from(V.p.data).greater(J,U,{stype:"integer"}).select();if(T.length){for(N in T){T.hasOwnProperty(N)&&(T[N][J]=parseInt(T[N][J],10)+2)}}T=A.jgrid.from(V.p.data).greater(P,U,{stype:"integer"}).select();if(T.length){for(N in T){T.hasOwnProperty(N)&&(T[N][P]=parseInt(T[N][P],10)+2)}}S[J]=U+1;S[P]=U+2}}if(null===R||A(V).jqGrid("isNodeLoaded",E)||H){A(V).jqGrid("addRowData",Q,S,I,C),A(V).jqGrid("setTreeNode",D,B)}E&&!E[L]&&K&&A(V.rows[F]).find("div.treeclick").click()}}})})(jQuery);(function(A){A.jgrid.extend({jqGridImport:function(B){B=A.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},B||{});return this.each(function(){var D=this,F=function(K,J){var H=A(J.xmlGrid.config,K)[0],G=A(J.xmlGrid.data,K)[0],L,I;if(xmlJsonClass.xml2json&&A.jgrid.parse){H=xmlJsonClass.xml2json(H," ");H=A.jgrid.parse(H);for(I in H){H.hasOwnProperty(I)&&(L=H[I])}G?(G=H.grid.datatype,H.grid.datatype="xmlstring",H.grid.datastr=K,A(D).jqGrid(L).jqGrid("setGridParam",{datatype:G})):A(D).jqGrid(L)}else{alert("xml2json or parse are not present")}},E=function(J,I){if(J&&"string"===typeof J){var H=!1;A.jgrid.useJSON&&(A.jgrid.useJSON=!1,H=!0);var K=A.jgrid.parse(J);H&&(A.jgrid.useJSON=!0);H=K[I.jsonGrid.config];if(K=K[I.jsonGrid.data]){var G=H.datatype;H.datatype="jsonstring";H.datastr=K;A(D).jqGrid(H).jqGrid("setGridParam",{datatype:G})}else{A(D).jqGrid(H)}}};switch(B.imptype){case"xml":A.ajax(A.extend({url:B.impurl,type:B.mtype,data:B.impData,dataType:"xml",complete:function(H,G){"success"===G&&(F(H.responseXML,B),A(D).triggerHandler("jqGridImportComplete",[H,B]),A.isFunction(B.importComplete)&&B.importComplete(H))}},B.ajaxOptions));break;case"xmlstring":if(B.impstring&&"string"===typeof B.impstring){var C=A.parseXML(B.impstring);C&&(F(C,B),A(D).triggerHandler("jqGridImportComplete",[C,B]),A.isFunction(B.importComplete)&&B.importComplete(C),B.impstring=null);C=null}break;case"json":A.ajax(A.extend({url:B.impurl,type:B.mtype,data:B.impData,dataType:"json",complete:function(H){try{E(H.responseText,B),A(D).triggerHandler("jqGridImportComplete",[H,B]),A.isFunction(B.importComplete)&&B.importComplete(H)}catch(G){}}},B.ajaxOptions));break;case"jsonstring":B.impstring&&"string"===typeof B.impstring&&(E(B.impstring,B),A(D).triggerHandler("jqGridImportComplete",[B.impstring,B]),A.isFunction(B.importComplete)&&B.importComplete(B.impstring),B.impstring=null)}})},jqGridExport:function(C){var C=A.extend({exptype:"xmlstring",root:"grid",ident:"\t"},C||{}),B=null;this.each(function(){if(this.grid){var E,D=A.extend(!0,{},A(this).jqGrid("getGridParam"));D.rownumbers&&(D.colNames.splice(0,1),D.colModel.splice(0,1));D.multiselect&&(D.colNames.splice(0,1),D.colModel.splice(0,1));D.subGrid&&(D.colNames.splice(0,1),D.colModel.splice(0,1));D.knv=null;if(D.treeGrid){for(E in D.treeReader){D.treeReader.hasOwnProperty(E)&&(D.colNames.splice(D.colNames.length-1),D.colModel.splice(D.colModel.length-1))}}switch(C.exptype){case"xmlstring":B="<"+C.root+">"+xmlJsonClass.json2xml(D,C.ident)+"</"+C.root+">";break;case"jsonstring":B="{"+xmlJsonClass.toJson(D,C.root,C.ident,!1)+"}",void 0!==D.postData.filters&&(B=B.replace(/filters":"/,'filters":'),B=B.replace(/}]}"/,"}]}"))}}});return B},excelExport:function(B){B=A.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},B||{});return this.each(function(){if(this.grid){var C;"remote"===B.exptype&&(C=A.extend({},this.p.postData),C[B.oper]=B.tag,C=jQuery.param(C),C=-1!==B.url.indexOf("?")?B.url+"&"+C:B.url+"?"+C,window.location=C)}})}})})(jQuery);var xmlJsonClass={xml2json:function(C,B){9===C.nodeType&&(C=C.documentElement);var A=this.toJson(this.toObj(this.removeWhite(C)),C.nodeName,"\t");return"{\n"+B+(B?A.replace(/\t/g,B):A.replace(/\t|\n/g,""))+"\n}"},json2xml:function(D,C){var A=function(K,J,G){var F="",L,H;if(K instanceof Array){if(0===K.length){F+=G+"<"+J+">__EMPTY_ARRAY_</"+J+">\n"}else{L=0;for(H=K.length;L<H;L+=1){var I=G+A(K[L],J,G+"\t")+"\n",F=F+I}}}else{if("object"===typeof K){L=!1;F+=G+"<"+J;for(H in K){K.hasOwnProperty(H)&&("@"===H.charAt(0)?F+=" "+H.substr(1)+'="'+K[H].toString()+'"':L=!0)}F+=L?">":"/>";if(L){for(H in K){K.hasOwnProperty(H)&&("#text"===H?F+=K[H]:"#cdata"===H?F+="<![CDATA["+K[H]+"]]>":"@"!==H.charAt(0)&&(F+=A(K[H],H,G+"\t")))}F+=("\n"===F.charAt(F.length-1)?G:"")+"</"+J+">"}}else{"function"===typeof K?F+=G+"<"+J+"><![CDATA["+K+"]]></"+J+">":(void 0===K&&(K=""),F='""'===K.toString()||0===K.toString().length?F+(G+"<"+J+">__EMPTY_STRING_</"+J+">"):F+(G+"<"+J+">"+K.toString()+"</"+J+">"))}}return F},E="",B;for(B in D){D.hasOwnProperty(B)&&(E+=A(D[B],B,""))}return C?E.replace(/\t/g,C):E.replace(/\t|\n/g,"")},toObj:function(F){var D={},A=/function/i;if(1===F.nodeType){if(F.attributes.length){var G;for(G=0;G<F.attributes.length;G+=1){D["@"+F.attributes[G].nodeName]=(F.attributes[G].nodeValue||"").toString()}}if(F.firstChild){var C=G=0,B=!1,E;for(E=F.firstChild;E;E=E.nextSibling){1===E.nodeType?B=!0:3===E.nodeType&&E.nodeValue.match(/[^ \f\n\r\t\v]/)?G+=1:4===E.nodeType&&(C+=1)}if(B){if(2>G&&2>C){this.removeWhite(F);for(E=F.firstChild;E;E=E.nextSibling){3===E.nodeType?D["#text"]=this.escape(E.nodeValue):4===E.nodeType?A.test(E.nodeValue)?D[E.nodeName]=[D[E.nodeName],E.nodeValue]:D["#cdata"]=this.escape(E.nodeValue):D[E.nodeName]?D[E.nodeName] instanceof Array?D[E.nodeName][D[E.nodeName].length]=this.toObj(E):D[E.nodeName]=[D[E.nodeName],this.toObj(E)]:D[E.nodeName]=this.toObj(E)}}else{F.attributes.length?D["#text"]=this.escape(this.innerXml(F)):D=this.escape(this.innerXml(F))}}else{if(G){F.attributes.length?D["#text"]=this.escape(this.innerXml(F)):(D=this.escape(this.innerXml(F)),"__EMPTY_ARRAY_"===D?D="[]":"__EMPTY_STRING_"===D&&(D=""))}else{if(C){if(1<C){D=this.escape(this.innerXml(F))}else{for(E=F.firstChild;E;E=E.nextSibling){if(A.test(F.firstChild.nodeValue)){D=F.firstChild.nodeValue;break}else{D["#cdata"]=this.escape(E.nodeValue)}}}}}}}!F.attributes.length&&!F.firstChild&&(D=null)}else{9===F.nodeType?D=this.toObj(F.documentElement):alert("unhandled node type: "+F.nodeType)}return D},toJson:function(G,E,I,H){void 0===H&&(H=!0);var A=E?'"'+E+'"':"",D="\t",F="\n";H||(F=D="");if("[]"===G){A+=E?":[]":"[]"}else{if(G instanceof Array){var B,J,C=[];J=0;for(B=G.length;J<B;J+=1){C[J]=this.toJson(G[J],"",I+D,H)}A+=(E?":[":"[")+(1<C.length?F+I+D+C.join(","+F+I+D)+F+I:C.join(""))+"]"}else{if(null===G){A+=(E&&":")+"null"}else{if("object"===typeof G){B=[];for(J in G){G.hasOwnProperty(J)&&(B[B.length]=this.toJson(G[J],J,I+D,H))}A+=(E?":{":"{")+(1<B.length?F+I+D+B.join(","+F+I+D)+F+I:B.join(""))+"}"}else{A="string"===typeof G?A+((E&&":")+'"'+G.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"'):A+((E&&":")+G.toString())}}}}return A},innerXml:function(C){var B="";if("innerHTML" in C){B=C.innerHTML}else{for(var A=function(F){var E="",D;if(1===F.nodeType){E+="<"+F.nodeName;for(D=0;D<F.attributes.length;D+=1){E+=" "+F.attributes[D].nodeName+'="'+(F.attributes[D].nodeValue||"").toString()+'"'}if(F.firstChild){E+=">";for(D=F.firstChild;D;D=D.nextSibling){E+=A(D)}E+="</"+F.nodeName+">"}else{E+="/>"}}else{3===F.nodeType?E+=F.nodeValue:4===F.nodeType&&(E+="<![CDATA["+F.nodeValue+"]]>")}return E},C=C.firstChild;C;C=C.nextSibling){B+=A(C)}}return B},escape:function(A){return A.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(C){C.normalize();var B;for(B=C.firstChild;B;){if(3===B.nodeType){if(B.nodeValue.match(/[^ \f\n\r\t\v]/)){B=B.nextSibling}else{var A=B.nextSibling;C.removeChild(B);B=A}}else{1===B.nodeType&&this.removeWhite(B),B=B.nextSibling}}return C}};function tableToGrid(A,B){jQuery(A).each(function(){if(!this.grid){jQuery(this).width("99%");var F=jQuery(this).width(),G=jQuery("tr td:first-child input[type=checkbox]:first",jQuery(this)),H=jQuery("tr td:first-child input[type=radio]:first",jQuery(this)),G=0<G.length,H=!G&&0<H.length,E=G||H,K=[],C=[];jQuery("th",jQuery(this)).each(function(){0===K.length&&E?(K.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),C.push("__selection__")):(K.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150}),C.push(jQuery(this).html()))});var I=[],J=[],D=[];jQuery("tbody > tr",jQuery(this)).each(function(){var L={},M=0;jQuery("td",jQuery(this)).each(function(){if(0===M&&E){var O=jQuery("input",jQuery(this)),N=O.attr("value");J.push(N||I.length);O.is(":checked")&&D.push(N);L[K[M].name]=O.attr("value")}else{L[K[M].name]=jQuery(this).html()}M++});0<M&&I.push(L)});jQuery(this).empty();jQuery(this).addClass("scroll");jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:F,colNames:C,colModel:K,multiselect:G},B||{}));for(F=0;F<I.length;F++){H=null,0<J.length&&(H=J[F])&&H.replace&&(H=encodeURIComponent(H).replace(/[.\-%]/g,"_")),null===H&&(H=F+1),jQuery(this).jqGrid("addRowData",H,I[F])}for(F=0;F<D.length;F++){jQuery(this).jqGrid("setSelection",D[F])}}})}(function(b){b.jgrid.msie&&8===b.jgrid.msiever()&&(b.expr[":"].hidden=function(b){return 0===b.offsetWidth||0===b.offsetHeight||"none"===b.style.display});b.jgrid._multiselect=!1;if(b.ui&&b.ui.multiselect){if(b.ui.multiselect.prototype._setSelected){var o=b.ui.multiselect.prototype._setSelected;b.ui.multiselect.prototype._setSelected=function(a,d){var c=o.call(this,a,d);if(d&&this.selectedList){var e=this.element;this.selectedList.find("li").each(function(){b(this).data("optionLink")&&b(this).data("optionLink").remove().appendTo(e)})}return c}}b.ui.multiselect.prototype.destroy&&(b.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();b.Widget===void 0?b.widget.prototype.destroy.apply(this,arguments):b.Widget.prototype.destroy.apply(this,arguments)});b.jgrid._multiselect=!0}b.jgrid.extend({sortableColumns:function(a){return this.each(function(){function d(){c.p.disableClick=true}var c=this,e=b.jgrid.jqID(c.p.id),e={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+e+"_cb,#jqgh_"+e+"_rn,#jqgh_"+e+"_subgrid),:hidden)",placeholder:{element:function(a){return b(document.createElement(a[0].nodeName)).addClass(a[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(b,a){a.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10));a.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}},update:function(a,e){var d=b(e.item).parent(),d=b(">th",d),f={},g=c.p.id+"_";b.each(c.p.colModel,function(b){f[this.name]=b});var j=[];d.each(function(){var a=b(">div",this).get(0).id.replace(/^jqgh_/,"").replace(g,"");f.hasOwnProperty(a)&&j.push(f[a])});b(c).jqGrid("remapColumns",j,true,true);b.isFunction(c.p.sortable.update)&&c.p.sortable.update(j);setTimeout(function(){c.p.disableClick=false},50)}};if(c.p.sortable.options){b.extend(e,c.p.sortable.options)}else{if(b.isFunction(c.p.sortable)){c.p.sortable={update:c.p.sortable}}}if(e.start){var g=e.start;e.start=function(b,a){d();g.call(this,b,a)}}else{e.start=d}if(c.p.sortable.exclude){e.items=e.items+(":not("+c.p.sortable.exclude+")")}a.sortable(e).data("sortable").floating=true})},columnChooser:function(a){function d(a,c){a&&(typeof a==="string"?b.fn[a]&&b.fn[a].apply(c,b.makeArray(arguments).slice(2)):b.isFunction(a)&&a.apply(c,b.makeArray(arguments).slice(2)))}var c=this;if(!b("#colchooser_"+b.jgrid.jqID(c[0].p.id)).length){var e=b('<div id="colchooser_'+c[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),g=b("select",e),a=b.extend({width:420,height:240,classname:null,done:function(b){b&&c.jqGrid("remapColumns",b,true)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470},dlog_opts:function(a){var c={};c[a.bSubmit]=function(){a.apply_perm();a.cleanup(false)};c[a.bCancel]=function(){a.cleanup(true)};return b.extend(true,{buttons:c,close:function(){a.cleanup(true)},modal:a.modal||false,resizable:a.resizable||true,width:a.width+20},a.dialog_opts||{})},apply_perm:function(){b("option",g).each(function(){this.selected?c.jqGrid("showCol",i[this.value].name):c.jqGrid("hideCol",i[this.value].name)});var e=[];b("option:selected",g).each(function(){e.push(parseInt(this.value,10))});b.each(e,function(){delete m[i[parseInt(this,10)].name]});b.each(m,function(){var b=parseInt(this,10);var a=e,c=b;if(c>=0){var d=a.slice(),i=d.splice(c,Math.max(a.length-c,c));if(c>a.length){c=a.length}d[c]=b;e=d.concat(i)}else{e=void 0}});a.done&&a.done.call(c,e)},cleanup:function(b){d(a.dlog,e,"destroy");d(a.msel,g,"destroy");e.remove();b&&a.done&&a.done.call(c)},msel_opts:{}},b.jgrid.col,a||{});if(b.ui&&b.ui.multiselect&&a.msel==="multiselect"){if(!b.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}a.msel_opts=b.extend(b.ui.multiselect.defaults,a.msel_opts)}a.caption&&e.attr("title",a.caption);if(a.classname){e.addClass(a.classname);g.addClass(a.classname)}if(a.width){b(">div",e).css({width:a.width,margin:"0 auto"});g.css("width",a.width)}if(a.height){b(">div",e).css("height",a.height);g.css("height",a.height-10)}var i=c.jqGrid("getGridParam","colModel"),q=c.jqGrid("getGridParam","colNames"),m={},f=[];g.empty();b.each(i,function(a){m[this.name]=a;this.hidedlg?this.hidden||f.push(a):g.append("<option value='"+a+"' "+(this.hidden?"":"selected='selected'")+">"+b.jgrid.stripHtml(q[a])+"</option>")});var n=b.isFunction(a.dlog_opts)?a.dlog_opts.call(c,a):a.dlog_opts;d(a.dlog,e,n);n=b.isFunction(a.msel_opts)?a.msel_opts.call(c,a):a.msel_opts;d(a.msel,g,n)}},sortableRows:function(a){return this.each(function(){var d=this;if(d.grid&&!d.p.treeGrid&&b.fn.sortable){a=b.extend({cursor:"move",axis:"y",items:".jqgrow"},a||{});if(a.start&&b.isFunction(a.start)){a._start_=a.start;delete a.start}else{a._start_=false}if(a.update&&b.isFunction(a.update)){a._update_=a.update;delete a.update}else{a._update_=false}a.start=function(c,e){b(e.item).css("border-width","0px");b("td",e.item).each(function(b){this.style.width=d.grid.cols[b].style.width});if(d.p.subGrid){var g=b(e.item).attr("id");try{b(d).jqGrid("collapseSubGridRow",g)}catch(i){}}a._start_&&a._start_.apply(this,[c,e])};a.update=function(c,e){b(e.item).css("border-width","");d.p.rownumbers===true&&b("td.jqgrid-rownum",d.rows).each(function(a){b(this).html(a+1+(parseInt(d.p.page,10)-1)*parseInt(d.p.rowNum,10))});a._update_&&a._update_.apply(this,[c,e])};b("tbody:first",d).sortable(a);b("tbody:first",d).disableSelection()}})},gridDnD:function(a){return this.each(function(){function d(){var a=b.data(c,"dnd");b("tr.jqgrow:not(.ui-draggable)",c).draggable(b.isFunction(a.drag)?a.drag.call(b(c),a):a.drag)}var c=this,e,g;if(c.grid&&!c.p.treeGrid&&b.fn.draggable&&b.fn.droppable){b("#jqgrid_dnd")[0]===void 0&&b("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>");if(typeof a==="string"&&a==="updateDnD"&&c.p.jqgdnd===true){d()}else{a=b.extend({drag:function(a){return b.extend({start:function(e,d){var f;if(c.p.subGrid){f=b(d.helper).attr("id");try{b(c).jqGrid("collapseSubGridRow",f)}catch(g){}}for(f=0;f<b.data(c,"dnd").connectWith.length;f++){b(b.data(c,"dnd").connectWith[f]).jqGrid("getGridParam","reccount")===0&&b(b.data(c,"dnd").connectWith[f]).jqGrid("addRowData","jqg_empty_row",{})}d.helper.addClass("ui-state-highlight");b("td",d.helper).each(function(b){this.style.width=c.grid.headers[b].width+"px"});a.onstart&&b.isFunction(a.onstart)&&a.onstart.call(b(c),e,d)},stop:function(e,d){var f;if(d.helper.dropped&&!a.dragcopy){f=b(d.helper).attr("id");f===void 0&&(f=b(this).attr("id"));b(c).jqGrid("delRowData",f)}for(f=0;f<b.data(c,"dnd").connectWith.length;f++){b(b.data(c,"dnd").connectWith[f]).jqGrid("delRowData","jqg_empty_row")}a.onstop&&b.isFunction(a.onstop)&&a.onstop.call(b(c),e,d)}},a.drag_opts||{})},drop:function(a){return b.extend({accept:function(a){if(!b(a).hasClass("jqgrow")){return a}a=b(a).closest("table.ui-jqgrid-btable");if(a.length>0&&b.data(a[0],"dnd")!==void 0){a=b.data(a[0],"dnd").connectWith;return b.inArray("#"+b.jgrid.jqID(this.id),a)!==-1?true:false}return false},drop:function(e,d){if(b(d.draggable).hasClass("jqgrow")){var f=b(d.draggable).attr("id"),f=d.draggable.parent().parent().jqGrid("getRowData",f);if(!a.dropbyname){var g=0,j={},h,l,p=b("#"+b.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(l in f){if(f.hasOwnProperty(l)){h=p[g].name;h==="cb"||h==="rn"||h==="subgrid"||f.hasOwnProperty(l)&&p[g]&&(j[h]=f[l]);g++}}f=j}catch(o){}}d.helper.dropped=true;if(a.beforedrop&&b.isFunction(a.beforedrop)){h=a.beforedrop.call(this,e,d,f,b("#"+b.jgrid.jqID(c.p.id)),b(this));h!==void 0&&h!==null&&typeof h==="object"&&(f=h)}if(d.helper.dropped){var k;if(a.autoid){if(b.isFunction(a.autoid)){k=a.autoid.call(this,f)}else{k=Math.ceil(Math.random()*1000);k=a.autoidprefix+k}}b("#"+b.jgrid.jqID(this.id)).jqGrid("addRowData",k,f,a.droppos)}a.ondrop&&b.isFunction(a.ondrop)&&a.ondrop.call(this,e,d,f)}}},a.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5000},dragcopy:false,dropbyname:false,droppos:"first",autoid:true,autoidprefix:"dnd_"},a||{});if(a.connectWith){a.connectWith=a.connectWith.split(",");a.connectWith=b.map(a.connectWith,function(a){return b.trim(a)});b.data(c,"dnd",a);c.p.reccount!==0&&!c.p.jqgdnd&&d();c.p.jqgdnd=true;for(e=0;e<a.connectWith.length;e++){g=a.connectWith[e];b(g).droppable(b.isFunction(a.drop)?a.drop.call(b(c),a):a.drop)}}}}})},gridResize:function(a){return this.each(function(){var d=this,c=b.jgrid.jqID(d.p.id);if(d.grid&&b.fn.resizable){a=b.extend({},a||{});if(a.alsoResize){a._alsoResize_=a.alsoResize;delete a.alsoResize}else{a._alsoResize_=false}if(a.stop&&b.isFunction(a.stop)){a._stop_=a.stop;delete a.stop}else{a._stop_=false}a.stop=function(e,g){b(d).jqGrid("setGridParam",{height:b("#gview_"+c+" .ui-jqgrid-bdiv").height()});b(d).jqGrid("setGridWidth",g.size.width,a.shrinkToFit);a._stop_&&a._stop_.call(d,e,g)};a.alsoResize=a._alsoResize_?eval("("+("{'#gview_"+c+" .ui-jqgrid-bdiv':true,'"+a._alsoResize_+"':true}")+")"):b(".ui-jqgrid-bdiv","#gview_"+c);delete a._alsoResize_;b("#gbox_"+c).resizable(a)}})}})})(jQuery);