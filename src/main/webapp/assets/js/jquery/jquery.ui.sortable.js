/*
 * jQuery UI Sortable 1.10.4
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(D,B){function A(G,F,E){return(G>F)&&(G<(F+E))}function C(E){return(/left|right/).test(E.css("float"))||(/inline|table-cell/).test(E.css("display"))}D.widget("ui.sortable",D.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var E=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?E.axis==="x"||C(this.items[0].item):false;this.offset=this.element.offset();this._mouseInit();this.ready=true},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var E=this.items.length-1;E>=0;E--){this.items[E].item.removeData(this.widgetName+"-item")}return this},_setOption:function(E,F){if(E==="disabled"){this.options[E]=F;this.widget().toggleClass("ui-sortable-disabled",!!F)}else{D.Widget.prototype._setOption.apply(this,arguments)}},_mouseCapture:function(H,I){var E=null,G=false,F=this;if(this.reverting){return false}if(this.options.disabled||this.options.type==="static"){return false}this._refreshItems(H);D(H.target).parents().each(function(){if(D.data(this,F.widgetName+"-item")===F){E=D(this);return false}});if(D.data(H.target,F.widgetName+"-item")===F){E=D(H.target)}if(!E){return false}if(this.options.handle&&!I){D(this.options.handle,E).find("*").addBack().each(function(){if(this===H.target){G=true}});if(!G){return false}}this.currentItem=E;this._removeCurrentsFromItems();return true},_mouseStart:function(I,J,F){var E,H,G=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(I);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};D.extend(this.offset,{click:{left:I.pageX-this.offset.left,top:I.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(I);this.originalPageX=I.pageX;this.originalPageY=I.pageY;(G.cursorAt&&this._adjustOffsetFromHelper(G.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!==this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();if(G.containment){this._setContainment()}if(G.cursor&&G.cursor!=="auto"){H=this.document.find("body");this.storedCursor=H.css("cursor");H.css("cursor",G.cursor);this.storedStylesheet=D("<style>*{ cursor: "+G.cursor+" !important; }</style>").appendTo(H)}if(G.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",G.opacity)}if(G.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",G.zIndex)}if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",I,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}if(!F){for(E=this.containers.length-1;E>=0;E--){this.containers[E]._trigger("activate",I,this._uiHash(this))}}if(D.ui.ddmanager){D.ui.ddmanager.current=this}if(D.ui.ddmanager&&!G.dropBehaviour){D.ui.ddmanager.prepareOffsets(this,I)}this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(I);return true},_mouseDrag:function(J){var F,I,K,H,G=this.options,E=false;this.position=this._generatePosition(J);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-J.pageY<G.scrollSensitivity){this.scrollParent[0].scrollTop=E=this.scrollParent[0].scrollTop+G.scrollSpeed}else{if(J.pageY-this.overflowOffset.top<G.scrollSensitivity){this.scrollParent[0].scrollTop=E=this.scrollParent[0].scrollTop-G.scrollSpeed}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-J.pageX<G.scrollSensitivity){this.scrollParent[0].scrollLeft=E=this.scrollParent[0].scrollLeft+G.scrollSpeed}else{if(J.pageX-this.overflowOffset.left<G.scrollSensitivity){this.scrollParent[0].scrollLeft=E=this.scrollParent[0].scrollLeft-G.scrollSpeed}}}else{if(J.pageY-D(document).scrollTop()<G.scrollSensitivity){E=D(document).scrollTop(D(document).scrollTop()-G.scrollSpeed)}else{if(D(window).height()-(J.pageY-D(document).scrollTop())<G.scrollSensitivity){E=D(document).scrollTop(D(document).scrollTop()+G.scrollSpeed)}}if(J.pageX-D(document).scrollLeft()<G.scrollSensitivity){E=D(document).scrollLeft(D(document).scrollLeft()-G.scrollSpeed)}else{if(D(window).width()-(J.pageX-D(document).scrollLeft())<G.scrollSensitivity){E=D(document).scrollLeft(D(document).scrollLeft()+G.scrollSpeed)}}}if(E!==false&&D.ui.ddmanager&&!G.dropBehaviour){D.ui.ddmanager.prepareOffsets(this,J)}}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}for(F=this.items.length-1;F>=0;F--){I=this.items[F];K=I.item[0];H=this._intersectsWithPointer(I);if(!H){continue}if(I.instance!==this.currentContainer){continue}if(K!==this.currentItem[0]&&this.placeholder[H===1?"next":"prev"]()[0]!==K&&!D.contains(this.placeholder[0],K)&&(this.options.type==="semi-dynamic"?!D.contains(this.element[0],K):true)){this.direction=H===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(I)){this._rearrange(J,I)}else{break}this._trigger("change",J,this._uiHash());break}}this._contactContainers(J);if(D.ui.ddmanager){D.ui.ddmanager.drag(this,J)}this._trigger("sort",J,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(I,H){if(!I){return}if(D.ui.ddmanager&&!this.options.dropBehaviour){D.ui.ddmanager.drop(this,I)}if(this.options.revert){var G=this,E=this.placeholder.offset(),J=this.options.axis,F={};if(!J||J==="x"){F.left=E.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)}if(!J||J==="y"){F.top=E.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)}this.reverting=true;D(this.helper).animate(F,parseInt(this.options.revert,10)||500,function(){G._clear(I)})}else{this._clear(I,H)}return false},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper==="original"){this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}for(var E=this.containers.length-1;E>=0;E--){this.containers[E]._trigger("deactivate",null,this._uiHash(this));if(this.containers[E].containerCache.over){this.containers[E]._trigger("out",null,this._uiHash(this));this.containers[E].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode){this.placeholder[0].parentNode.removeChild(this.placeholder[0])}if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode){this.helper.remove()}D.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){D(this.domPosition.prev).after(this.currentItem)}else{D(this.domPosition.parent).prepend(this.currentItem)}}return this},serialize:function(E){var G=this._getItemsAsjQuery(E&&E.connected),F=[];E=E||{};D(G).each(function(){var H=(D(E.item||this).attr(E.attribute||"id")||"").match(E.expression||(/(.+)[\-=_](.+)/));if(H){F.push((E.key||H[1]+"[]")+"="+(E.key&&E.expression?H[1]:H[2]))}});if(!F.length&&E.key){F.push(E.key+"=")}return F.join("&")},toArray:function(E){var G=this._getItemsAsjQuery(E&&E.connected),F=[];E=E||{};G.each(function(){F.push(D(E.item||this).attr(E.attribute||"id")||"")});return F},_intersectsWith:function(R){var F=this.positionAbs.left,I=F+this.helperProportions.width,G=this.positionAbs.top,J=G+this.helperProportions.height,L=R.left,E=L+R.width,H=R.top,M=H+R.height,N=this.offset.click.top,K=this.offset.click.left,O=(this.options.axis==="x")||((G+N)>H&&(G+N)<M),P=(this.options.axis==="y")||((F+K)>L&&(F+K)<E),Q=O&&P;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>R[this.floating?"width":"height"])){return Q}else{return(L<F+(this.helperProportions.width/2)&&I-(this.helperProportions.width/2)<E&&H<G+(this.helperProportions.height/2)&&J-(this.helperProportions.height/2)<M)}},_intersectsWithPointer:function(H){var E=(this.options.axis==="x")||A(this.positionAbs.top+this.offset.click.top,H.top,H.height),J=(this.options.axis==="y")||A(this.positionAbs.left+this.offset.click.left,H.left,H.width),F=E&&J,G=this._getDragVerticalDirection(),I=this._getDragHorizontalDirection();if(!F){return false}return this.floating?(((I&&I==="right")||G==="down")?2:1):(G&&(G==="down"?2:1))},_intersectsWithSides:function(F){var E=A(this.positionAbs.top+this.offset.click.top,F.top+(F.height/2),F.height),G=A(this.positionAbs.left+this.offset.click.left,F.left+(F.width/2),F.width),I=this._getDragVerticalDirection(),H=this._getDragHorizontalDirection();if(this.floating&&H){return((H==="right"&&G)||(H==="left"&&!G))}else{return I&&((I==="down"&&E)||(I==="up"&&!E))}},_getDragVerticalDirection:function(){var E=this.positionAbs.top-this.lastPositionAbs.top;return E!==0&&(E>0?"down":"up")},_getDragHorizontalDirection:function(){var E=this.positionAbs.left-this.lastPositionAbs.left;return E!==0&&(E>0?"right":"left")},refresh:function(E){this._refreshItems(E);this.refreshPositions();return this},_connectWith:function(){var E=this.options;return E.connectWith.constructor===String?[E.connectWith]:E.connectWith},_getItemsAsjQuery:function(F){var K,I,E,G,L=[],J=[],M=this._connectWith();if(M&&F){for(K=M.length-1;K>=0;K--){E=D(M[K]);for(I=E.length-1;I>=0;I--){G=D.data(E[I],this.widgetFullName);if(G&&G!==this&&!G.options.disabled){J.push([D.isFunction(G.options.items)?G.options.items.call(G.element):D(G.options.items,G.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),G])}}}}J.push([D.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):D(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);function H(){L.push(this)}for(K=J.length-1;K>=0;K--){J[K][0].each(H)}return D(L)},_removeCurrentsFromItems:function(){var E=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=D.grep(this.items,function(F){for(var G=0;G<E.length;G++){if(E[G]===F.item[0]){return false}}return true})},_refreshItems:function(O){this.items=[];this.containers=[this];var K,I,E,F,P,G,L,H,N=this.items,J=[[D.isFunction(this.options.items)?this.options.items.call(this.element[0],O,{item:this.currentItem}):D(this.options.items,this.element),this]],M=this._connectWith();if(M&&this.ready){for(K=M.length-1;K>=0;K--){E=D(M[K]);for(I=E.length-1;I>=0;I--){F=D.data(E[I],this.widgetFullName);if(F&&F!==this&&!F.options.disabled){J.push([D.isFunction(F.options.items)?F.options.items.call(F.element[0],O,{item:this.currentItem}):D(F.options.items,F.element),F]);this.containers.push(F)}}}}for(K=J.length-1;K>=0;K--){P=J[K][1];G=J[K][0];for(I=0,H=G.length;I<H;I++){L=D(G[I]);L.data(this.widgetName+"-item",P);N.push({item:L,instance:P,width:0,height:0,left:0,top:0})}}},refreshPositions:function(G){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}var E,H,I,F;for(E=this.items.length-1;E>=0;E--){H=this.items[E];if(H.instance!==this.currentContainer&&this.currentContainer&&H.item[0]!==this.currentItem[0]){continue}I=this.options.toleranceElement?D(this.options.toleranceElement,H.item):H.item;if(!G){H.width=I.outerWidth();H.height=I.outerHeight()}F=I.offset();H.left=F.left;H.top=F.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(E=this.containers.length-1;E>=0;E--){F=this.containers[E].element.offset();this.containers[E].containerCache.left=F.left;this.containers[E].containerCache.top=F.top;this.containers[E].containerCache.width=this.containers[E].element.outerWidth();this.containers[E].containerCache.height=this.containers[E].element.outerHeight()}}return this},_createPlaceholder:function(F){F=F||this;var E,G=F.options;if(!G.placeholder||G.placeholder.constructor===String){E=G.placeholder;G.placeholder={element:function(){var I=F.currentItem[0].nodeName.toLowerCase(),H=D("<"+I+">",F.document[0]).addClass(E||F.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");if(I==="tr"){F.currentItem.children().each(function(){D("<td>&#160;</td>",F.document[0]).attr("colspan",D(this).attr("colspan")||1).appendTo(H)})}else{if(I==="img"){H.attr("src",F.currentItem.attr("src"))}}if(!E){H.css("visibility","hidden")}return H},update:function(I,H){if(E&&!G.forcePlaceholderSize){return}if(!H.height()){H.height(F.currentItem.innerHeight()-parseInt(F.currentItem.css("paddingTop")||0,10)-parseInt(F.currentItem.css("paddingBottom")||0,10))}if(!H.width()){H.width(F.currentItem.innerWidth()-parseInt(F.currentItem.css("paddingLeft")||0,10)-parseInt(F.currentItem.css("paddingRight")||0,10))}}}}F.placeholder=D(G.placeholder.element.call(F.element,F.currentItem));F.currentItem.after(F.placeholder);G.placeholder.update(F,F.placeholder)},_contactContainers:function(Q){var K,I,N,L,M,G,F,E,P,J,O=null,H=null;for(K=this.containers.length-1;K>=0;K--){if(D.contains(this.currentItem[0],this.containers[K].element[0])){continue}if(this._intersectsWith(this.containers[K].containerCache)){if(O&&D.contains(this.containers[K].element[0],O.element[0])){continue}O=this.containers[K];H=K}else{if(this.containers[K].containerCache.over){this.containers[K]._trigger("out",Q,this._uiHash(this));this.containers[K].containerCache.over=0}}}if(!O){return}if(this.containers.length===1){if(!this.containers[H].containerCache.over){this.containers[H]._trigger("over",Q,this._uiHash(this));this.containers[H].containerCache.over=1}}else{N=10000;L=null;J=O.floating||C(this.currentItem);M=J?"left":"top";G=J?"width":"height";F=this.positionAbs[M]+this.offset.click[M];for(I=this.items.length-1;I>=0;I--){if(!D.contains(this.containers[H].element[0],this.items[I].item[0])){continue}if(this.items[I].item[0]===this.currentItem[0]){continue}if(J&&!A(this.positionAbs.top+this.offset.click.top,this.items[I].top,this.items[I].height)){continue}E=this.items[I].item.offset()[M];P=false;if(Math.abs(E-F)>Math.abs(E+this.items[I][G]-F)){P=true;E+=this.items[I][G]}if(Math.abs(E-F)<N){N=Math.abs(E-F);L=this.items[I];this.direction=P?"up":"down"}}if(!L&&!this.options.dropOnEmpty){return}if(this.currentContainer===this.containers[H]){return}L?this._rearrange(Q,L,null,true):this._rearrange(Q,null,this.containers[H].element,true);this._trigger("change",Q,this._uiHash());this.containers[H]._trigger("change",Q,this._uiHash(this));this.currentContainer=this.containers[H];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[H]._trigger("over",Q,this._uiHash(this));this.containers[H].containerCache.over=1}},_createHelper:function(F){var E=this.options,G=D.isFunction(E.helper)?D(E.helper.apply(this.element[0],[F,this.currentItem])):(E.helper==="clone"?this.currentItem.clone():this.currentItem);if(!G.parents("body").length){D(E.appendTo!=="parent"?E.appendTo:this.currentItem[0].parentNode)[0].appendChild(G[0])}if(G[0]===this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(!G[0].style.width||E.forceHelperSize){G.width(this.currentItem.width())}if(!G[0].style.height||E.forceHelperSize){G.height(this.currentItem.height())}return G},_adjustOffsetFromHelper:function(E){if(typeof E==="string"){E=E.split(" ")}if(D.isArray(E)){E={left:+E[0],top:+E[1]||0}}if("left" in E){this.offset.click.left=E.left+this.margins.left}if("right" in E){this.offset.click.left=this.helperProportions.width-E.right+this.margins.left}if("top" in E){this.offset.click.top=E.top+this.margins.top}if("bottom" in E){this.offset.click.top=this.helperProportions.height-E.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var E=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&D.contains(this.scrollParent[0],this.offsetParent[0])){E.left+=this.scrollParent.scrollLeft();E.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===document.body||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&D.ui.ie)){E={top:0,left:0}}return{top:E.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:E.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var E=this.currentItem.position();return{top:E.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:E.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var G,E,H,F=this.options;if(F.containment==="parent"){F.containment=this.helper[0].parentNode}if(F.containment==="document"||F.containment==="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,D(F.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(D(F.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(F.containment)){G=D(F.containment)[0];E=D(F.containment).offset();H=(D(G).css("overflow")!=="hidden");this.containment=[E.left+(parseInt(D(G).css("borderLeftWidth"),10)||0)+(parseInt(D(G).css("paddingLeft"),10)||0)-this.margins.left,E.top+(parseInt(D(G).css("borderTopWidth"),10)||0)+(parseInt(D(G).css("paddingTop"),10)||0)-this.margins.top,E.left+(H?Math.max(G.scrollWidth,G.offsetWidth):G.offsetWidth)-(parseInt(D(G).css("borderLeftWidth"),10)||0)-(parseInt(D(G).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,E.top+(H?Math.max(G.scrollHeight,G.offsetHeight):G.offsetHeight)-(parseInt(D(G).css("borderTopWidth"),10)||0)-(parseInt(D(G).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(E,F){if(!F){F=this.position}var I=E==="absolute"?1:-1,H=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&D.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,G=(/(html|body)/i).test(H[0].tagName);return{top:(F.top+this.offset.relative.top*I+this.offset.parent.top*I-((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(G?0:H.scrollTop()))*I)),left:(F.left+this.offset.relative.left*I+this.offset.parent.left*I-((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():G?0:H.scrollLeft())*I))}},_generatePosition:function(G){var H,F,J=this.options,I=G.pageX,L=G.pageY,K=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&D.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,E=(/(html|body)/i).test(K[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}if(this.originalPosition){if(this.containment){if(G.pageX-this.offset.click.left<this.containment[0]){I=this.containment[0]+this.offset.click.left}if(G.pageY-this.offset.click.top<this.containment[1]){L=this.containment[1]+this.offset.click.top}if(G.pageX-this.offset.click.left>this.containment[2]){I=this.containment[2]+this.offset.click.left}if(G.pageY-this.offset.click.top>this.containment[3]){L=this.containment[3]+this.offset.click.top}}if(J.grid){H=this.originalPageY+Math.round((L-this.originalPageY)/J.grid[1])*J.grid[1];L=this.containment?((H-this.offset.click.top>=this.containment[1]&&H-this.offset.click.top<=this.containment[3])?H:((H-this.offset.click.top>=this.containment[1])?H-J.grid[1]:H+J.grid[1])):H;F=this.originalPageX+Math.round((I-this.originalPageX)/J.grid[0])*J.grid[0];I=this.containment?((F-this.offset.click.left>=this.containment[0]&&F-this.offset.click.left<=this.containment[2])?F:((F-this.offset.click.left>=this.containment[0])?F-J.grid[0]:F+J.grid[0])):F}}return{top:(L-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():(E?0:K.scrollTop())))),left:(I-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():E?0:K.scrollLeft())))}},_rearrange:function(H,F,I,E){I?I[0].appendChild(this.placeholder[0]):F.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction==="down"?F.item[0]:F.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var G=this.counter;this._delay(function(){if(G===this.counter){this.refreshPositions(!E)}})},_clear:function(G,F){this.reverting=false;var E,H=[];if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(E in this._storedCSS){if(this._storedCSS[E]==="auto"||this._storedCSS[E]==="static"){this._storedCSS[E]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}if(this.fromOutside&&!F){H.push(function(J){this._trigger("receive",J,this._uiHash(this.fromOutside))})}if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!F){H.push(function(J){this._trigger("update",J,this._uiHash())})}if(this!==this.currentContainer){if(!F){H.push(function(J){this._trigger("remove",J,this._uiHash())});H.push((function(J){return function(K){J._trigger("receive",K,this._uiHash(this))}}).call(this,this.currentContainer));H.push((function(J){return function(K){J._trigger("update",K,this._uiHash(this))}}).call(this,this.currentContainer))}}function I(J,K,L){return function(M){L._trigger(J,M,K._uiHash(K))}}for(E=this.containers.length-1;E>=0;E--){if(!F){H.push(I("deactivate",this,this.containers[E]))}if(this.containers[E].containerCache.over){H.push(I("out",this,this.containers[E]));this.containers[E].containerCache.over=0}}if(this.storedCursor){this.document.find("body").css("cursor",this.storedCursor);this.storedStylesheet.remove()}if(this._storedOpacity){this.helper.css("opacity",this._storedOpacity)}if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex)}this.dragging=false;if(this.cancelHelperRemoval){if(!F){this._trigger("beforeStop",G,this._uiHash());for(E=0;E<H.length;E++){H[E].call(this,G)}this._trigger("stop",G,this._uiHash())}this.fromOutside=false;return false}if(!F){this._trigger("beforeStop",G,this._uiHash())}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!==this.currentItem[0]){this.helper.remove()}this.helper=null;if(!F){for(E=0;E<H.length;E++){H[E].call(this,G)}this._trigger("stop",G,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){if(D.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel()}},_uiHash:function(E){var F=E||this;return{helper:F.helper,placeholder:F.placeholder||D([]),position:F.position,originalPosition:F.originalPosition,offset:F.positionAbs,item:F.currentItem,sender:E?E.element:null}}})})(jQuery);